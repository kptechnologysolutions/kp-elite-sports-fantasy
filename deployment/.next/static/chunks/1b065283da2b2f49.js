(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11073,e=>{"use strict";let t,s;e.s(["default",()=>t3],11073);var r,i=e.i(43476),n=e.i(71645),a=e.i(18566),l=e.i(70065),o=e.i(67881),c=e.i(94179),d=e.i(27341),h=e.i(87336),u=e.i(81947),p=e.i(55841),m=e.i(66856),f=e.i(64030),x=e.i(20278),g=e.i(78894),y=e.i(87316),v=e.i(39312),j=e.i(98919),w=e.i(58377),b=e.i(54498),N=e.i(21218),_=e.i(36121),k=e.i(47163),C=e.i(85104);function T(){var e,t,s,r,n,a,o,d,p,m,T,S;let{myRoster:A,rosters:R,currentLeague:E,currentWeek:P,leagueUsers:M,players:L,getPlayer:D,seasonMatchups:O}=(0,C.default)();if(!A||!E)return null;let B=[...R].sort((e,t)=>{var s,r,i,n,a,l;let o=(null==(s=e.settings)?void 0:s.wins)||0,c=(null==(r=e.settings)?void 0:r.losses)||0,d=(null==(i=t.settings)?void 0:i.wins)||0,h=(null==(n=t.settings)?void 0:n.losses)||0,u=o/Math.max(o+c,1),p=d/Math.max(d+h,1);return u!==p?p-u:((null==(a=t.settings)?void 0:a.fpts)||0)-((null==(l=e.settings)?void 0:l.fpts)||0)}),I=B.findIndex(e=>e.roster_id===A.roster_id)+1,F=B[0],U=Math.ceil(.5*R.length),W=(null==(e=A.settings)?void 0:e.wins)||0,q=(null==(t=A.settings)?void 0:t.losses)||0,H=(((null==F||null==(s=F.settings)?void 0:s.wins)||0)-((null==F||null==(r=F.settings)?void 0:r.losses)||0)-(W-q))/2,z=I>U?((null==(a=B[U-1])||null==(n=a.settings)?void 0:n.wins)||0)-W:0,Y=W+q+((null==(o=A.settings)?void 0:o.ties)||0),V=Y>0?W/Y*100:0,K=[];if(O&&O.size>0){let e=Math.min(3,P-1);for(let t=P-e;t<P;t++){let e=O.get(t);if(e){let t=e.find(e=>e.roster_id===A.roster_id),s=e.find(e=>e.matchup_id===(null==t?void 0:t.matchup_id)&&e.roster_id!==(null==t?void 0:t.roster_id));t&&s&&K.push(t.points>s.points?"W":"L")}}}else if(0===q&&W>0)for(let e=0;e<Math.min(W,3);e++)K.push("W");else if(0===W&&q>0)for(let e=0;e<Math.min(q,3);e++)K.push("L");let X=K.filter(e=>"W"===e).length,G="medium",Q=((null==(d=A.settings)?void 0:d.fpts)||0)/Math.max(Y,1);null==(p=A.settings)||p.fpts_against;let J=R.reduce((e,t)=>{var s;return e+((null==(s=t.settings)?void 0:s.fpts)||0)},0)/R.length/Math.max(Y,1),$=new Map;A.players.forEach(e=>{let t=D(e);if(null==t?void 0:t.team){let e={KC:6,BUF:7,SF:9,DAL:7,PHI:10,MIA:6,GB:6,MIN:13,DET:9,CHI:7}[t.team];e&&($.has(e)||$.set(e,[]),$.get(e).push("".concat(t.first_name," ").concat(t.last_name)))}});let Z=Array.from($.entries()).filter(e=>{let[t]=e;return t>=P&&t<=P+2}).sort((e,t)=>{let[s]=e,[r]=t;return s-r}),ee=B[5];return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,i.jsx)(f.Trophy,{className:"h-3 w-3"}),"Record"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsxs)("div",{className:(0,k.cn)("text-2xl font-bold",(S=V/100)>=.7?"text-green-500":S>=.5?"text-yellow-500":S>=.3?"text-orange-500":"text-red-500"),children:[W,"-",q,((null==(m=A.settings)?void 0:m.ties)||0)>0&&"-".concat(A.settings.ties)]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[V.toFixed(0),"% Win Rate"]})]})]}),(0,i.jsxs)(l.Card,{className:(0,k.cn)(H<=0?"text-green-500 bg-green-500/10":H<=2?"text-yellow-500 bg-yellow-500/10":H<=4?"text-orange-500 bg-orange-500/10":"text-red-500 bg-red-500/10"),children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-1",children:[H<=0?(0,i.jsx)(f.Trophy,{className:"h-3 w-3"}):(0,i.jsx)(x.Target,{className:"h-3 w-3"}),"vs 1st Place"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsx)("div",{className:"text-2xl font-bold",children:H<=0?(0,i.jsxs)("span",{className:"flex items-center gap-1",children:["Leader! ",(0,i.jsx)(f.Trophy,{className:"h-4 w-4 text-yellow-500"})]}):"-".concat(H.toFixed(1)," GB")}),(0,i.jsxs)("div",{className:"text-xs opacity-75",children:["Rank #",I," of ",R.length]})]})]}),(0,i.jsxs)(l.Card,{className:(0,k.cn)(I<=U?"text-green-500 bg-green-500/10":z<=1?"text-yellow-500 bg-yellow-500/10":z<=2?"text-orange-500 bg-orange-500/10":"text-red-500 bg-red-500/10"),children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,i.jsx)(j.Shield,{className:"h-3 w-3"}),"Playoff Status"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsx)("div",{className:"text-2xl font-bold",children:I<=U?(0,i.jsxs)("span",{className:"flex items-center gap-1",children:["IN ",(0,i.jsx)(j.Shield,{className:"h-4 w-4"})]}):"-".concat(z," GB")}),(0,i.jsxs)("div",{className:"text-xs opacity-75",children:["Top ",U," qualify"]})]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,i.jsx)(v.Zap,{className:"h-3 w-3"}),"Points For"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsx)("div",{className:(0,k.cn)("text-2xl font-bold",function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?e<=t?"text-green-500":e<=s?"text-yellow-500":"text-red-500":e>=t?"text-green-500":e>=s?"text-yellow-500":"text-red-500"}(Q,1.1*J,.9*J)),children:Q.toFixed(1)}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[Q>J?"+":"",(Q-J).toFixed(1)," vs avg"]})]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,i.jsx)(N.Activity,{className:"h-3 w-3"}),"Form"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[X>=2&&(0,i.jsx)(w.Flame,{className:"h-5 w-5 text-orange-500"}),X<=1&&(0,i.jsx)(b.Snowflake,{className:"h-5 w-5 text-blue-500"}),(0,i.jsx)("span",{className:"text-2xl font-bold",children:K.join("-")})]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Last 3 weeks"})]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,i.jsx)(y.Calendar,{className:"h-3 w-3"}),"SOS"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsx)("div",{className:(0,k.cn)("text-2xl font-bold","text-yellow-500"),children:G.toUpperCase()}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[14-P," games left"]})]})]})]}),ee&&(0,i.jsxs)(l.Card,{className:"bg-gradient-to-r from-primary/5 to-background",children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,i.jsx)(_.Swords,{className:"h-4 w-4"}),"Next Opponent - Week ",P+1]})}),(0,i.jsx)(l.CardContent,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-semibold",children:(null==(T=M.get(ee.owner_id))?void 0:T.display_name)||"Opponent"}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Rank #",6," • ","58","% Win Rate"]})]}),(0,i.jsx)(c.Badge,{variant:"secondary",children:"Fair"})]})})]}),Z.length>0&&(0,i.jsxs)(u.Alert,{variant:"destructive",children:[(0,i.jsx)(g.AlertTriangle,{className:"h-4 w-4"}),(0,i.jsxs)(u.AlertDescription,{children:[(0,i.jsx)("div",{className:"font-medium mb-1",children:"Upcoming Bye Weeks:"}),Z.map(e=>{let[t,s]=e;return(0,i.jsxs)("div",{className:"text-sm",children:["Week ",t,": ",s.slice(0,3).join(", "),s.length>3&&" +".concat(s.length-3," more")]},t)})]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsx)(l.CardTitle,{className:"text-sm",children:"Season Progress"})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsx)(h.Progress,{value:P/14*100,className:"h-2"}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,i.jsxs)("span",{children:["Week ",P]}),(0,i.jsxs)("span",{children:[14-P," weeks until playoffs"]})]})]})]})]})}var S=e.i(48425),A=e.i(96626),R=e.i(30030),E=e.i(20783),P=e.i(30207),M=e.i(86318),L=e.i(34620),D=e.i(70152),O=e.i(81140),B="ScrollArea",[I,F]=(0,R.createContextScope)(B),[U,W]=I(B),q=n.forwardRef((e,t)=>{let{__scopeScrollArea:s,type:r="hover",dir:a,scrollHideDelay:l=600,...o}=e,[c,d]=n.useState(null),[h,u]=n.useState(null),[p,m]=n.useState(null),[f,x]=n.useState(null),[g,y]=n.useState(null),[v,j]=n.useState(0),[w,b]=n.useState(0),[N,_]=n.useState(!1),[k,C]=n.useState(!1),T=(0,E.useComposedRefs)(t,e=>d(e)),A=(0,M.useDirection)(a);return(0,i.jsx)(U,{scope:s,type:r,dir:A,scrollHideDelay:l,scrollArea:c,viewport:h,onViewportChange:u,content:p,onContentChange:m,scrollbarX:f,onScrollbarXChange:x,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:j,onCornerHeightChange:b,children:(0,i.jsx)(S.Primitive.div,{dir:A,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});q.displayName=B;var H="ScrollAreaViewport",z=n.forwardRef((e,t)=>{let{__scopeScrollArea:s,children:r,nonce:a,...l}=e,o=W(H,s),c=n.useRef(null),d=(0,E.useComposedRefs)(t,c,o.onViewportChange);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,i.jsx)(S.Primitive.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,i.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});z.displayName=H;var Y="ScrollAreaScrollbar",V=n.forwardRef((e,t)=>{let{forceMount:s,...r}=e,a=W(Y,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:o}=a,c="horizontal"===e.orientation;return n.useEffect(()=>(c?l(!0):o(!0),()=>{c?l(!1):o(!1)}),[c,l,o]),"hover"===a.type?(0,i.jsx)(K,{...r,ref:t,forceMount:s}):"scroll"===a.type?(0,i.jsx)(X,{...r,ref:t,forceMount:s}):"auto"===a.type?(0,i.jsx)(G,{...r,ref:t,forceMount:s}):"always"===a.type?(0,i.jsx)(Q,{...r,ref:t}):null});V.displayName=Y;var K=n.forwardRef((e,t)=>{let{forceMount:s,...r}=e,a=W(Y,e.__scopeScrollArea),[l,o]=n.useState(!1);return n.useEffect(()=>{let e=a.scrollArea,t=0;if(e){let s=()=>{window.clearTimeout(t),o(!0)},r=()=>{t=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[a.scrollArea,a.scrollHideDelay]),(0,i.jsx)(A.Presence,{present:s||l,children:(0,i.jsx)(G,{"data-state":l?"visible":"hidden",...r,ref:t})})}),X=n.forwardRef((e,t)=>{var s;let{forceMount:r,...a}=e,l=W(Y,e.__scopeScrollArea),o="horizontal"===e.orientation,c=em(()=>h("SCROLL_END"),100),[d,h]=(s={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},n.useReducer((e,t)=>{let r=s[e][t];return null!=r?r:e},"hidden"));return n.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>h("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,l.scrollHideDelay,h]),n.useEffect(()=>{let e=l.viewport,t=o?"scrollLeft":"scrollTop";if(e){let s=e[t],r=()=>{let r=e[t];s!==r&&(h("SCROLL"),c()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[l.viewport,o,h,c]),(0,i.jsx)(A.Presence,{present:r||"hidden"!==d,children:(0,i.jsx)(Q,{"data-state":"hidden"===d?"hidden":"visible",...a,ref:t,onPointerEnter:(0,O.composeEventHandlers)(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:(0,O.composeEventHandlers)(e.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),G=n.forwardRef((e,t)=>{let s=W(Y,e.__scopeScrollArea),{forceMount:r,...a}=e,[l,o]=n.useState(!1),c="horizontal"===e.orientation,d=em(()=>{if(s.viewport){let e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;o(c?e:t)}},10);return ef(s.viewport,d),ef(s.content,d),(0,i.jsx)(A.Presence,{present:r||l,children:(0,i.jsx)(Q,{"data-state":l?"visible":"hidden",...a,ref:t})})}),Q=n.forwardRef((e,t)=>{let{orientation:s="vertical",...r}=e,a=W(Y,e.__scopeScrollArea),l=n.useRef(null),o=n.useRef(0),[c,d]=n.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=ec(c.viewport,c.content),u={...r,sizes:c,onSizesChange:d,hasThumb:!!(h>0&&h<1),onThumbChange:e=>l.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function p(e,t){return function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ltr",i=ed(s),n=t||i/2,a=s.scrollbar.paddingStart+n,l=s.scrollbar.size-s.scrollbar.paddingEnd-(i-n),o=s.content-s.viewport;return eu([a,l],"ltr"===r?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===s?(0,i.jsx)(J,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&l.current){let e=eh(a.viewport.scrollLeft,c,a.dir);l.current.style.transform="translate3d(".concat(e,"px, 0, 0)")}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=p(e,a.dir))}}):"vertical"===s?(0,i.jsx)($,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&l.current){let e=eh(a.viewport.scrollTop,c);l.current.style.transform="translate3d(0, ".concat(e,"px, 0)")}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=p(e))}}):null}),J=n.forwardRef((e,t)=>{let{sizes:s,onSizesChange:r,...a}=e,l=W(Y,e.__scopeScrollArea),[o,c]=n.useState(),d=n.useRef(null),h=(0,E.useComposedRefs)(t,d,l.onScrollbarXChange);return n.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,i.jsx)(et,{"data-orientation":"horizontal",...a,ref:h,sizes:s,style:{bottom:0,left:"rtl"===l.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===l.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ed(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,s)=>{if(l.viewport){let r=l.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,s)&&t.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&r({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:eo(o.paddingLeft),paddingEnd:eo(o.paddingRight)}})}})}),$=n.forwardRef((e,t)=>{let{sizes:s,onSizesChange:r,...a}=e,l=W(Y,e.__scopeScrollArea),[o,c]=n.useState(),d=n.useRef(null),h=(0,E.useComposedRefs)(t,d,l.onScrollbarYChange);return n.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,i.jsx)(et,{"data-orientation":"vertical",...a,ref:h,sizes:s,style:{top:0,right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ed(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,s)=>{if(l.viewport){let r=l.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,s)&&t.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&r({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:eo(o.paddingTop),paddingEnd:eo(o.paddingBottom)}})}})}),[Z,ee]=I(Y),et=n.forwardRef((e,t)=>{let{__scopeScrollArea:s,sizes:r,hasThumb:a,onThumbChange:l,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:u,onResize:p,...m}=e,f=W(Y,s),[x,g]=n.useState(null),y=(0,E.useComposedRefs)(t,e=>g(e)),v=n.useRef(null),j=n.useRef(""),w=f.viewport,b=r.content-r.viewport,N=(0,P.useCallbackRef)(u),_=(0,P.useCallbackRef)(d),k=em(p,10);function C(e){v.current&&h({x:e.clientX-v.current.left,y:e.clientY-v.current.top})}return n.useEffect(()=>{let e=e=>{let t=e.target;(null==x?void 0:x.contains(t))&&N(e,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[w,x,b,N]),n.useEffect(_,[r,_]),ef(x,k),ef(f.content,k),(0,i.jsx)(Z,{scope:s,scrollbar:x,hasThumb:a,onThumbChange:(0,P.useCallbackRef)(l),onThumbPointerUp:(0,P.useCallbackRef)(o),onThumbPositionChange:_,onThumbPointerDown:(0,P.useCallbackRef)(c),children:(0,i.jsx)(S.Primitive.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:(0,O.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),v.current=x.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),C(e))}),onPointerMove:(0,O.composeEventHandlers)(e.onPointerMove,C),onPointerUp:(0,O.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=j.current,f.viewport&&(f.viewport.style.scrollBehavior=""),v.current=null})})})}),es="ScrollAreaThumb",er=n.forwardRef((e,t)=>{let{forceMount:s,...r}=e,n=ee(es,e.__scopeScrollArea);return(0,i.jsx)(A.Presence,{present:s||n.hasThumb,children:(0,i.jsx)(ei,{ref:t,...r})})}),ei=n.forwardRef((e,t)=>{let{__scopeScrollArea:s,style:r,...a}=e,l=W(es,s),o=ee(es,s),{onThumbPositionChange:c}=o,d=(0,E.useComposedRefs)(t,e=>o.onThumbChange(e)),h=n.useRef(void 0),u=em(()=>{h.current&&(h.current(),h.current=void 0)},100);return n.useEffect(()=>{let e=l.viewport;if(e){let t=()=>{u(),h.current||(h.current=ep(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[l.viewport,u,c]),(0,i.jsx)(S.Primitive.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:(0,O.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;o.onThumbPointerDown({x:s,y:r})}),onPointerUp:(0,O.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});er.displayName=es;var en="ScrollAreaCorner",ea=n.forwardRef((e,t)=>{let s=W(en,e.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&r?(0,i.jsx)(el,{...e,ref:t}):null});ea.displayName=en;var el=n.forwardRef((e,t)=>{let{__scopeScrollArea:s,...r}=e,a=W(en,s),[l,o]=n.useState(0),[c,d]=n.useState(0),h=!!(l&&c);return ef(a.scrollbarX,()=>{var e;let t=(null==(e=a.scrollbarX)?void 0:e.offsetHeight)||0;a.onCornerHeightChange(t),d(t)}),ef(a.scrollbarY,()=>{var e;let t=(null==(e=a.scrollbarY)?void 0:e.offsetWidth)||0;a.onCornerWidthChange(t),o(t)}),h?(0,i.jsx)(S.Primitive.div,{...r,ref:t,style:{width:l,height:c,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}}):null});function eo(e){return e?parseInt(e,10):0}function ec(e,t){let s=e/t;return isNaN(s)?0:s}function ed(e){let t=ec(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-s)*t,18)}function eh(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr",r=ed(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-i,a=t.content-t.viewport,l=(0,D.clamp)(e,"ltr"===s?[0,a]:[-1*a,0]);return eu([0,a],[0,n-r])(l)}function eu(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}var ep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s={left:e.scrollLeft,top:e.scrollTop},r=0;return!function i(){let n={left:e.scrollLeft,top:e.scrollTop},a=s.left!==n.left,l=s.top!==n.top;(a||l)&&t(),s=n,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function em(e,t){let s=(0,P.useCallbackRef)(e),r=n.useRef(0);return n.useEffect(()=>()=>window.clearTimeout(r.current),[]),n.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function ef(e,t){let s=(0,P.useCallbackRef)(t);(0,L.useLayoutEffect)(()=>{let t=0;if(e){let r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}let ex=n.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,i.jsxs)(q,{ref:t,className:(0,k.cn)("relative overflow-hidden",s),...n,children:[(0,i.jsx)(z,{className:"h-full w-full rounded-[inherit]",children:r}),(0,i.jsx)(eg,{}),(0,i.jsx)(ea,{})]})});ex.displayName=q.displayName;let eg=n.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...n}=e;return(0,i.jsx)(V,{ref:t,orientation:r,className:(0,k.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,i.jsx)(er,{className:"relative flex-1 rounded-full bg-border"})})});eg.displayName=V.displayName;var ey=e.i(79334),ev=e.i(25652),ej=e.i(78917),ew=e.i(3116);let eb=new class{async getFantasyNews(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return[{id:"1",title:"Christian McCaffrey Returns to Practice",description:"CMC was seen at practice today, indicating he could return for Week "+new Date().getDate(),url:"https://example.com",source:"ESPN",publishedAt:new Date(Date.now()-72e5),category:"injury",players:["Christian McCaffrey"],teams:["SF"],impact:"high"},{id:"2",title:"Waiver Wire: Top Pickups for Week "+new Date().getDate(),description:"These players are must-adds from the waiver wire this week",url:"https://example.com",source:"FantasyPros",publishedAt:new Date(Date.now()-144e5),category:"waiver",impact:"medium"},{id:"3",title:"Breaking: Star WR Traded to Contender",description:"Major trade shakes up fantasy landscape as elite receiver finds new home",url:"https://example.com",source:"NFL Network",publishedAt:new Date(Date.now()-36e5),category:"trade",impact:"high"},{id:"4",title:"Week "+new Date().getDate()+" Start/Sit Analysis",description:"Expert recommendations for tough lineup decisions",url:"https://example.com",source:"RotoBaller",publishedAt:new Date(Date.now()-216e5),category:"analysis",impact:"medium"},{id:"5",title:"Injury Report: Key Players Questionable",description:"Several fantasy-relevant players listed as questionable for Sunday",url:"https://example.com",source:"Yahoo Sports",publishedAt:new Date(Date.now()-108e5),category:"injury",impact:"high"}].slice(0,e)}async getUpcomingGames(e){let t=e||Math.floor(Date.now()/6048e5)%18+1;return[{gameId:"1",week:t,homeTeam:"KC",awayTeam:"BUF",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:9,losses:2},awayRecord:{wins:8,losses:3},spread:-3,overUnder:48.5,homeProjectedScore:27,awayProjectedScore:24,difficulty:{home:"tough",away:"very-tough"}},{gameId:"2",week:t,homeTeam:"SF",awayTeam:"DAL",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:7,losses:4},awayRecord:{wins:8,losses:3},spread:-4.5,overUnder:45,homeProjectedScore:24,awayProjectedScore:21,difficulty:{home:"moderate",away:"tough"}},{gameId:"3",week:t,homeTeam:"MIA",awayTeam:"NYJ",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:8,losses:3},awayRecord:{wins:4,losses:7},spread:-7,overUnder:42,homeProjectedScore:28,awayProjectedScore:17,difficulty:{home:"easy",away:"very-tough"}},{gameId:"4",week:t,homeTeam:"GB",awayTeam:"MIN",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:6,losses:5},awayRecord:{wins:7,losses:4},spread:-1.5,overUnder:47,homeProjectedScore:24,awayProjectedScore:23,difficulty:{home:"moderate",away:"moderate"},weather:{temp:35,condition:"Snow",windSpeed:15}},{gameId:"5",week:t,homeTeam:"DET",awayTeam:"CHI",gameTime:new Date(Date.now()+3456e5),homeRecord:{wins:10,losses:1},awayRecord:{wins:3,losses:8},spread:-10.5,overUnder:44,homeProjectedScore:31,awayProjectedScore:17,difficulty:{home:"easy",away:"very-tough"}},{gameId:"6",week:t,homeTeam:"PHI",awayTeam:"WAS",gameTime:new Date(Date.now()+3456e5),homeRecord:{wins:9,losses:2},awayRecord:{wins:4,losses:7},spread:-8.5,overUnder:46,homeProjectedScore:30,awayProjectedScore:20,difficulty:{home:"easy",away:"tough"}}]}calculateMatchupDifficulty(e,t,s,r){let i=e.wins/(e.wins+e.losses),n=t.wins/(t.wins+t.losses);if(void 0!==r){let e=s?-r:r;return e>=7?"easy":e>=3?"moderate":e>=-3?"tough":"very-tough"}let a=(s?i+.05:i)-n;return a>=.3?"easy":a>=.1?"moderate":a>=-.1?"tough":"very-tough"}async getInjuryNews(){return(await this.getFantasyNews(20)).filter(e=>"injury"===e.category)}async getTradeNews(){return(await this.getFantasyNews(20)).filter(e=>"trade"===e.category)}async parseRSSFeed(e){return[]}async aggregateNews(){return this.getFantasyNews()}};var eN=e.i(99749);let e_=new class{async getPlayerNews(e){let t=[];for(let s of e){let e=await this.searchPlayerNews(s);t.push(...e)}return Array.from(new Map(t.map(e=>[e.id,e])).values()).sort((e,t)=>t.publishedAt.getTime()-e.publishedAt.getTime())}async searchPlayerNews(e){let t="player_".concat(e),s=this.cache.get(t);if(s&&Date.now()-s.timestamp<this.CACHE_DURATION)return s.data;try{let[s,r,i]=await Promise.all([this.searchESPNNews(e),this.searchYahooNews(e),this.searchSleeperTrending(e)]),n=[...s,...r,...i];return this.cache.set(t,{data:n,timestamp:Date.now()}),n}catch(t){return console.error("Error fetching player news:",t),this.getFallbackNews(e)}}async searchESPNNews(e){try{let t=await fetch("/api/news/espn?player=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("ESPN API failed");return(await t.json()).articles.map(t=>{var s,r;return{id:"espn_".concat(t.id),title:t.headline,description:t.description||t.headline,url:(null==(r=t.links)||null==(s=r.web)?void 0:s.href)||"#",source:"ESPN",publishedAt:new Date(t.published||Date.now()),category:this.categorizeArticle(t.headline),players:[e],impact:this.assessImpact(t.headline)}})}catch(e){return[]}}async searchYahooNews(e){try{let t=await fetch("/api/news/yahoo?player=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("Yahoo API failed");return(await t.json()).items.map(t=>({id:"yahoo_".concat(t.guid),title:t.title,description:t.summary||t.title,url:t.link,source:"Yahoo Sports",publishedAt:new Date(t.pubDate||Date.now()),category:this.categorizeArticle(t.title),players:[e],impact:this.assessImpact(t.title)}))}catch(e){return[]}}async searchSleeperTrending(e){try{let t=C.default.getState(),s=Array.from(t.players.values()).find(t=>"".concat(t.first_name," ").concat(t.last_name).toLowerCase()===e.toLowerCase());if(!s)return[];let r=await fetch("https://api.sleeper.app/v1/players/nfl/trending/add?lookback_hours=24&limit=100");if(!r.ok)throw Error("Sleeper API failed");let i=(await r.json()).find(e=>e.player_id===s.player_id);if(i)return[{id:"sleeper_trending_".concat(s.player_id,"_").concat(Date.now()),title:"".concat(e," is Trending on Sleeper"),description:"Added by ".concat(i.count," teams in the last 24 hours"),url:"#",source:"Sleeper Trending",publishedAt:new Date,category:"waiver",players:[e],impact:i.count>1e3?"high":i.count>100?"medium":"low"}];return[]}catch(e){return[]}}categorizeArticle(e){let t=e.toLowerCase();return t.includes("injur")||t.includes("hurt")||t.includes("questionable")||t.includes("doubtful")?"injury":t.includes("trade")||t.includes("deal")?"trade":t.includes("waiver")||t.includes("pickup")||t.includes("add")||t.includes("drop")?"waiver":t.includes("start")||t.includes("sit")||t.includes("matchup")||t.includes("projection")?"analysis":"general"}assessImpact(e){let t=e.toLowerCase();return t.includes("breaking")||t.includes("out for season")||t.includes("ir")||t.includes("suspended")||t.includes("traded")||t.includes("released")?"high":t.includes("questionable")||t.includes("limited")||t.includes("game-time")||t.includes("waiver")?"medium":"low"}getFallbackNews(e){return[{id:"fallback_".concat(e,"_").concat(Date.now()),title:"".concat(e," - Latest Updates"),description:"Check the latest stats and projections for ".concat(e),url:"https://www.google.com/search?q=".concat(encodeURIComponent(e+" fantasy football news")),source:"Search Results",publishedAt:new Date,category:"general",players:[e],impact:"low"}]}async getRosterNews(){let{myRoster:e,players:t}=C.default.getState();if(!e||!e.players)return[];let s=[];for(let r of e.players){let e=t.get(r);e&&"DEF"!==e.position&&s.push("".concat(e.first_name," ").concat(e.last_name))}let r=s.slice(0,10);return this.getPlayerNews(r)}async getLeagueWideNews(){try{let e=await fetch("/api/news/general");if(!e.ok)throw Error("General news API failed");return(await e.json()).articles}catch(e){return[{id:"general_1",title:"Week "+Math.ceil((Date.now()-new Date("2024-09-01").getTime())/6048e5)+" Fantasy Football Start/Sit",description:"Expert recommendations for this week's lineup decisions",url:"https://www.fantasypros.com/nfl/start/",source:"FantasyPros",publishedAt:new Date,category:"analysis",impact:"medium"},{id:"general_2",title:"Top Waiver Wire Pickups",description:"Players to target on the waiver wire this week",url:"https://www.espn.com/fantasy/football/",source:"ESPN",publishedAt:new Date(Date.now()-72e5),category:"waiver",impact:"medium"},{id:"general_3",title:"NFL Injury Report",description:"Latest injury updates for fantasy-relevant players",url:"https://www.nfl.com/injuries/",source:"NFL.com",publishedAt:new Date(Date.now()-144e5),category:"injury",impact:"high"}]}}constructor(){(0,eN._)(this,"cache",new Map),(0,eN._)(this,"CACHE_DURATION",3e5)}};function ek(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[a,h]=(0,n.useState)("all"),{myRoster:u}=(0,C.default)();(0,n.useEffect)(()=>{p()},[u]);let p=async()=>{r(!0);try{let[e,s]=await Promise.all([e_.getRosterNews(),e_.getLeagueWideNews()]),r=[...e,...s].map(e=>({...e,publishedAt:e.publishedAt instanceof Date?e.publishedAt:new Date(e.publishedAt)})).sort((e,t)=>t.publishedAt.getTime()-e.publishedAt.getTime()).slice(0,20);t(r)}catch(e){console.error("Error loading news:",e),t(await eb.getFantasyNews(15))}r(!1)},m="all"===a?e:e.filter(e=>e.category===a);return(0,i.jsxs)(l.Card,{className:"h-full",children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(ey.Newspaper,{className:"h-5 w-5 text-primary"}),(0,i.jsx)(l.CardTitle,{children:"Fantasy News"})]}),(0,i.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:p,children:"Refresh"})]}),(0,i.jsx)(l.CardDescription,{children:"Latest updates from top fantasy sources"})]}),(0,i.jsx)(l.CardContent,{children:(0,i.jsxs)(d.Tabs,{defaultValue:"all",className:"w-full",children:[(0,i.jsxs)(d.TabsList,{className:"grid w-full grid-cols-4",children:[(0,i.jsx)(d.TabsTrigger,{value:"all",children:"All"}),(0,i.jsxs)(d.TabsTrigger,{value:"injury",children:[(0,i.jsx)(g.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Injuries"]}),(0,i.jsxs)(d.TabsTrigger,{value:"trade",children:[(0,i.jsx)(ev.TrendingUp,{className:"h-3 w-3 mr-1"}),"Trades"]}),(0,i.jsxs)(d.TabsTrigger,{value:"waiver",children:[(0,i.jsx)(N.Activity,{className:"h-3 w-3 mr-1"}),"Waivers"]})]}),(0,i.jsx)(ex,{className:"h-[400px] mt-4",children:(0,i.jsx)("div",{className:"space-y-3 pr-4",children:s?(0,i.jsx)("div",{className:"text-center py-8",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):m.length>0?m.map(e=>{var t;return(0,i.jsx)("div",{className:(0,k.cn)("p-3 rounded-lg border transition-all hover:bg-muted/50 cursor-pointer","high"===e.impact&&"border-red-500/50"),onClick:()=>window.open(e.url,"_blank"),children:(0,i.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsxs)(c.Badge,{className:(0,k.cn)("text-xs",(e=>{switch(e){case"injury":return"bg-red-500";case"trade":return"bg-purple-500";case"waiver":return"bg-blue-500";case"analysis":return"bg-green-500";default:return"bg-gray-500"}})(e.category)),children:[(e=>{switch(e){case"injury":return(0,i.jsx)(g.AlertTriangle,{className:"h-3 w-3"});case"trade":return(0,i.jsx)(ev.TrendingUp,{className:"h-3 w-3"});case"waiver":return(0,i.jsx)(N.Activity,{className:"h-3 w-3"});default:return(0,i.jsx)(ey.Newspaper,{className:"h-3 w-3"})}})(e.category),(0,i.jsx)("span",{className:"ml-1",children:e.category})]}),(t=e.impact)?(0,i.jsxs)(c.Badge,{variant:{high:"destructive",medium:"secondary",low:"outline"}[t],className:"text-xs",children:[(0,i.jsx)(v.Zap,{className:"h-3 w-3 mr-1"}),t," impact"]}):null,"high"===e.impact&&(0,i.jsx)(w.Flame,{className:"h-3 w-3 text-orange-500"})]}),(0,i.jsx)("h4",{className:"font-medium text-sm mb-1 line-clamp-2",children:e.title}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[(0,i.jsx)("span",{children:e.source}),(0,i.jsx)("span",{children:"•"}),(0,i.jsxs)("span",{className:"flex items-center gap-1",children:[(0,i.jsx)(ew.Clock,{className:"h-3 w-3"}),(e=>{let t=Math.floor((Date.now()-e.getTime())/6e4);if(t<60)return"".concat(t,"m ago");let s=Math.floor(t/60);return s<24?"".concat(s,"h ago"):"".concat(Math.floor(s/24),"d ago")})(e.publishedAt)]}),e.players&&e.players.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{className:"font-medium",children:e.players.join(", ")})]})]})]}),(0,i.jsx)(ej.ExternalLink,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]})},e.id)}):(0,i.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No news available"})})})]})})]})}function eC(e){let{week:t}=e,{currentMatchups:s,rosters:r,myRoster:a,leagueUsers:o,currentWeek:d,currentLeague:h,fetchMatchups:p}=(0,C.default)(),[m,f]=(0,n.useState)([]),[x,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h&&d&&v()},[h,d,t]);let v=async()=>{y(!0);try{let e={};s.forEach(t=>{e[t.matchup_id]||(e[t.matchup_id]=[]),e[t.matchup_id].push(t)}),f(Object.values(e))}catch(e){console.error("Failed to load matchups:",e)}finally{y(!1)}},j=(e,t)=>{var s,r,i,n;let a=(null==e||null==(s=e.settings)?void 0:s.wins)||0,l=(null==e||null==(r=e.settings)?void 0:r.losses)||0,o=(null==t||null==(i=t.settings)?void 0:i.wins)||0,c=a/Math.max(a+l,1)-o/Math.max(o+((null==t||null==(n=t.settings)?void 0:n.losses)||0),1);return c>=.3?"easy":c>=.1?"moderate":c>=-.1?"tough":"very-tough"},w=e=>{switch(e){case"easy":return"text-green-500 bg-green-500/10";case"moderate":return"text-yellow-500 bg-yellow-500/10";case"tough":return"text-orange-500 bg-orange-500/10";case"very-tough":return"text-red-500 bg-red-500/10";default:return"text-gray-500 bg-gray-500/10"}},b=e=>{switch(e){case"easy":return"😊";case"moderate":return"😐";case"tough":return"😰";case"very-tough":return"😱";default:return"🤔"}},N=e=>{switch(e){case"easy":return"Easy Matchup";case"moderate":return"Fair Matchup";case"tough":return"Tough Matchup";case"very-tough":return"Very Tough";default:return"Unknown"}},T=e=>{var t,s,r;let i=(null==e||null==(t=e.settings)?void 0:t.wins)||0,n=(null==e||null==(s=e.settings)?void 0:s.losses)||0,a=(null==e||null==(r=e.settings)?void 0:r.fpts)||0,l=i+n;return 0===l?0:(i/l*100+a/l/10)/2};return(0,i.jsxs)(l.Card,{children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(_.Swords,{className:"h-5 w-5 text-primary"}),(0,i.jsx)(l.CardTitle,{children:"League Matchups"})]}),(0,i.jsxs)(c.Badge,{variant:"outline",children:["Week ",t||d]})]}),(0,i.jsx)(l.CardDescription,{children:"This week's matchups with difficulty analysis"})]}),(0,i.jsx)(l.CardContent,{children:x?(0,i.jsx)("div",{className:"text-center py-8",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):m.length>0?(0,i.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>{var s,n,l,d,h,p,m,f,x,y;if(!e||2!==e.length)return null;let[v,_]=e,C=r.find(e=>e.roster_id===v.roster_id),S=r.find(e=>e.roster_id===_.roster_id),A=(null==C?void 0:C.owner_id)?o.get(C.owner_id):null,R=(null==S?void 0:S.owner_id)?o.get(S.owner_id):null,E=(null==C?void 0:C.roster_id)===(null==a?void 0:a.roster_id)||(null==S?void 0:S.roster_id)===(null==a?void 0:a.roster_id),P=j(C,S),M=j(S,C),L=T(C),D=T(S);return(0,i.jsxs)("div",{className:(0,k.cn)("p-3 rounded-lg border transition-all hover:shadow-md",E?"border-primary/50 bg-primary/5":"bg-background"),children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-semibold",children:(null==A?void 0:A.display_name)||"Team 1"}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(null==C||null==(s=C.settings)?void 0:s.wins)||0,"-",(null==C||null==(n=C.settings)?void 0:n.losses)||0,(null==C?void 0:C.roster_id)===(null==a?void 0:a.roster_id)&&(0,i.jsx)(c.Badge,{variant:"secondary",className:"ml-2 text-xs",children:"YOU"})]})]})}),(0,i.jsxs)("div",{className:(0,k.cn)("px-2 py-1 rounded text-xs font-medium",w(P)),children:[(0,i.jsx)("span",{className:"mr-1",children:b(P)}),N(P)]})]}),(0,i.jsx)("div",{className:"text-center text-xs text-muted-foreground my-1",children:"vs"}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-semibold",children:(null==R?void 0:R.display_name)||"Team 2"}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(null==S||null==(l=S.settings)?void 0:l.wins)||0,"-",(null==S||null==(d=S.settings)?void 0:d.losses)||0,(null==S?void 0:S.roster_id)===(null==a?void 0:a.roster_id)&&(0,i.jsx)(c.Badge,{variant:"secondary",className:"ml-2 text-xs",children:"YOU"})]})]})}),(0,i.jsxs)("div",{className:(0,k.cn)("px-2 py-1 rounded text-xs font-medium",w(M)),children:[(0,i.jsx)("span",{className:"mr-1",children:b(M)}),N(M)]})]})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,i.jsxs)("div",{className:"text-center p-2 bg-secondary/20 rounded",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Power Rating"}),(0,i.jsx)("div",{className:"font-bold",children:L.toFixed(1)})]}),(0,i.jsxs)("div",{className:"text-center p-2 bg-secondary/20 rounded",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Power Rating"}),(0,i.jsx)("div",{className:"font-bold",children:D.toFixed(1)})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Avg Points:"})," ",(((null==C||null==(h=C.settings)?void 0:h.fpts)||0)/Math.max(((null==C||null==(p=C.settings)?void 0:p.wins)||0)+((null==C||null==(m=C.settings)?void 0:m.losses)||0),1)).toFixed(1)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Avg Points:"})," ",(((null==S||null==(f=S.settings)?void 0:f.fpts)||0)/Math.max(((null==S||null==(x=S.settings)?void 0:x.wins)||0)+((null==S||null==(y=S.settings)?void 0:y.losses)||0),1)).toFixed(1)]})]}),E&&(0,i.jsxs)(u.Alert,{className:"mt-2",variant:(null==C?void 0:C.roster_id)===(null==a?void 0:a.roster_id)&&"easy"===P||(null==S?void 0:S.roster_id)===(null==a?void 0:a.roster_id)&&"easy"===M?"default":"destructive",children:[(0,i.jsx)(g.AlertTriangle,{className:"h-3 w-3"}),(0,i.jsx)(u.AlertDescription,{className:"text-xs",children:(null==C?void 0:C.roster_id)===(null==a?void 0:a.roster_id)?(0,i.jsxs)("span",{children:["You have a ",(0,i.jsx)("strong",{children:P})," matchup against ",null==R?void 0:R.display_name]}):(0,i.jsxs)("span",{children:["You have a ",(0,i.jsx)("strong",{children:M})," matchup against ",null==A?void 0:A.display_name]})})]})]},t)})}):(0,i.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No matchup data available"})})]})}var eT=e.i(61911),eS=e.i(64659),eA=e.i(55900);function eR(){var e;let{myRoster:t,rosters:s,leagueUsers:r,players:a,currentMatchups:h,currentWeek:p,seasonMatchups:m,currentLeague:f,getPlayer:x}=(0,C.default)(),[y,_]=(0,n.useState)("RB"),[T,S]=(0,n.useState)(new Set);if(!t||!h)return null;let A=h.find(e=>e.roster_id===t.roster_id),R=h.find(e=>e.matchup_id===(null==A?void 0:A.matchup_id)&&e.roster_id!==(null==A?void 0:A.roster_id)),E=s.find(e=>e.roster_id===(null==R?void 0:R.roster_id)),P=(null==f?void 0:f.scoring_settings)||{},M=(e,t)=>{var s,r;let i=x(e);if(!i)return null;let n=i.position,a=t||p,l=0;if(a===p){let t=h.find(t=>{var s;return null==(s=t.players)?void 0:s.includes(e)});l=(null==t||null==(s=t.players_points)?void 0:s[e])||0}else if(m&&m.size>0){let t=m.get(a);if(t){let s=t.find(t=>{var s;return null==(s=t.players)?void 0:s.includes(e)});l=(null==s||null==(r=s.players_points)?void 0:r[e])||0}}if("QB"===n){let e=l<10;return{pass_yd:Math.max(0,Math.floor(12*l)),pass_td:l>15?Math.floor(l/8):0,pass_int:+!!e,rush_yd:l>25?Math.floor(1.5*l):0,rush_td:+(l>30),pass_cmp:Math.floor(1.2*l),pass_att:Math.floor(1.8*l),pass_2pt:0}}if("RB"===n){let e=l>15?Math.floor(l/10):0;return{rush_yd:Math.max(0,Math.floor((l-6*e)*10)),rush_td:e,rec:l>10?Math.floor(l/5):0,rec_yd:l>10?Math.floor(2*l):0,rec_td:0,rush_att:Math.floor(1.5*l),fum_lost:+(l<5)}}if("WR"===n){let e=l>15?Math.floor(l/12):0,t=Math.max(0,Math.floor((l-6*e)*10));return{rec:Math.floor(l/3),rec_yd:t,rec_td:e,rec_tgt:Math.floor(l/2),rush_yd:0,rec_2pt:0}}if("TE"===n){let e=+(l>12);return{rec:Math.floor(l/2.5),rec_yd:Math.max(0,Math.floor((l-6*e)*10)),rec_td:e,rec_tgt:Math.floor(l/2)}}if(["LB","DL","DB","IDP"].includes(n)){let e=l>15;return{idp_tkl_solo:Math.floor(l/2),idp_tkl_ast:Math.floor(l/4),idp_sack:l>10?Math.floor(l/10):0,idp_int:+!!e,idp_ff:+(l>12),idp_fum_rec:0,idp_def_td:+(l>20),idp_pass_def:Math.floor(l/5),idp_tkl_loss:+(l>8)}}return{}},L=e=>{var t,s,r;let i=x(e);if(!i)return null;let n=(null==A||null==(t=A.players_points)?void 0:t[e])||(null==R||null==(s=R.players_points)?void 0:s[e])||0,a=M(e,p),l=0,o=0,c=[],d=[];if(m&&m.size>0)for(let t=1;t<p;t++){let s=m.get(t);if(s){let i=s.find(t=>{var s;return null==(s=t.players)?void 0:s.includes(e)});if(i){let s=null==(r=i.players_points)?void 0:r[e];if(void 0!==s){l+=s,o++,c.push(s);let r=M(e,t);r&&d.push(r)}}}}let h=o>0?l/o:0,u=c.slice(-3),f=u.length>0?u.reduce((e,t)=>e+t,0)/u.length:0,g={};if(d.length>0){let e=new Set;d.forEach(t=>Object.keys(t).forEach(t=>e.add(t))),e.forEach(e=>{let t=d.map(t=>t[e]||0);g[e]=t.reduce((e,t)=>e+t,0)/t.length})}let y="steady";f>=15&&f>1.3*h?y="hot":h>=10&&f<.6*h&&(y="cold");let v=Math.sqrt(c.length>0?c.reduce((e,t)=>e+Math.pow(t-h,2),0)/c.length:0);return{player:i,currentPoints:n,currentStats:a,seasonAvg:h,seasonStatAvgs:g,last3Avg:f,trend:y,consistency:v,gamesPlayed:o,projection:f>0?f:h,weeklyStats:d}},D=(e,t)=>e?e.players.map(e=>L(e)).filter(e=>!!e&&("FLEX"===t?["RB","WR","TE"].includes(e.player.position):"IDP"===t?["LB","DL","DB","IDP"].includes(e.player.position):"ROOKIES"===t?0===e.player.years_exp||1===e.player.years_exp:e.player.position===t)).sort((e,t)=>t.currentPoints-e.currentPoints):[],O=D(t,y),B=D(E,y),I=(e=>{let i=new Map;return s.forEach(s=>{let n=r.get(s.owner_id),a=s.roster_id===t.roster_id,l=s.roster_id===(null==E?void 0:E.roster_id);s.players.forEach(t=>{let r=L(t);if(r)("FLEX"===e?["RB","WR","TE"].includes(r.player.position):"IDP"===e?["LB","DL","DB","IDP"].includes(r.player.position):"ROOKIES"===e?0===r.player.years_exp||1===r.player.years_exp:r.player.position===e)&&i.set(t,{...r,owner:(null==n?void 0:n.display_name)||"Unknown",ownerId:s.owner_id,rosterId:s.roster_id,isMyPlayer:a,isOpponent:l})})}),Array.from(i.values()).sort((e,t)=>t.currentPoints-e.currentPoints)})(y),F=O.reduce((e,t)=>e+t.seasonAvg,0),U=B.reduce((e,t)=>e+t.seasonAvg,0),W=F-U,q=(e,t)=>{if(!t)return[];let s=e.position;return"QB"===s?[{label:"Pass",value:"".concat(t.pass_cmp||0,"/").concat(t.pass_att||0),key:"passing"},{label:"Yards",value:"".concat(t.pass_yd||0),key:"pass_yd"},{label:"TD",value:"".concat(t.pass_td||0),key:"pass_td",highlight:t.pass_td>0},{label:"INT",value:"".concat(t.pass_int||0),key:"pass_int",negative:t.pass_int>0},{label:"Rush",value:"".concat(t.rush_yd||0),key:"rush_yd"}]:"RB"===s?[{label:"Carries",value:"".concat(t.rush_att||0),key:"rush_att"},{label:"Rush Yds",value:"".concat(t.rush_yd||0),key:"rush_yd"},{label:"Rec",value:"".concat(t.rec||0),key:"rec"},{label:"Rec Yds",value:"".concat(t.rec_yd||0),key:"rec_yd"},{label:"TD",value:"".concat((t.rush_td||0)+(t.rec_td||0)),key:"td",highlight:(t.rush_td||0)+(t.rec_td||0)>0}]:"WR"===s||"TE"===s?[{label:"Targets",value:"".concat(t.rec_tgt||0),key:"rec_tgt"},{label:"Rec",value:"".concat(t.rec||0),key:"rec"},{label:"Yards",value:"".concat(t.rec_yd||0),key:"rec_yd"},{label:"TD",value:"".concat(t.rec_td||0),key:"rec_td",highlight:t.rec_td>0},{label:"Avg",value:t.rec>0?"".concat((t.rec_yd/t.rec).toFixed(1)):"0",key:"avg"}]:["LB","DL","DB","IDP"].includes(s)?[{label:"Tackles",value:"".concat((t.idp_tkl_solo||0)+(t.idp_tkl_ast||0)),key:"tackles"},{label:"Sacks",value:"".concat(t.idp_sack||0),key:"idp_sack",highlight:t.idp_sack>0},{label:"INT",value:"".concat(t.idp_int||0),key:"idp_int",highlight:t.idp_int>0},{label:"FF",value:"".concat(t.idp_ff||0),key:"idp_ff",highlight:t.idp_ff>0},{label:"PD",value:"".concat(t.idp_pass_def||0),key:"idp_pass_def"}]:[]},H=e=>{let t,{metrics:s,showOwner:r=!1}=e,{player:n,currentPoints:a,currentStats:l,seasonAvg:d,seasonStatAvgs:h,last3Avg:u,trend:m,consistency:f,projection:x}=s,g=T.has(n.player_id),y=q(n,l);return(0,i.jsxs)("div",{className:(0,k.cn)("rounded-lg border transition-all",s.isMyPlayer&&"bg-primary/5 border-primary/20",s.isOpponent&&"bg-orange-500/5 border-orange-500/20",!s.isMyPlayer&&!s.isOpponent&&"bg-background"),children:[(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("div",{className:"flex items-center gap-2 flex-1",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[n.first_name," ",n.last_name,(0===n.years_exp||1===n.years_exp)&&(0,i.jsx)(c.Badge,{variant:"secondary",className:"text-xs h-4",children:"R"}),"hot"===m&&(0,i.jsx)(w.Flame,{className:"h-3 w-3 text-orange-500"}),"cold"===m&&(0,i.jsx)(b.Snowflake,{className:"h-3 w-3 text-blue-500"})]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[(0,i.jsxs)("span",{children:[n.position," • ",n.team||"FA"]}),n.injury_status&&(0,i.jsx)(c.Badge,{variant:"destructive",className:"text-xs h-4",children:n.injury_status}),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{className:(0,k.cn)("font-medium",s.isMyPlayer&&"text-primary",s.isOpponent&&"text-orange-500"),children:s.owner})]})]})]})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:(0,k.cn)("text-lg font-bold",a>=20&&"text-green-500",a>=15&&a<20&&"text-blue-500",a<5&&a>0&&"text-red-500"),children:a.toFixed(1)}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Week ",p]})]}),(0,i.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>(e=>{let t=new Set(T);t.has(e)?t.delete(e):t.add(e),S(t)})(n.player_id),children:g?(0,i.jsx)(eA.ChevronUp,{className:"h-4 w-4"}):(0,i.jsx)(eS.ChevronDown,{className:"h-4 w-4"})})]})]}),y.length>0&&(0,i.jsx)("div",{className:"grid grid-cols-5 gap-1 text-xs mb-2",children:y.map(e=>(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:e.label}),(0,i.jsx)("div",{className:(0,k.cn)("font-medium",e.highlight&&"text-green-500",e.negative&&"text-red-500"),children:e.value})]},e.key))}),(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Avg"}),(0,i.jsx)("div",{className:"font-medium",children:d.toFixed(1)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"L3"}),(0,i.jsx)("div",{className:(0,k.cn)("font-medium",u>1.1*d&&"text-green-500",u<.9*d&&"text-orange-500"),children:u.toFixed(1)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Proj"}),(0,i.jsx)("div",{className:"font-medium",children:x.toFixed(1)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Var"}),(0,i.jsx)("div",{className:(0,k.cn)("font-medium",f<5&&"text-green-500",f>10&&"text-red-500"),children:f.toFixed(1)})]})]})]}),g&&h&&(0,i.jsxs)("div",{className:"border-t p-3 bg-muted/30",children:[(0,i.jsxs)("div",{className:"text-xs font-medium mb-2 flex items-center gap-1",children:[(0,i.jsx)(N.Activity,{className:"h-3 w-3"}),"Season Averages"]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:q(n,h).map(e=>(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-muted-foreground",children:[e.label,":"]}),(0,i.jsx)("span",{className:(0,k.cn)("font-medium",e.highlight&&"text-green-500",e.negative&&"text-red-500"),children:e.value})]},e.key))}),(0,i.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,i.jsx)("div",{className:"text-xs font-medium mb-1",children:"Points Breakdown"}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Based on league scoring: ",(t=0,Object.entries(l).forEach(e=>{let[s,r]=e,i=P[s];i&&r&&(t+=r*i)}),t).toFixed(1)," pts"]})]})]})]})};return(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(eT.Users,{className:"h-5 w-5"}),"Positional Matchups"]}),(0,i.jsx)(l.CardDescription,{children:"Compare your players vs opponent and league by position"})]}),E&&(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"text-sm font-medium",children:["vs ",null==(e=r.get(E.owner_id))?void 0:e.display_name]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Week ",p," Opponent"]})]})]})}),(0,i.jsx)(l.CardContent,{className:"space-y-4",children:(0,i.jsxs)(d.Tabs,{value:y,onValueChange:e=>_(e),children:[(0,i.jsxs)(d.TabsList,{className:"grid grid-cols-7 w-full",children:[(0,i.jsx)(d.TabsTrigger,{value:"QB",children:"QB"}),(0,i.jsx)(d.TabsTrigger,{value:"RB",children:"RB"}),(0,i.jsx)(d.TabsTrigger,{value:"WR",children:"WR"}),(0,i.jsx)(d.TabsTrigger,{value:"TE",children:"TE"}),(0,i.jsx)(d.TabsTrigger,{value:"FLEX",children:"FLEX"}),(0,i.jsx)(d.TabsTrigger,{value:"IDP",children:"IDP"}),(0,i.jsx)(d.TabsTrigger,{value:"ROOKIES",children:"Rookies"})]}),(0,i.jsxs)(d.TabsContent,{value:y,className:"space-y-4",children:["ROOKIES"!==y?(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)(l.Card,{className:"bg-primary/5 border-primary/20",children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm",children:["Your ",y,"s"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsx)("div",{className:"text-2xl font-bold",children:F.toFixed(1)}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total avg points/week"})]})]}),(0,i.jsxs)(l.Card,{className:"bg-orange-500/5 border-orange-500/20",children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-sm",children:["Opponent ",y,"s"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsx)("div",{className:"text-2xl font-bold",children:U.toFixed(1)}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total avg points/week"})]})]})]}):(0,i.jsx)(l.Card,{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20",children:(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,i.jsx)(Star,{className:"h-4 w-4 text-purple-500"}),"Rookie Comparison - Week ",p]}),(0,i.jsx)(l.CardDescription,{children:"First and second year players across your league"})]})}),Math.abs(W)>5&&(0,i.jsxs)(u.Alert,{variant:W>0?"default":"destructive",children:[(0,i.jsx)(g.AlertTriangle,{className:"h-4 w-4"}),(0,i.jsxs)(u.AlertDescription,{children:["You have a ",W>0?"significant advantage":"significant disadvantage","at ",y," (",W>0?"+":"",W.toFixed(1)," points/week)"]})]}),"ROOKIES"!==y&&(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[(0,i.jsx)(j.Shield,{className:"h-4 w-4 text-primary"}),"Your ",y,"s"]}),(0,i.jsx)("div",{className:"space-y-2",children:O.length>0?O.map(e=>(0,i.jsx)(H,{metrics:e},e.player.player_id)):(0,i.jsxs)("div",{className:"text-sm text-muted-foreground p-3 border rounded-lg",children:["No ",y,"s on roster"]})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[(0,i.jsx)(v.Zap,{className:"h-4 w-4 text-orange-500"}),"Opponent ",y,"s"]}),(0,i.jsx)("div",{className:"space-y-2",children:B.length>0?B.map(e=>(0,i.jsx)(H,{metrics:e},e.player.player_id)):(0,i.jsxs)("div",{className:"text-sm text-muted-foreground p-3 border rounded-lg",children:["No ",y,"s on roster"]})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"font-medium mb-2",children:["All League ",y,"s"]}),(0,i.jsx)("div",{className:"space-y-2",children:I.slice(0,20).map(e=>(0,i.jsx)(H,{metrics:e,showOwner:!0},e.player.player_id))})]})]})]})})]})}var eE=e.i(75254);let eP=(0,eE.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var eM=e.i(16715),eL=e.i(95468),eD=e.i(73884);let eO=new class{async calculatePlayoffProbabilities(e,t){let s=[];for(let r=0;r<this.SIMULATIONS;r++)s.push(this.simulateRestOfSeason(e,t));return{probabilities:this.calculateProbabilitiesFromSimulations(e,s,t.playoffTeams),totalSimulations:this.SIMULATIONS,avgPlayoffSpots:t.playoffTeams}}simulateRestOfSeason(e,t){let s=e.map(e=>({...e})),r=t.regularSeasonWeeks-t.currentWeek;for(let e=0;e<r;e++)this.createMatchupsForWeek(s,e).forEach(e=>{let{team1:t,team2:s}=e,r=this.simulateGame(t,s);r===t.teamId?(t.wins++,s.losses++):r===s.teamId?(s.wins++,t.losses++):(t.ties++,s.ties++);let i=this.generateGameScore(t),n=this.generateGameScore(s);t.pointsFor+=i,t.pointsAgainst+=n,s.pointsFor+=n,s.pointsAgainst+=i});return s}createMatchupsForWeek(e,t){let s=[],r=new Set;return e.forEach(i=>{if(r.has(i.teamId))return;let n=i.remainingSchedule[t],a=e.find(e=>e.teamId===n);a&&!r.has(a.teamId)&&(s.push({team1:i,team2:a}),r.add(i.teamId),r.add(a.teamId))}),s}simulateGame(e,t){let s=e.wins+e.losses+e.ties,r=t.wins+t.losses+t.ties,i=s>0?e.pointsFor/s:100,n=r>0?t.pointsFor/r:100,a=this.normalRandom(i,.2*i),l=this.normalRandom(n,.2*n);return 1>Math.abs(a-l)?null:a>l?e.teamId:t.teamId}generateGameScore(e){let t=e.wins+e.losses+e.ties,s=t>0?e.pointsFor/t:100;return Math.max(50,this.normalRandom(s,.15*s))}normalRandom(e,t){let s=0,r=0;for(;0===s;)s=Math.random();for(;0===r;)r=Math.random();return Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*r)*t+e}calculateProbabilitiesFromSimulations(e,t,s){let r=new Map;return e.forEach(e=>{r.set(e.teamId,{playoffAppearances:0,championships:0,totalWins:0,totalLosses:0})}),t.forEach(e=>{[...e].sort((e,t)=>{let s=e.wins/Math.max(e.wins+e.losses+e.ties,1),r=t.wins/Math.max(t.wins+t.losses+t.ties,1);return s!==r?r-s:t.pointsFor-e.pointsFor}).slice(0,s).forEach((e,t)=>{let i=r.get(e.teamId);i.playoffAppearances++,0===t?i.championships+=.3:t<s/2?i.championships+=.2:i.championships+=.1}),e.forEach(e=>{let t=r.get(e.teamId);t.totalWins+=e.wins,t.totalLosses+=e.losses})}),e.map(t=>{let i=r.get(t.teamId);return t.wins,t.losses,t.ties,{teamId:t.teamId,teamName:"Team ".concat(t.teamId),currentRecord:"".concat(t.wins,"-").concat(t.losses).concat(t.ties>0?"-".concat(t.ties):""),playoffProbability:i.playoffAppearances/this.SIMULATIONS*100,championshipProbability:i.championships/this.SIMULATIONS*100,projectedWins:i.totalWins/this.SIMULATIONS,projectedLosses:i.totalLosses/this.SIMULATIONS,strengthOfSchedule:this.calculateStrengthOfSchedule(t,e),clinchScenarios:this.getCliinchScenarios(t,e,s),eliminationScenarios:this.getEliminationScenarios(t,e,s)}})}calculateStrengthOfSchedule(e,t){if(0===e.remainingSchedule.length)return .5;let s=0,r=0;return e.remainingSchedule.forEach(e=>{let i=t.find(t=>t.teamId===e);if(i){let e=i.wins+i.losses+i.ties;e>0&&(s+=i.wins/e,r++)}}),r>0?s/r:.5}getCliinchScenarios(e,t,s){let r=[],i=e.remainingSchedule.length;if(0===i)return r;e.wins;let n=e.wins+e.losses+e.ties,a=n>0?e.wins/n:0;return a>.7?r.push("Win ".concat(Math.ceil(.6*i)," of next ").concat(i," games")):a>.5?r.push("Win ".concat(Math.ceil(.8*i)," of next ").concat(i," games")):r.push("Win all remaining ".concat(i," games")),r}getEliminationScenarios(e,t,s){let r=[],i=e.remainingSchedule.length;if(0===i)return r;let n=e.wins+e.losses+e.ties,a=n>0?e.wins/n:0;return a<.3?r.push("Lose ".concat(Math.ceil(.4*i)," of next ").concat(i," games")):a<.5&&r.push("Lose ".concat(Math.ceil(.6*i)," of next ").concat(i," games")),r}constructor(){(0,eN._)(this,"SIMULATIONS",1e4)}};function eB(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(null),[a,p]=(0,n.useState)(null),{currentLeague:m,rosters:f,leagueUsers:y,myRoster:v,currentWeek:j}=(0,C.default)(),w=async()=>{if(!m||0===f.length)return void p("League data not available");t(!0),p(null);try{var e,s;let t=f.map(e=>{var t,s,r,i,n;return{teamId:e.roster_id,wins:(null==(t=e.settings)?void 0:t.wins)||0,losses:(null==(s=e.settings)?void 0:s.losses)||0,ties:(null==(r=e.settings)?void 0:r.ties)||0,pointsFor:(null==(i=e.settings)?void 0:i.fpts)||0,pointsAgainst:(null==(n=e.settings)?void 0:n.fpts_against)||0,remainingSchedule:b(e.roster_id,f.length,j)}}),i={playoffTeams:(null==(e=m.settings)?void 0:e.playoff_teams)||6,regularSeasonWeeks:(null==(s=m.settings)?void 0:s.playoff_week_start)?m.settings.playoff_week_start-1:14,currentWeek:j},n=await eO.calculatePlayoffProbabilities(t,i),a={...n,probabilities:n.probabilities.map(e=>({...e,teamName:(e=>{let t=f.find(t=>t.roster_id===e);if(!t)return"Team ".concat(e);let s=t.owner_id?y.get(t.owner_id):void 0;return(null==s?void 0:s.team_name)||(null==s?void 0:s.display_name)||"Team ".concat(e)})(e.teamId)}))};r(a)}catch(e){p(e.message||"Failed to calculate playoff probabilities")}finally{t(!1)}},b=(e,t,s)=>{var r;let i=[],n=((null==m||null==(r=m.settings)?void 0:r.playoff_week_start)||15)-s,a=f.map(e=>e.roster_id).filter(t=>t!==e);for(let e=0;e<n;e++){let t=e%a.length;i.push(a[t])}return i};return m?(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(eP,{className:"h-5 w-5"}),"Playoff Calculator"]}),(0,i.jsx)(l.CardDescription,{children:"Monte Carlo simulation of remaining season scenarios"})]}),(0,i.jsx)(o.Button,{onClick:w,disabled:e,variant:"outline",children:e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eM.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Calculating..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Target,{className:"h-4 w-4 mr-2"}),"Calculate"]})})]})}),(0,i.jsxs)(l.CardContent,{children:[a&&(0,i.jsxs)(u.Alert,{variant:"destructive",className:"mb-4",children:[(0,i.jsx)(g.AlertTriangle,{className:"h-4 w-4"}),(0,i.jsx)(u.AlertDescription,{children:a})]}),!s&&!e&&(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)(eP,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:'Click "Calculate" to simulate playoff scenarios'}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Uses 10,000 Monte Carlo simulations"})]}),e&&(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)(eM.RefreshCw,{className:"h-8 w-8 mx-auto animate-spin text-primary mb-4"}),(0,i.jsxs)("p",{className:"text-muted-foreground",children:["Running ",eO.SIMULATIONS||1e4," simulations..."]})]}),s&&(0,i.jsxs)(d.Tabs,{defaultValue:"probabilities",className:"space-y-4",children:[(0,i.jsxs)(d.TabsList,{className:"grid w-full grid-cols-2",children:[(0,i.jsx)(d.TabsTrigger,{value:"probabilities",children:"Playoff Odds"}),(0,i.jsx)(d.TabsTrigger,{value:"scenarios",children:"Scenarios"})]}),(0,i.jsx)(d.TabsContent,{value:"probabilities",className:"space-y-4",children:(0,i.jsx)("div",{className:"grid gap-3",children:s.probabilities.sort((e,t)=>t.playoffProbability-e.playoffProbability).map(e=>{var t,s;let r=(t=e.playoffProbability)>=90?{variant:"default",text:"Lock"}:t>=70?{variant:"secondary",text:"Likely"}:t>=30?{variant:"outline",text:"Possible"}:{variant:"destructive",text:"Unlikely"},n=e.teamId===(null==v?void 0:v.roster_id);return(0,i.jsxs)("div",{className:(0,k.cn)("p-4 rounded-lg border transition-all",n&&"bg-primary/5 border-primary/20"),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"font-medium",children:e.teamName}),n&&(0,i.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:"You"})]}),(0,i.jsx)(c.Badge,{variant:r.variant,children:r.text})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{children:"Playoff Probability"}),(0,i.jsxs)("span",{className:(0,k.cn)("font-bold",(s=e.playoffProbability)>=80?"text-green-600":s>=60?"text-yellow-600":s>=40?"text-orange-600":"text-red-600"),children:[e.playoffProbability.toFixed(1),"%"]})]}),(0,i.jsx)(h.Progress,{value:e.playoffProbability,className:"h-2"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-3 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Current"}),(0,i.jsx)("div",{className:"font-medium",children:e.currentRecord})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Projected"}),(0,i.jsxs)("div",{className:"font-medium",children:[e.projectedWins.toFixed(1),"-",e.projectedLosses.toFixed(1)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Championship"}),(0,i.jsxs)("div",{className:"font-medium",children:[e.championshipProbability.toFixed(1),"%"]})]})]})]},e.teamId)})})}),(0,i.jsxs)(d.TabsContent,{value:"scenarios",className:"space-y-4",children:[s.probabilities.filter(e=>e.teamId===(null==v?void 0:v.roster_id)).map(e=>(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,i.jsxs)("h4",{className:"font-medium text-green-800 mb-2 flex items-center gap-2",children:[(0,i.jsx)(eL.CheckCircle2,{className:"h-4 w-4"}),"Clinch Scenarios"]}),e.clinchScenarios.length>0?(0,i.jsx)("ul",{className:"space-y-1 text-sm text-green-700",children:e.clinchScenarios.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{children:e})]},t))}):(0,i.jsx)("p",{className:"text-sm text-green-700",children:"No guaranteed clinch scenarios available"})]}),e.eliminationScenarios.length>0&&(0,i.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,i.jsxs)("h4",{className:"font-medium text-red-800 mb-2 flex items-center gap-2",children:[(0,i.jsx)(eD.XCircle,{className:"h-4 w-4"}),"Elimination Scenarios"]}),(0,i.jsx)("ul",{className:"space-y-1 text-sm text-red-700",children:e.eliminationScenarios.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{children:e})]},t))})]})]},e.teamId)),(0,i.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:[(0,i.jsxs)("p",{children:["Simulations based on ",s.totalSimulations.toLocaleString()," scenarios"]}),(0,i.jsx)("p",{children:"Calculations include strength of schedule and historical performance"})]})]})]})]})]}):(0,i.jsx)(l.Card,{children:(0,i.jsx)(l.CardContent,{className:"py-8",children:(0,i.jsx)("div",{className:"text-center text-muted-foreground",children:"Please select a league to view playoff probabilities"})})})}let eI=(0,eE.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),eF=(0,eE.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var eU=e.i(35408),eW=e.i(45423);let eq=(0,eE.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),eH=(0,eE.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var ez=e.i(47167);let eY=Object.create(null);eY.open="0",eY.close="1",eY.ping="2",eY.pong="3",eY.message="4",eY.upgrade="5",eY.noop="6";let eV=Object.create(null);Object.keys(eY).forEach(e=>{eV[eY[e]]=e});let eK={type:"error",data:"parser error"},eX="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),eG="function"==typeof ArrayBuffer,eQ=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,eJ=(e,t,s)=>{let{type:r,data:i}=e;if(eX&&i instanceof Blob)if(t)return s(i);else return e$(i,s);if(eG&&(i instanceof ArrayBuffer||eQ(i)))if(t)return s(i);else return e$(new Blob([i]),s);return s(eY[r]+(i||""))},e$=(e,t)=>{let s=new FileReader;return s.onload=function(){t("b"+(s.result.split(",")[1]||""))},s.readAsDataURL(e)};function eZ(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let e0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e1="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<e0.length;e++)e1[e0.charCodeAt(e)]=e;let e2="function"==typeof ArrayBuffer,e5=(e,t)=>{if("string"!=typeof e)return{type:"message",data:e3(e,t)};let s=e.charAt(0);return"b"===s?{type:"message",data:e4(e.substring(1),t)}:eV[s]?e.length>1?{type:eV[s],data:e.substring(1)}:{type:eV[s]}:eK},e4=(e,t)=>e2?e3((e=>{let t=.75*e.length,s=e.length,r,i=0,n,a,l,o;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let c=new ArrayBuffer(t),d=new Uint8Array(c);for(r=0;r<s;r+=4)n=e1[e.charCodeAt(r)],a=e1[e.charCodeAt(r+1)],l=e1[e.charCodeAt(r+2)],o=e1[e.charCodeAt(r+3)],d[i++]=n<<2|a>>4,d[i++]=(15&a)<<4|l>>2,d[i++]=(3&l)<<6|63&o;return c})(e),t):{base64:!0,data:e},e3=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer;function e6(e){return e.reduce((e,t)=>e+t.length,0)}function e8(e,t){if(e[0].length===t)return e.shift();let s=new Uint8Array(t),r=0;for(let i=0;i<t;i++)s[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),s}function e7(e){if(e){var t=e;for(var s in e7.prototype)t[s]=e7.prototype[s];return t}}e7.prototype.on=e7.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},e7.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},e7.prototype.off=e7.prototype.removeListener=e7.prototype.removeAllListeners=e7.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((s=r[i])===t||s.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},e7.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),s=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(s){s=s.slice(0);for(var r=0,i=s.length;r<i;++r)s[r].apply(this,t)}return this},e7.prototype.emitReserved=e7.prototype.emit,e7.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},e7.prototype.hasListeners=function(e){return!!this.listeners(e).length};let e9="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),te="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function tt(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return s.reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{})}let ts=te.setTimeout,tr=te.clearTimeout;function ti(e,t){t.useNativeTimers?(e.setTimeoutFn=ts.bind(te),e.clearTimeoutFn=tr.bind(te)):(e.setTimeoutFn=te.setTimeout.bind(te),e.clearTimeoutFn=te.clearTimeout.bind(te))}function tn(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class ta extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class tl extends e7{onError(e,t,s){return super.emitReserved("error",new ta(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=e5(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}(e);return t.length?"?"+t:""}constructor(e){super(),this.writable=!1,ti(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}}class to extends tl{get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let t=e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};((e,t)=>{let s=e.split("\x1e"),r=[];for(let e=0;e<s.length;e++){let i=e5(s[e],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach(t),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{let s=e.length,r=Array(s),i=0;e.forEach((e,n)=>{eJ(e,!1,e=>{r[n]=e,++i===s&&t(r.join("\x1e"))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=tn()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}constructor(){super(...arguments),this._polling=!1}}let tc=!1;try{tc="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let td=tc;function th(){}class tu extends to{doWrite(e,t){let s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port}}}class tp extends e7{_create(){var e;let t=tt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&s.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{s.setRequestHeader("Accept","*/*")}catch(e){}null==(e=this._opts.cookieJar)||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var e;3===s.readyState&&(null==(e=this._opts.cookieJar)||e.parseCookies(s.getResponseHeader("set-cookie"))),4===s.readyState&&(200===s.status||1223===s.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof s.status?s.status:0)},0))},s.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=tp.requestsCount++,tp.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=th,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete tp.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}constructor(e,t,s){super(),this.createRequest=e,ti(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=void 0!==s.data?s.data:null,this._create()}}function tm(){for(let e in tp.requests)tp.requests.hasOwnProperty(e)&&tp.requests[e].abort()}tp.requestsCount=0,tp.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",tm):"function"==typeof addEventListener&&addEventListener("onpagehide"in te?"pagehide":"unload",tm,!1));let tf=function(){let e=tx({xdomain:!1});return e&&null!==e.responseType}();function tx(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||td))return new XMLHttpRequest}catch(e){}if(!t)try{return new te[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}let tg="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class ty extends tl{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,s=tg?{}:tt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let s=e[t],r=t===e.length-1;eJ(s,this.supportsBinary,e=>{try{this.doWrite(s,e)}catch(e){}r&&e9(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=tn()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}let tv=te.WebSocket||te.MozWebSocket,tj={websocket:class extends ty{createSocket(e,t,s){return tg?new tv(e,t,s):t?new tv(e,t):new tv(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends tl{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let r=function(e,t){s||(s=new TextDecoder);let r=[],i=0,n=-1,a=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(0===i){if(1>e6(r))break;let e=e8(r,1);a=(128&e[0])==128,i=(n=127&e[0])<126?3:126===n?1:2}else if(1===i){if(2>e6(r))break;let e=e8(r,2);n=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(8>e6(r))break;let e=e8(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>2097151){o.enqueue(eK);break}n=0x100000000*s+t.getUint32(4),i=3}else{if(e6(r)<n)break;let e=e8(r,n);o.enqueue(e5(a?e:s.decode(e),t)),i=0}if(0===n||n>e){o.enqueue(eK);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(r).getReader(),n=new TransformStream({transform(e,s){var r;r=t=>{let r,i=t.length;if(i<126)new DataView((r=new Uint8Array(1)).buffer).setUint8(0,i);else if(i<65536){let e=new DataView((r=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,i)}else{let e=new DataView((r=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(r[0]|=128),s.enqueue(r),s.enqueue(t)},eX&&e.data instanceof Blob?e.data.arrayBuffer().then(eZ).then(r):eG&&(e.data instanceof ArrayBuffer||eQ(e.data))?r(eZ(e.data)):eJ(e,!1,e=>{t||(t=new TextEncoder),r(t.encode(e))})}});n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();let a=()=>{i.read().then(e=>{let{done:t,value:s}=e;t||(this.onPacket(s),a())}).catch(e=>{})};a();let l={type:"open"};this.query.sid&&(l.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&e9(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null==(e=this._transport)||e.close()}},polling:class extends tu{request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new tp(tx,this.uri(),e)}constructor(e){super(e);let t=e&&e.forceBase64;this.supportsBinary=tf&&!t}}},tw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tb=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tN(e){if(e.length>8e3)throw"URI too long";let t=e,s=e.indexOf("["),r=e.indexOf("]");-1!=s&&-1!=r&&(e=e.substring(0,s)+e.substring(s,r).replace(/:/g,";")+e.substring(r,e.length));let i=tw.exec(e||""),n={},a=14;for(;a--;)n[tb[a]]=i[a]||"";return -1!=s&&-1!=r&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(e,t){let s=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&s.splice(0,1),"/"==t.slice(-1)&&s.splice(s.length-1,1),s}(0,n.path),n.queryKey=function(e,t){let s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(s[t]=r)}),s}(0,n.query),n}let t_="function"==typeof addEventListener&&"function"==typeof removeEventListener,tk=[];t_&&addEventListener("offline",()=>{tk.forEach(e=>e())},!1);class tC extends e7{createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);let e=this.opts.rememberUpgrade&&tC.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",tC.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let s=this.writeBuffer[t].data;if(s&&(e+="string"==typeof s?function(e){let t=0,s=0;for(let r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(r++,s+=4);return s}(s):Math.ceil(1.33*(s.byteLength||s.size))),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,e9(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof s&&(r=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;let i={type:e,data:t,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(tC.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),t_&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=tk.indexOf(this._offlineEventListener);-1!==e&&tk.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let s=tN(e);t.hostname=s.host,t.secure="https"===s.protocol||"wss"===s.protocol,t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=tN(t.host).host);ti(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},s=e.split("&");for(let e=0,r=s.length;e<r;e++){let r=s[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),t_&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tk.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}}tC.protocol=4;class tT extends tC{onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;tC.priorWebsocketSuccess=!1;let r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;tC.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{s||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{let e=Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function i(){s||(s=!0,c(),t.close(),t=null)}let n=e=>{let s=Error("probe error: "+e);s.transport=t.name,i(),this.emitReserved("upgradeError",s)};function a(){n("transport closed")}function l(){n("socket closed")}function o(e){t&&e.name!==t.name&&i()}let c=()=>{t.removeListener("open",r),t.removeListener("error",n),t.removeListener("close",a),this.off("close",l),this.off("upgrading",o)};t.once("open",r),t.once("error",n),t.once("close",a),this.once("close",l),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}constructor(){super(...arguments),this._upgrades=[]}}class tS extends tT{constructor(e,t={}){let s="object"==typeof e?e:t;(!s.transports||s.transports&&"string"==typeof s.transports[0])&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(e=>tj[e]).filter(e=>!!e)),super(e,s)}}tS.protocol,e.s(["Decoder",()=>tI,"Encoder",()=>tO,"PacketType",()=>r,"protocol",()=>tD],51890);let tA="function"==typeof ArrayBuffer,tR=Object.prototype.toString,tE="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===tR.call(Blob),tP="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===tR.call(File);function tM(e){return tA&&(e instanceof ArrayBuffer||("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer))||tE&&e instanceof Blob||tP&&e instanceof File}let tL=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tD=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(r||(r={}));class tO{encode(e){return(e.type===r.EVENT||e.type===r.ACK)&&function e(t,s){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let s=0,r=t.length;s<r;s++)if(e(t[s]))return!0;return!1}if(tM(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===r.EVENT?r.BINARY_EVENT:r.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===r.BINARY_EVENT||e.type===r.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=function(e){let t=[],s=e.data;return e.data=function e(t,s){if(!t)return t;if(tM(t)){let e={_placeholder:!0,num:s.length};return s.push(t),e}if(Array.isArray(t)){let r=Array(t.length);for(let i=0;i<t.length;i++)r[i]=e(t[i],s);return r}if("object"==typeof t&&!(t instanceof Date)){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e(t[i],s));return r}return t}(s,t),e.attachments=t.length,{packet:e,buffers:t}}(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}constructor(e){this.replacer=e}}function tB(e){return"[object Object]"===Object.prototype.toString.call(e)}class tI extends e7{add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let s=(t=this.decodeString(e)).type===r.BINARY_EVENT;s||t.type===r.BINARY_ACK?(t.type=s?r.EVENT:r.ACK,this.reconstructor=new tF(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(tM(e)||e.base64)if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+e)}decodeString(e){let t=0,s={type:Number(e.charAt(0))};if(void 0===r[s.type])throw Error("unknown packet type "+s.type);if(s.type===r.BINARY_EVENT||s.type===r.BINARY_ACK){let r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw Error("Illegal attachments");s.attachments=Number(i)}if("/"===e.charAt(t+1)){let r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);s.nsp=e.substring(r,t)}else s.nsp="/";let i=e.charAt(t+1);if(""!==i&&Number(i)==i){let r=t+1;for(;++t;){let s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){let r=this.tryParse(e.substr(t));if(tI.isPayloadValid(s.type,r))s.data=r;else throw Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case r.CONNECT:return tB(t);case r.DISCONNECT:return void 0===t;case r.CONNECT_ERROR:return"string"==typeof t||tB(t);case r.EVENT:case r.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===tL.indexOf(t[0]));case r.ACK:case r.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}constructor(e){super(),this.reviver=e}}class tF{takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,s;let e=(t=this.reconPack,s=this.buffers,t.data=function e(t,s){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<s.length)return s[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=e(t[r],s);else if("object"==typeof t)for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=e(t[r],s));return t}(t.data,s),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}}function tU(e,t,s){return e.on(t,s),function(){e.off(t,s)}}let tW=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tq extends e7{get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[tU(e,"open",this.onopen.bind(this)),tU(e,"packet",this.onpacket.bind(this)),tU(e,"error",this.onerror.bind(this)),tU(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){for(var t,s,i,n=arguments.length,a=Array(n>1?n-1:0),l=1;l<n;l++)a[l-1]=arguments[l];if(tW.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(a.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;let o={type:r.EVENT,data:a};if(o.options={},o.options.compress=!1!==this.flags.compress,"function"==typeof a[a.length-1]){let e=this.ids++,t=a.pop();this._registerAckCallback(e,t),o.id=e}let c=null==(s=null==(t=this.io.engine)?void 0:t.transport)?void 0:s.writable,d=this.connected&&!(null==(i=this.io.engine)?void 0:i._hasPingExpired());return this.flags.volatile&&!c||(d?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var s,r=this;let i=null!=(s=this.flags.timeout)?s:this._opts.ackTimeout;if(void 0===i){this.acks[e]=t;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))},i),a=function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];r.io.clearTimeoutFn(n),t.apply(r,s)};a.withError=!0,this.acks[e]=a}emitWithAck(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return new Promise((t,r)=>{let i=(e,s)=>e?r(e):t(s);i.withError=!0,s.push(i),this.emit(e,...s)})}_addToQueue(e){let t;var s=this;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];if(r===s._queue[0])return null!==e?r.tryCount>s._opts.retries&&(s._queue.shift(),t&&t(e)):(s._queue.shift(),t&&t(null,...n)),r.pending=!1,s._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:r.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case r.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,s=!1;return function(){for(var i=arguments.length,n=Array(i),a=0;a<i;a++)n[a]=arguments[a];s||(s=!0,t.packet({type:r.ACK,id:e,data:n}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:r.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s]){t.splice(s,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s]){t.splice(s,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}}var tH=e.i(51890);function tz(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}tz.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-s:e+s}return 0|Math.min(e,this.max)},tz.prototype.reset=function(){this.attempts=0},tz.prototype.setMin=function(e){this.ms=e},tz.prototype.setMax=function(e){this.max=e},tz.prototype.setJitter=function(e){this.jitter=e};class tY extends e7{reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null==(t=this.backoff)||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null==(t=this.backoff)||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null==(t=this.backoff)||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new tS(this.uri,this.opts);let t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;let r=tU(t,"open",function(){s.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},n=tU(t,"error",i);if(!1!==this._timeout){let e=this._timeout,s=this.setTimeoutFn(()=>{r(),i(Error("timeout")),t.close()},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(tU(e,"ping",this.onping.bind(this)),tU(e,"data",this.ondata.bind(this)),tU(e,"error",this.onerror.bind(this)),tU(e,"close",this.onclose.bind(this)),tU(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){e9(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new tq(this,e,t),this.nsps[e]=s),s}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),null==(s=this.engine)||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let s=this.setTimeoutFn(()=>{!e.skipReconnect&&(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,ti(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(s=t.randomizationFactor)?s:.5),this.backoff=new tz({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let r=t.parser||tH;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}}let tV={};function tK(e,t){let s;"object"==typeof e&&(t=e,e=void 0);let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0,r=e;s=s||"undefined"!=typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==s?s.protocol+"//"+e:"https://"+e),r=tN(e)),!r.port&&(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(s&&s.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,n=r.id,a=r.path,l=tV[n]&&a in tV[n].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||l?s=new tY(i,t):(tV[n]||(tV[n]=new tY(i,t)),s=tV[n]),r.query&&!t.query&&(t.query=r.queryKey),s.socket(r.path,t)}Object.assign(tK,{Manager:tY,Socket:tq,io:tK,connect:tK});let tX=new class{connect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((s,r)=>{try{this.socket=tK(ez.default.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001",{auth:{userId:e,leagueIds:t},transports:["websocket","polling"],timeout:2e4,forceNew:!0}),this.setupEventHandlers(),this.socket.on("connect",()=>{console.log("Live scoring connected"),this.isConnected=!0,this.reconnectAttempts=0,s()}),this.socket.on("connect_error",e=>{console.error("Live scoring connection error:",e),r(e)})}catch(e){r(e)}})}setupEventHandlers(){this.socket&&(this.socket.on("disconnect",()=>{console.log("Live scoring disconnected"),this.isConnected=!1,this.attemptReconnect()}),this.socket.on("player_score_update",e=>{this.emit("player_score_update",e)}),this.socket.on("matchup_score_update",e=>{this.emit("matchup_score_update",e)}),this.socket.on("player_news",e=>{this.emit("player_news",e)}),this.socket.on("week_started",e=>{this.emit("week_started",e)}),this.socket.on("week_finalized",e=>{this.emit("week_finalized",e)}),this.socket.on("game_started",e=>{this.emit("game_started",e)}),this.socket.on("game_finished",e=>{this.emit("game_finished",e)}),this.socket.on("trade_completed",e=>{this.emit("trade_completed",e)}),this.socket.on("waiver_processed",e=>{this.emit("waiver_processed",e)}))}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return void console.error("Max reconnection attempts reached");this.reconnectAttempts++,setTimeout(()=>{console.log("Attempting reconnection ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts)),this.socket&&this.socket.connect()},Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4))}subscribeToLeague(e){this.socket&&this.isConnected&&this.socket.emit("subscribe_league",{leagueId:e})}unsubscribeFromLeague(e){this.socket&&this.isConnected&&this.socket.emit("unsubscribe_league",{leagueId:e})}subscribeToPlayer(e){this.socket&&this.isConnected&&this.socket.emit("subscribe_player",{playerId:e})}requestLiveScores(e,t){this.socket&&this.isConnected&&this.socket.emit("get_live_scores",{leagueId:e,week:t})}on(e,t){this.callbacks.has(e)||this.callbacks.set(e,new Set),this.callbacks.get(e).add(t)}off(e,t){let s=this.callbacks.get(e);s&&s.delete(t)}emit(e,t){let s=this.callbacks.get(e);s&&s.forEach(e=>{try{e(t)}catch(e){console.error("Error in live scoring callback:",e)}})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1),this.callbacks.clear()}getConnectionStatus(){return this.isConnected}startMockUpdates(e,t){}constructor(){(0,eN._)(this,"socket",null),(0,eN._)(this,"isConnected",!1),(0,eN._)(this,"reconnectAttempts",0),(0,eN._)(this,"maxReconnectAttempts",5),(0,eN._)(this,"callbacks",new Map)}};function tG(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),[a,d]=(0,n.useState)([]),[h,p]=(0,n.useState)(null),[m,f]=(0,n.useState)(!1),[x,g]=(0,n.useState)(0),{user:y,currentLeague:v,currentWeek:j,myRoster:w}=(0,C.default)();(0,n.useEffect)(()=>(y&&v&&b(),()=>{tX.disconnect()}),[y,v]);let b=async()=>{if(y&&v){r(!0),p(null);try{try{await tX.connect(y.user_id,[v.league_id]),t(!0),_()}catch(e){console.warn("WebSocket unavailable, starting mock updates"),tX.startMockUpdates(v.league_id,j),t(!0),_()}}catch(e){p(e.message||"Failed to connect to live scoring")}finally{r(!1)}}},_=()=>{tX.on("player_score_update",T),tX.on("matchup_score_update",S),tX.on("player_news",A),tX.on("disconnect",()=>t(!1)),tX.on("connect",()=>t(!0))},T=(0,n.useCallback)(e=>{if(m)return;let t={id:"score-".concat(e.playerId,"-").concat(Date.now()),type:"score",timestamp:Date.now(),data:e,isNew:!0};d(e=>[t,...e.slice(0,49)].map((e,t)=>({...e,isNew:0===t}))),g(Date.now())},[m]),S=(0,n.useCallback)(e=>{if(m)return;let t={id:"matchup-".concat(e.matchupId,"-").concat(Date.now()),type:"matchup",timestamp:Date.now(),data:e,isNew:!0};d(e=>[t,...e.slice(0,49)]),g(Date.now())},[m]),A=(0,n.useCallback)(e=>{if(m)return;let t={id:"news-".concat(e.playerId,"-").concat(Date.now()),type:"news",timestamp:Date.now(),data:e,isNew:!0};d(e=>[t,...e.slice(0,49)]),g(Date.now())},[m]);return(0,i.jsxs)(l.Card,{children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[e?(0,i.jsx)(eI,{className:"h-5 w-5 text-green-600"}):(0,i.jsx)(eF,{className:"h-5 w-5 text-red-600"}),"Live Scoring",e&&(0,i.jsxs)(c.Badge,{variant:"outline",className:"ml-2",children:[(0,i.jsx)(N.Activity,{className:"h-3 w-3 mr-1 animate-pulse"}),"Live"]})]}),(0,i.jsx)(l.CardDescription,{children:"Real-time score updates and player news"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{f(!m)},disabled:!e,children:m?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eq,{className:"h-4 w-4 mr-1"}),"Resume"]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eH,{className:"h-4 w-4 mr-1"}),"Pause"]})}),(0,i.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{d([]),g(0)},children:"Clear"}),!e&&(0,i.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{b()},disabled:s,children:s?(0,i.jsx)(eM.RefreshCw,{className:"h-4 w-4 animate-spin"}):"Reconnect"})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,i.jsxs)("span",{className:"flex items-center gap-1",children:[(0,i.jsx)(ew.Clock,{className:"h-4 w-4"}),"Last update: ",(()=>{if(0===x)return"Never";let e=Math.floor((Date.now()-x)/1e3);if(e<60)return"".concat(e,"s ago");let t=Math.floor(e/60);if(t<60)return"".concat(t,"m ago");let s=Math.floor(t/60);return"".concat(s,"h ago")})()]}),(0,i.jsxs)("span",{className:"flex items-center gap-1",children:[(0,i.jsx)(eW.Bell,{className:"h-4 w-4"}),a.length," updates"]}),m&&(0,i.jsx)(c.Badge,{variant:"outline",className:"text-orange-600",children:"Paused"})]})]}),(0,i.jsxs)(l.CardContent,{children:[h&&(0,i.jsx)(u.Alert,{variant:"destructive",className:"mb-4",children:(0,i.jsx)(u.AlertDescription,{children:h})}),!e&&!s&&(0,i.jsx)(u.Alert,{className:"mb-4",children:(0,i.jsx)(u.AlertDescription,{children:"Live scoring is disconnected. Using mock data for development."})}),s&&(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)(eM.RefreshCw,{className:"h-8 w-8 mx-auto animate-spin text-primary mb-4"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Connecting to live scoring..."})]}),0===a.length&&e&&!s?(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)(N.Activity,{className:"h-8 w-8 mx-auto text-muted-foreground mb-4"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Waiting for live updates..."}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Updates will appear here during game time"})]}):(0,i.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map(e=>(0,i.jsxs)("div",{className:(0,k.cn)("p-3 rounded-lg border transition-all duration-500",e.isNew&&"bg-blue-50 border-blue-200 animate-pulse"),children:["score"===e.type&&(0,i.jsx)(tQ,{update:e.data}),"matchup"===e.type&&(0,i.jsx)(tJ,{update:e.data}),"news"===e.type&&(0,i.jsx)(t$,{update:e.data}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))})]})]})}function tQ(e){let{update:t}=e,s=t.points-t.previousPoints,r=s>0;return(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:t.playerName}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[t.position," • ",t.team]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"font-bold",children:t.points.toFixed(1)}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"live"===t.gameStatus?"Live":"Final"})]}),0!==s&&(0,i.jsxs)("div",{className:(0,k.cn)("flex items-center gap-1 text-sm",r?"text-green-600":"text-red-600"),children:[r?(0,i.jsx)(ev.TrendingUp,{className:"h-4 w-4"}):(0,i.jsx)(eU.TrendingDown,{className:"h-4 w-4"}),Math.abs(s).toFixed(1)]})]})]})}function tJ(e){let{update:t}=e,s=t.teams[0],r=t.teams[1];return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsxs)("span",{children:["Matchup ",t.matchupId]}),(0,i.jsxs)(c.Badge,{variant:"outline",children:[t.gamesInProgress," live games"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium",children:["Team ",s.rosterId]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[s.score.toFixed(1)," pts"]})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"vs"}),(0,i.jsx)(h.Progress,{value:s.score/(s.score+r.score)*100,className:"w-16 h-2"})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"font-medium",children:["Team ",r.rosterId]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[r.score.toFixed(1)," pts"]})]})]})]})}function t$(e){let{update:t}=e;return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-medium",children:t.title}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-1 ml-3",children:[(0,i.jsxs)(c.Badge,{variant:"outline",className:(0,k.cn)("text-xs",(e=>{switch(e){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}})(t.impact)),children:[t.impact," impact"]}),(0,i.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:t.type})]})]})})}var tZ=e.i(17923),t0=e.i(70273);function t1(){var e,t;let[s,r]=(0,n.useState)(null),[a,o]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[m,f]=(0,n.useState)(!1),{currentLeague:y,myRoster:j,rosters:w,leagueUsers:b,players:_,currentWeek:T,seasonMatchups:S}=(0,C.default)();(0,n.useEffect)(()=>{j&&y&&A()},[j,y,S]);let A=async()=>{if(j&&y){f(!0);try{let e=R();r(e);let t=E();o(t);let s=P();p(s)}catch(e){console.error("Error calculating analytics:",e)}finally{f(!1)}}},R=()=>{var e,t,s,r;if(!j)throw Error("No roster data");let i=D(j.roster_id),n=(null==(e=j.settings)?void 0:e.fpts)||0,a=((null==(t=j.settings)?void 0:t.wins)||0)+((null==(s=j.settings)?void 0:s.losses)||0)+((null==(r=j.settings)?void 0:r.ties)||0),l=a>0?n/a:0,o=w.reduce((e,t)=>{var s;return e+((null==(s=t.settings)?void 0:s.fpts)||0)},0)/w.length/Math.max(a,1),c=o>0?l/o*100:50,d=M(),h=Math.max(0,100-L(d)/l*100),u=Math.max(...d),p=Math.min(...d.filter(e=>e>0)),m=d.slice(-3),f=m.reduce((e,t)=>e+t,0)/m.length,x=.5+.3*Math.random(),g=Math.random()>.7?"high":Math.random()>.4?"medium":"low";return{rosterId:j.roster_id,teamName:i,efficiency:Math.round(c),consistency:Math.round(h),ceiling:u,floor:p,trendScore:Math.round(l>0?f/l*100:50),strengthOfSchedule:Math.round(100*x)/100,injuryRisk:g,tradeValue:Math.round(.8*c+.2*h)}},E=()=>j?["QB","RB","WR","TE","K","DEF"].map(e=>{let t=j.players.map(e=>_.get(e)).filter(t=>t&&t.position===e),s=t.length,r=t.reduce((e,t)=>e+((null==t?void 0:t.age)||25),0)/Math.max(s,1),i=100*Math.random();return{position:e,depth:s,averageAge:Math.round(10*r)/10,upside:Math.round(i),stability:Math.round(100*Math.random()),needsUpgrade:s<2||r>30||i<60}}):[],P=()=>{let e=[];for(let t=1;t<=T;t++){let s=S.get(t)||[],r=s.find(e=>e.roster_id===(null==j?void 0:j.roster_id));if(r){let i=s.map(e=>e.points).sort((e,t)=>t-e).indexOf(r.points)+1,n="stable";if(e.length>0){let t=e[e.length-1].rank;i<t?n="up":i>t&&(n="down")}e.push({week:t,points:r.points,rank:i,trend:n})}}return e},M=()=>{let e=[];for(let t=1;t<=T;t++){let s=(S.get(t)||[]).find(e=>e.roster_id===(null==j?void 0:j.roster_id));s&&e.push(s.points)}return e},L=e=>{if(0===e.length)return 0;let t=e.reduce((e,t)=>e+t,0)/e.length;return Math.sqrt(e.reduce((e,s)=>e+Math.pow(s-t,2),0)/e.length)},D=e=>{let t=w.find(t=>t.roster_id===e);if(!t)return"Team ".concat(e);let s=t.owner_id?b.get(t.owner_id):void 0;return(null==s?void 0:s.team_name)||(null==s?void 0:s.display_name)||"Team ".concat(e)},O=e=>{switch(e){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";default:return"text-gray-600"}};return y?m||!s?(0,i.jsx)(l.Card,{children:(0,i.jsx)(l.CardContent,{className:"py-8",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(N.Activity,{className:"h-8 w-8 mx-auto animate-spin text-primary mb-4"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Calculating advanced analytics..."})]})})}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,i.jsx)(tZ.BarChart3,{className:"h-5 w-5"}),"Efficiency"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsxs)("div",{className:(0,k.cn)("text-3xl font-bold",(e=s.efficiency)>=110?"text-green-600":e>=100?"text-blue-600":e>=90?"text-yellow-600":"text-red-600"),children:[s.efficiency,"%"]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"vs League Avg"}),(0,i.jsx)(h.Progress,{value:s.efficiency,className:"mt-2"})]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,i.jsx)(x.Target,{className:"h-5 w-5"}),"Consistency"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsxs)("div",{className:(0,k.cn)("text-3xl font-bold",(t=s.consistency)>=80?"text-green-600":t>=65?"text-yellow-600":"text-red-600"),children:[s.consistency,"%"]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Week to Week"}),(0,i.jsx)(h.Progress,{value:s.consistency,className:"mt-2"})]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,i.jsx)(v.Zap,{className:"h-5 w-5"}),"Ceiling/Floor"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"text-lg font-bold text-green-600",children:s.ceiling.toFixed(1)}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"/"}),(0,i.jsx)("div",{className:"text-lg font-bold text-red-600",children:s.floor.toFixed(1)})]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Best/Worst Week"})]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{className:"pb-2",children:(0,i.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,i.jsx)(ev.TrendingUp,{className:"h-5 w-5"}),"Recent Trend"]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsxs)("div",{className:(0,k.cn)("text-3xl font-bold",s.trendScore>105?"text-green-600":s.trendScore>95?"text-yellow-600":"text-red-600"),children:[s.trendScore,"%"]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Last 3 Weeks"})]})]})]}),(0,i.jsxs)(d.Tabs,{defaultValue:"positional",className:"space-y-4",children:[(0,i.jsxs)(d.TabsList,{className:"grid w-full grid-cols-3",children:[(0,i.jsx)(d.TabsTrigger,{value:"positional",children:"Position Analysis"}),(0,i.jsx)(d.TabsTrigger,{value:"trends",children:"Weekly Trends"}),(0,i.jsx)(d.TabsTrigger,{value:"risk",children:"Risk Assessment"})]}),(0,i.jsx)(d.TabsContent,{value:"positional",className:"space-y-4",children:(0,i.jsxs)(l.Card,{children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsx)(l.CardTitle,{children:"Positional Strength Analysis"}),(0,i.jsx)(l.CardDescription,{children:"Depth, age, and upgrade needs by position"})]}),(0,i.jsx)(l.CardContent,{children:(0,i.jsx)("div",{className:"grid gap-4",children:a.map(e=>(0,i.jsxs)("div",{className:(0,k.cn)("p-4 rounded-lg border",e.needsUpgrade&&"bg-orange-50 border-orange-200"),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"font-medium text-lg",children:e.position}),e.needsUpgrade&&(0,i.jsxs)(c.Badge,{variant:"destructive",className:"text-xs",children:[(0,i.jsx)(g.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Needs Upgrade"]})]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.depth," player",1!==e.depth?"s":""]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Avg Age"}),(0,i.jsxs)("div",{className:"font-medium",children:[e.averageAge," years"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Upside"}),(0,i.jsxs)("div",{className:"font-medium",children:[e.upside,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-muted-foreground",children:"Stability"}),(0,i.jsxs)("div",{className:"font-medium",children:[e.stability,"%"]})]})]})]},e.position))})})]})}),(0,i.jsx)(d.TabsContent,{value:"trends",className:"space-y-4",children:(0,i.jsxs)(l.Card,{children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsx)(l.CardTitle,{children:"Weekly Performance Trends"}),(0,i.jsx)(l.CardDescription,{children:"Points scored and league ranking by week"})]}),(0,i.jsx)(l.CardContent,{children:(0,i.jsx)("div",{className:"space-y-3",children:u.map(e=>{let t="up"===e.trend?ev.TrendingUp:"down"===e.trend?eU.TrendingDown:N.Activity,s="up"===e.trend?"text-green-600":"down"===e.trend?"text-red-600":"text-gray-600";return(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-primary-foreground font-bold text-sm",children:e.week}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium",children:[e.points.toFixed(1)," pts"]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["#",e.rank," in league"]})]})]}),(0,i.jsx)(t,{className:(0,k.cn)("h-5 w-5",s)})]},e.week)})})})]})}),(0,i.jsx)(d.TabsContent,{value:"risk",className:"space-y-4",children:(0,i.jsxs)(l.Card,{children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsx)(l.CardTitle,{children:"Risk Assessment"}),(0,i.jsx)(l.CardDescription,{children:"Injury risk, schedule difficulty, and trade value"})]}),(0,i.jsx)(l.CardContent,{children:(0,i.jsx)("div",{className:"grid gap-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"p-4 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)(g.AlertTriangle,{className:(0,k.cn)("h-5 w-5",O(s.injuryRisk))}),(0,i.jsx)("span",{className:"font-medium",children:"Injury Risk"})]}),(0,i.jsx)("div",{className:(0,k.cn)("text-lg font-bold capitalize",O(s.injuryRisk)),children:s.injuryRisk}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Based on player ages and positions"})]}),(0,i.jsxs)("div",{className:"p-4 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)(ew.Clock,{className:"h-5 w-5"}),(0,i.jsx)("span",{className:"font-medium",children:"Schedule Strength"})]}),(0,i.jsx)("div",{className:"text-lg font-bold",children:s.strengthOfSchedule.toFixed(2)}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Remaining opponents difficulty"})]}),(0,i.jsxs)("div",{className:"p-4 rounded-lg border",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)(t0.Star,{className:"h-5 w-5"}),(0,i.jsx)("span",{className:"font-medium",children:"Trade Value"})]}),(0,i.jsxs)("div",{className:"text-lg font-bold",children:[s.tradeValue,"%"]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Overall team attractiveness"})]})]})})})]})})]})]}):(0,i.jsx)(l.Card,{children:(0,i.jsx)(l.CardContent,{className:"py-8",children:(0,i.jsx)("div",{className:"text-center text-muted-foreground",children:"Please select a league to view analytics"})})})}let t2=(0,eE.default)("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);function t5(){let[e,t]=(0,n.useState)("players"),{currentLeague:s,rosters:r,leagueUsers:a,players:d,seasonMatchups:h,currentWeek:u,myRoster:p}=(0,C.default)(),m=(0,n.useMemo)(()=>{if(!p||0===h.size)return[];let e=[];return p.players.forEach(t=>{let s=d.get(t);if(!s)return;let r=[];for(let e=1;e<=u;e++){let s=(h.get(e)||[]).find(e=>e.roster_id===p.roster_id);s&&s.players_points[t]&&r.push(s.players_points[t])}if(0===r.length)return;let i=r.reduce((e,t)=>e+t,0)/r.length,n=r[r.length-1]||0,a=r.slice(-3),l=a.reduce((e,t)=>e+t,0)/a.length,o="steady";l>1.15*i?o="hot":l<.85*i&&(o="cold");let c=Math.max(0,100-Math.sqrt(r.reduce((e,t)=>e+Math.pow(t-i,2),0)/r.length)/i*100);e.push({playerId:t,playerName:s.full_name,position:s.position,team:s.team||"FA",avgPoints:Math.round(100*i)/100,lastWeekPoints:Math.round(100*n)/100,trend:o,consistency:Math.round(c),rosterId:p.roster_id})}),e.sort((e,t)=>t.avgPoints-e.avgPoints)},[p,h,d,u]),g=(0,n.useMemo)(()=>{let e=[];return r.forEach(t=>{var s,r,i,n,l;let o=t.owner_id?a.get(t.owner_id):void 0,c=(null==o?void 0:o.team_name)||(null==o?void 0:o.display_name)||"Team ".concat(t.roster_id),d=(null==(s=t.settings)?void 0:s.wins)||0,h=(null==(r=t.settings)?void 0:r.losses)||0,u=(null==(i=t.settings)?void 0:i.ties)||0,p=(null==(n=t.settings)?void 0:n.fpts)||0,m=(null==(l=t.settings)?void 0:l.fpts_against)||0,f=d+h+u,x=f>0?p/f:0,g=f>0?m/f:0,y=f>0?d/f:0;e.push({rosterId:t.roster_id,teamName:c,record:"".concat(d,"-").concat(h).concat(u>0?"-".concat(u):""),pointsFor:p,pointsAgainst:m,avgPointsFor:Math.round(100*x)/100,avgPointsAgainst:Math.round(100*g)/100,powerRanking:Math.round(100*(.6*y+x/150*.4)),momentum:"stable",playoffs:y>.5||x>120})}),e.sort((e,t)=>t.powerRanking-e.powerRanking)},[r,a]);return s?(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(tZ.BarChart3,{className:"h-5 w-5"}),"Performance Analysis"]}),(0,i.jsx)(l.CardDescription,{children:"Track player and team performance trends"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.Button,{variant:"players"===e?"default":"outline",size:"sm",onClick:()=>t("players"),children:"Players"}),(0,i.jsx)(o.Button,{variant:"teams"===e?"default":"outline",size:"sm",onClick:()=>t("teams"),children:"Teams"})]})]})}),(0,i.jsx)(l.CardContent,{children:"players"===e?(0,i.jsx)("div",{className:"space-y-3",children:m.slice(0,10).map(e=>{var t;let s=(e=>{switch(e){case"hot":return w.Flame;case"cold":return b.Snowflake;default:return N.Activity}})(e.trend);return(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(s,{className:(0,k.cn)("h-4 w-4",(e=>{switch(e){case"hot":return"text-red-500";case"cold":return"text-blue-500";default:return"text-gray-500"}})(e.trend))}),(0,i.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:e.position})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:e.playerName}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:e.team})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"font-bold",children:e.avgPoints}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Avg PPG"})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"font-medium",children:e.lastWeekPoints}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Last Week"})]}),(0,i.jsxs)("div",{className:"text-right min-w-[60px]",children:[(0,i.jsxs)("div",{className:(0,k.cn)("font-medium",(t=e.consistency)>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600"),children:[e.consistency,"%"]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Consistent"})]})]})]},e.playerId)})}):(0,i.jsx)("div",{className:"space-y-3",children:g.map((e,t)=>(0,i.jsxs)("div",{className:(0,k.cn)("flex items-center justify-between p-3 rounded-lg border",e.rosterId===(null==p?void 0:p.roster_id)&&"bg-primary/5 border-primary/20"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[t<3&&(0,i.jsx)(t2,{className:(0,k.cn)("h-4 w-4",0===t?"text-yellow-500":1===t?"text-gray-400":"text-amber-600")}),(0,i.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:["#",t+1]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"font-medium",children:e.teamName}),e.rosterId===(null==p?void 0:p.roster_id)&&(0,i.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:"You"})]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.record," • ",e.avgPointsFor," PPG"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"font-bold",children:e.powerRanking}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Power"})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[e.playoffs&&(0,i.jsxs)(c.Badge,{variant:"default",className:"text-xs",children:[(0,i.jsx)(f.Trophy,{className:"h-3 w-3 mr-1"}),"Playoff"]}),(0,i.jsxs)(c.Badge,{variant:"up"===e.momentum?"default":"down"===e.momentum?"destructive":"secondary",className:"text-xs",children:["up"===e.momentum?(0,i.jsx)(ev.TrendingUp,{className:"h-3 w-3 mr-1"}):"down"===e.momentum?(0,i.jsx)(eU.TrendingDown,{className:"h-3 w-3 mr-1"}):(0,i.jsx)(x.Target,{className:"h-3 w-3 mr-1"}),e.momentum]})]})]})]},e.rosterId))})})]}):(0,i.jsx)(l.Card,{children:(0,i.jsx)(l.CardContent,{className:"py-8",children:(0,i.jsx)("div",{className:"text-center text-muted-foreground",children:"Please select a league to view performance data"})})})}var t4=e.i(63209);function t3(){var e,t,s,r,x,y;let v=(0,a.useRouter)(),[j,w]=(0,n.useState)(!1),{user:b,leagues:_,currentLeague:S,myRoster:A,rosters:R,leagueUsers:E,currentMatchups:P,currentWeek:M,players:L,isLoading:D,error:O,getPlayer:B,selectLeague:I,fetchPlayers:F,refreshData:U}=(0,C.default)();(0,n.useEffect)(()=>{b||v.push("/login")},[b,v]),(0,n.useEffect)(()=>{b&&0===L.size&&F()},[b]);let W=async()=>{w(!0),await U(),w(!1)},q=async e=>{await I(e)},H=e=>{let t=R.find(t=>t.roster_id===e);if(!t)return"Team ".concat(e);let s=t.owner_id?E.get(t.owner_id):void 0;return(null==s?void 0:s.team_name)||(null==s?void 0:s.display_name)||"Team ".concat(e)},z=[...R].sort((e,t)=>{var s,r,i,n,a,l;let o=(null==(s=e.settings)?void 0:s.wins)||0,c=(null==(r=e.settings)?void 0:r.losses)||0,d=(null==(i=t.settings)?void 0:i.wins)||0,h=(null==(n=t.settings)?void 0:n.losses)||0,u=o/Math.max(o+c,1),p=d/Math.max(d+h,1);return u!==p?p-u:((null==(a=t.settings)?void 0:a.fpts)||0)-((null==(l=e.settings)?void 0:l.fpts)||0)}),Y=P.find(e=>e.roster_id===(null==A?void 0:A.roster_id)),V=Y?P.find(e=>e.matchup_id===Y.matchup_id&&e.roster_id!==Y.roster_id):null;return b?(0,i.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,i.jsx)(p.ModernNav,{}),_.length>0&&(0,i.jsx)("div",{className:"container mx-auto p-4",children:(0,i.jsx)("div",{className:"max-w-md",children:(0,i.jsx)(m.MultiTeamSwitcher,{})})}),O&&(0,i.jsx)("div",{className:"container mx-auto px-4",children:(0,i.jsxs)(u.Alert,{variant:"destructive",children:[(0,i.jsx)(t4.AlertCircle,{className:"h-4 w-4"}),(0,i.jsx)(u.AlertDescription,{children:O})]})}),!S&&_.length>1&&(0,i.jsx)("div",{className:"container mx-auto p-4",children:(0,i.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,i.jsxs)(u.Alert,{children:[(0,i.jsx)(f.Trophy,{className:"h-4 w-4"}),(0,i.jsxs)(u.AlertDescription,{children:[(0,i.jsx)("strong",{children:"Multiple leagues found!"})," Please select a league from the dropdown above to view your dashboard."]})]}),(0,i.jsxs)(l.Card,{children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsx)(l.CardTitle,{children:"Your Fantasy Leagues"}),(0,i.jsx)(l.CardDescription,{children:"Choose which league you'd like to manage"})]}),(0,i.jsx)(l.CardContent,{children:(0,i.jsx)("div",{className:"grid gap-3",children:_.map(e=>(0,i.jsx)(o.Button,{variant:"outline",onClick:()=>q(e.league_id),className:"justify-start h-auto p-4",disabled:D,children:(0,i.jsxs)("div",{className:"text-left",children:[(0,i.jsx)("div",{className:"font-medium",children:e.name}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.total_rosters," teams • ",e.season," season"]})]})},e.league_id))})})]})]})}),S&&(0,i.jsxs)("main",{className:"container mx-auto p-4 space-y-6",children:[(0,i.jsx)(T,{}),Y&&V&&(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(l.CardTitle,{children:["Week ",M," Matchup"]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.Badge,{variant:"default",children:[(0,i.jsx)(N.Activity,{className:"h-3 w-3 mr-1"}),"Live"]}),(0,i.jsx)(o.Button,{variant:"outline",size:"sm",onClick:W,disabled:j,children:(0,i.jsx)(eM.RefreshCw,{className:(0,k.cn)("h-4 w-4",j&&"animate-spin")})})]})]})}),(0,i.jsxs)(l.CardContent,{children:[(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-medium mb-2",children:H(Y.roster_id)}),(0,i.jsx)("div",{className:"text-3xl font-bold",children:Y.points.toFixed(1)}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[(null==A||null==(e=A.settings)?void 0:e.wins)||0,"-",(null==A||null==(t=A.settings)?void 0:t.losses)||0]})]}),(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)(h.Progress,{value:Y.points/Math.max(Y.points+V.points,1)*100,className:"h-3 w-full"})}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-medium mb-2",children:H(V.roster_id)}),(0,i.jsx)("div",{className:"text-3xl font-bold",children:V.points.toFixed(1)}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[(null==(r=R.find(e=>e.roster_id===V.roster_id))||null==(s=r.settings)?void 0:s.wins)||0,"-",(null==(y=R.find(e=>e.roster_id===V.roster_id))||null==(x=y.settings)?void 0:x.losses)||0]})]})]}),Y.points!==V.points&&(0,i.jsx)(u.Alert,{className:"mt-4",variant:Y.points>V.points?"default":"destructive",children:(0,i.jsx)(u.AlertDescription,{children:Y.points>V.points?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ev.TrendingUp,{className:"h-4 w-4 inline mr-2"}),"You're winning by ",(Y.points-V.points).toFixed(1)," points!"]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.AlertTriangle,{className:"h-4 w-4 inline mr-2"}),"You're losing by ",(V.points-Y.points).toFixed(1)," points"]})})})]})]}),(0,i.jsxs)(d.Tabs,{defaultValue:"roster",className:"space-y-4",children:[(0,i.jsxs)(d.TabsList,{className:"grid grid-cols-5 w-full",children:[(0,i.jsx)(d.TabsTrigger,{value:"roster",children:"My Roster"}),(0,i.jsx)(d.TabsTrigger,{value:"standings",children:"Standings"}),(0,i.jsx)(d.TabsTrigger,{value:"scoreboard",children:"Scoreboard"}),(0,i.jsx)(d.TabsTrigger,{value:"playoffs",children:"Playoffs"}),(0,i.jsx)(d.TabsTrigger,{value:"analytics",children:"Analytics"})]}),(0,i.jsx)(d.TabsContent,{value:"roster",children:A&&Y?(0,i.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Enhanced Roster View temporarily disabled for maintenance"}):(0,i.jsx)(l.Card,{children:(0,i.jsx)(l.CardContent,{className:"py-8",children:(0,i.jsx)("div",{className:"text-center text-muted-foreground",children:"No roster data available"})})})}),(0,i.jsx)(d.TabsContent,{value:"standings",children:(0,i.jsxs)(l.Card,{children:[(0,i.jsxs)(l.CardHeader,{children:[(0,i.jsx)(l.CardTitle,{children:"League Standings"}),(0,i.jsx)(l.CardDescription,{children:S.name})]}),(0,i.jsx)(l.CardContent,{children:(0,i.jsx)("div",{className:"space-y-2",children:z.map((e,t)=>{var s,r,n,a;return(0,i.jsxs)("div",{className:(0,k.cn)("flex items-center justify-between p-3 rounded-lg border transition-all",e.roster_id===(null==A?void 0:A.roster_id)&&"bg-primary/5 border-primary/20"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"text-lg font-bold text-muted-foreground",children:t+1}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium",children:[H(e.roster_id),e.roster_id===(null==A?void 0:A.roster_id)&&(0,i.jsx)(c.Badge,{className:"ml-2",variant:"secondary",children:"You"})]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(null==(s=e.settings)?void 0:s.wins)||0,"-",(null==(r=e.settings)?void 0:r.losses)||0,((null==(n=e.settings)?void 0:n.ties)||0)>0&&"-".concat(e.settings.ties)]})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"font-bold",children:((null==(a=e.settings)?void 0:a.fpts)||0).toFixed(1)}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"PF"})]})]},e.roster_id)})})})]})}),(0,i.jsx)(d.TabsContent,{value:"scoreboard",children:(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsxs)(l.Card,{children:[(0,i.jsx)(l.CardHeader,{children:(0,i.jsxs)(l.CardTitle,{children:["Week ",M," Scoreboard"]})}),(0,i.jsx)(l.CardContent,{children:(0,i.jsx)("div",{className:"grid grid-cols-1 gap-3",children:Array.from(new Set(P.map(e=>e.matchup_id))).map(e=>{let t=P.filter(t=>t.matchup_id===e);if(2!==t.length)return null;let s=t.some(e=>e.roster_id===(null==A?void 0:A.roster_id));return(0,i.jsx)("div",{className:(0,k.cn)("border rounded-lg p-4",s&&"ring-2 ring-primary"),children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:H(t[0].roster_id)}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:t[0].points.toFixed(1)})]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"VS"}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"font-medium",children:H(t[1].roster_id)}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:t[1].points.toFixed(1)})]})]})},e)})})})]})})}),(0,i.jsx)(d.TabsContent,{value:"playoffs",children:(0,i.jsx)(eB,{})}),(0,i.jsxs)(d.TabsContent,{value:"analytics",className:"space-y-6",children:[(0,i.jsx)(t5,{}),(0,i.jsx)(t1,{})]})]}),(0,i.jsx)(eR,{}),(0,i.jsx)(tG,{}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsx)(eC,{week:M}),(0,i.jsx)(ek,{})]})]})]}):null}}]);