(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}e.s(["_",()=>t])},70904,e=>{"use strict";e.s(["ESPNRealDataService",()=>i,"espnRealDataService",()=>n]);var t=e.i(99749);let o="https://site.api.espn.com/apis/site/v2/sports/football/nfl",a={1:"ATL",2:"BUF",3:"CHI",4:"CIN",5:"CLE",6:"DAL",7:"DEN",8:"DET",9:"GB",10:"TEN",11:"IND",12:"KC",13:"LV",14:"LAR",15:"MIA",16:"MIN",17:"NE",18:"NO",19:"NYG",20:"NYJ",21:"PHI",22:"ARI",23:"PIT",24:"LAC",25:"SF",26:"SEA",27:"TB",28:"WSH",29:"CAR",30:"JAX",33:"BAL",34:"HOU"},s={1:"QB",2:"RB",3:"WR",4:"TE",5:"K",16:"D/ST"};class i{setCookies(e,t){this.cookies={espnS2:e,SWID:t},localStorage.setItem("espn_cookies",JSON.stringify(this.cookies))}async fetchWithCookies(e){let t={Accept:"application/json"};this.cookies.espnS2&&this.cookies.SWID&&(t.Cookie="espn_s2=".concat(this.cookies.espnS2,"; SWID=").concat(this.cookies.SWID));try{let o=await fetch(e,{headers:t,credentials:"include"});if(!o.ok){let t=await fetch(e,{headers:{Accept:"application/json"}});if(!t.ok)throw Error("ESPN API error: ".concat(t.status));return t.json()}return o.json()}catch(e){throw console.error("ESPN API fetch error:",e),e}}async importLeague(e,t){let o=new Date().getFullYear(),a=[];try{let w="".concat("https://fantasy.espn.com/apis/v3/games/ffl","/seasons/").concat(o,"/segments/0/leagues/").concat(e,"?")+"view=mTeam&view=mRoster&view=mMatchup&view=mSettings&view=mStandings&view=mStatus&view=mLiveScoring",g=await this.fetchWithCookies(w);if(!g||!g.teams)throw Error("Unable to fetch ESPN league data");let y=g.scoringPeriodId||1;for(let o of g.teams){var s,i,n,r,l,c,d,u,p,m,h,v,S,f;let w=await this.parseRoster((null==(s=o.roster)?void 0:s.entries)||[]),I=null==(i=g.schedule)?void 0:i.find(e=>{var t,a;return e.matchupPeriodId===Math.ceil(y/1)&&((null==(t=e.home)?void 0:t.teamId)===o.id||(null==(a=e.away)?void 0:a.teamId)===o.id)}),P=(null==I||null==(n=I.home)?void 0:n.teamId)===o.id,E=P?null==I?void 0:I.away:null==I?void 0:I.home,N={id:"espn-".concat(e,"-").concat(o.id),name:"".concat(o.location," ").concat(o.nickname).trim()||"ESPN Team",platform:"espn",leagueId:e,managerId:o.primaryOwner||"",roster:w,record:{wins:(null==(l=o.record)||null==(r=l.overall)?void 0:r.wins)||0,losses:(null==(d=o.record)||null==(c=d.overall)?void 0:c.losses)||0,ties:(null==(p=o.record)||null==(u=p.overall)?void 0:u.ties)||0},standing:o.playoffSeed||o.rankCalculatedFinal||0,points:{for:o.points||0,against:o.pointsAgainst||0},projectedPoints:I&&(P?null==(m=I.home)?void 0:m.totalProjectedPoints:null==(h=I.away)?void 0:h.totalProjectedPoints)||0,livePoints:I&&(P?null==(v=I.home)?void 0:v.totalPoints:null==(S=I.away)?void 0:S.totalPoints)||0,matchup:E?{opponentId:"espn-".concat(e,"-").concat(E.teamId),opponentName:(null==(f=g.teams.find(e=>e.id===E.teamId))?void 0:f.name)||"Opponent",opponentScore:E.totalPoints||0,week:y}:void 0,avatar:o.logo||"",isUserTeam:!!t&&o.id.toString()===t,lastUpdated:new Date().toISOString()};a.push(N)}if(t)return a.filter(e=>e.isUserTeam);return a}catch(e){return console.error("Error importing ESPN league:",e),[]}}async parseRoster(e){let t=[];for(let v of e){var o,i,n,r,l,c,d,u,p,m,h;if(!(null==(o=v.playerPoolEntry)?void 0:o.player))continue;let e=v.playerPoolEntry.player,S=(null==(i=e.stats)?void 0:i.find(e=>0===e.statSourceId))||{},f="ACTIVE";e.injured&&(f=e.injuryStatus||"QUESTIONABLE");let w={id:"espn-".concat(e.id),name:e.fullName,position:s[e.defaultPositionId]||"FLEX",team:a[e.proTeamId]||"FA",jerseyNumber:e.jersey||"",status:{isActive:v.lineupSlotId<20,gameStatus:this.mapInjuryStatus(f),injuryDesignation:"ACTIVE"!==f?f:void 0},points:S.appliedTotal||0,projectedPoints:S.appliedProjectedTotal||0,stats:{passingYards:(null==(n=S.stats)?void 0:n[3])||0,passingTDs:(null==(r=S.stats)?void 0:r[4])||0,rushingYards:(null==(l=S.stats)?void 0:l[24])||0,rushingTDs:(null==(c=S.stats)?void 0:c[25])||0,receptions:(null==(d=S.stats)?void 0:d[53])||0,receivingYards:(null==(u=S.stats)?void 0:u[42])||0,receivingTDs:(null==(p=S.stats)?void 0:p[43])||0,fantasyPoints:S.appliedTotal||0},percentOwned:(null==(m=e.ownership)?void 0:m.percentOwned)||0,percentStarted:(null==(h=e.ownership)?void 0:h.percentStarted)||0,avatar:"https://a.espncdn.com/combiner/i?img=/i/headshots/nfl/players/full/".concat(e.id,".png&w=96&h=70"),lastUpdate:new Date().toISOString()};t.push(w)}return t}mapInjuryStatus(e){switch(null==e?void 0:e.toUpperCase()){case"ACTIVE":case"PROBABLE":default:return"playing";case"QUESTIONABLE":return"questionable";case"DOUBTFUL":return"doubtful";case"OUT":return"out";case"INJURY_RESERVE":case"IR":return"ir"}}async getLiveScores(){try{var e;let t=await fetch("".concat(o,"/scoreboard"));return(null==(e=(await t.json()).events)?void 0:e.map(e=>({id:e.id,name:e.name,shortName:e.shortName,date:e.date,completed:e.status.type.completed,inProgress:"in"===e.status.type.state,period:e.status.period,clock:e.status.displayClock,teams:e.competitions[0].competitors.map(e=>({id:e.team.id,name:e.team.displayName,abbreviation:e.team.abbreviation,score:e.score,homeAway:e.homeAway,winner:e.winner}))})))||[]}catch(e){return console.error("Error fetching ESPN live scores:",e),[]}}async getPlayerNews(e){try{var t;let a=await fetch("".concat(o,"/athletes/").concat(e,"/news"));return(null==(t=(await a.json()).articles)?void 0:t.map(e=>{var t,o;return{headline:e.headline,description:e.description,published:e.published,link:null==(o=e.links)||null==(t=o.web)?void 0:t.href}}))||[]}catch(e){return console.error("Error fetching ESPN player news:",e),[]}}constructor(){(0,t._)(this,"cookies",{});{let e=localStorage.getItem("espn_cookies");e&&(this.cookies=JSON.parse(e))}}}let n=new i}]);