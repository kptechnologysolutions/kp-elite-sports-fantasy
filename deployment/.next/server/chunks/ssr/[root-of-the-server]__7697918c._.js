module.exports=[33405,(a,b,c)=>{b.exports=a.x("child_process",()=>require("child_process"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},24836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},63047,(a,b,c)=>{var d=a.r(22734),e=a.r(92509),f=a.r(33405).spawn;function g(b){"use strict";b=b||{};var c,g,h=this,i=a.r(21517),j=a.r(24836),k={},l=!1,m={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},n=Object.assign({},m),o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],p=["TRACE","TRACK","CONNECT"],q=!1,r=!1,s=!1,t={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null,this.open=function(a,b,c,d,e){if(this.abort(),r=!1,s=!1,!(a&&-1===p.indexOf(a)))throw Error("SecurityError: Request method not allowed");k={method:a,url:b.toString(),async:"boolean"!=typeof c||c,user:d||null,password:e||null},u(this.OPENED)},this.setDisableHeaderCheck=function(a){l=a},this.setRequestHeader=function(a,b){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!l&&(!a||-1!==o.indexOf(a.toLowerCase())))return console.warn('Refused to set unsafe header "'+a+'"'),!1;if(q)throw Error("INVALID_STATE_ERR: send flag is true");return n[a]=b,!0},this.getResponseHeader=function(a){return"string"==typeof a&&this.readyState>this.OPENED&&g.headers[a.toLowerCase()]&&!r?g.headers[a.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||r)return"";var a="";for(var b in g.headers)"set-cookie"!==b&&"set-cookie2"!==b&&(a+=b+": "+g.headers[b]+"\r\n");return a.substr(0,a.length-2)},this.getRequestHeader=function(a){return"string"==typeof a&&n[a]?n[a]:""},this.send=function(a){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(q)throw Error("INVALID_STATE_ERR: send has already been called");var l,m=!1,o=!1,p=e.parse(k.url);switch(p.protocol){case"https:":m=!0;case"http:":l=p.hostname;break;case"file:":o=!0;break;case void 0:case"":l="localhost";break;default:throw Error("Protocol not supported.")}if(o){if("GET"!==k.method)throw Error("XMLHttpRequest: Only GET method is supported");if(k.async)d.readFile(unescape(p.pathname),function(a,b){a?h.handleError(a,a.errno||-1):(h.status=200,h.responseText=b.toString("utf8"),h.response=b,u(h.DONE))});else try{this.response=d.readFileSync(unescape(p.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,u(h.DONE)}catch(a){this.handleError(a,a.errno||-1)}return}var s=p.port||(m?443:80),t=p.pathname+(p.search?p.search:"");if(n.Host=l,m&&443===s||80===s||(n.Host+=":"+p.port),k.user){void 0===k.password&&(k.password="");var v=new Buffer(k.user+":"+k.password);n.Authorization="Basic "+v.toString("base64")}"GET"===k.method||"HEAD"===k.method?a=null:a?(n["Content-Length"]=Buffer.isBuffer(a)?a.length:Buffer.byteLength(a),Object.keys(n).some(function(a){return"content-type"===a.toLowerCase()})||(n["Content-Type"]="text/plain;charset=UTF-8")):"POST"===k.method&&(n["Content-Length"]=0);var w=b.agent||!1,x={host:l,port:s,path:t,method:k.method,headers:n,agent:w};if(m&&(x.pfx=b.pfx,x.key=b.key,x.passphrase=b.passphrase,x.cert=b.cert,x.ca=b.ca,x.ciphers=b.ciphers,x.rejectUnauthorized=!1!==b.rejectUnauthorized),r=!1,k.async){var y=m?j.request:i.request;q=!0,h.dispatchEvent("readystatechange");var z=function(a){if(302===(g=a).statusCode||303===g.statusCode||307===g.statusCode){k.url=g.headers.location;var d=e.parse(k.url);l=d.hostname;var f={hostname:d.hostname,port:d.port,path:d.path,method:303===g.statusCode?"GET":k.method,headers:n};m&&(f.pfx=b.pfx,f.key=b.key,f.passphrase=b.passphrase,f.cert=b.cert,f.ca=b.ca,f.ciphers=b.ciphers,f.rejectUnauthorized=!1!==b.rejectUnauthorized),(c=y(f,z).on("error",A)).end();return}u(h.HEADERS_RECEIVED),h.status=g.statusCode,g.on("data",function(a){if(a){var b=Buffer.from(a);h.response=Buffer.concat([h.response,b])}q&&u(h.LOADING)}),g.on("end",function(){q&&(q=!1,u(h.DONE),h.responseText=h.response.toString("utf8"))}),g.on("error",function(a){h.handleError(a)})},A=function(a){if(c.reusedSocket&&"ECONNRESET"===a.code)return y(x,z).on("error",A);h.handleError(a)};c=y(x,z).on("error",A),b.autoUnref&&c.on("socket",a=>{a.unref()}),a&&c.write(a),c.end(),h.dispatchEvent("loadstart")}else{var B=".node-xmlhttprequest-content-"+process.pid,C=".node-xmlhttprequest-sync-"+process.pid;d.writeFileSync(C,"","utf8");for(var D="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(m?"s":"")+".request;var options = "+JSON.stringify(x)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+B+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+C+"');});response.on('error', function(error) {fs.writeFileSync('"+B+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+C+"');});}).on('error', function(error) {fs.writeFileSync('"+B+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+C+"');});"+(a?"req.write('"+JSON.stringify(a).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",E=f(process.argv[0],["-e",D]);d.existsSync(C););if(h.responseText=d.readFileSync(B,"utf8"),E.stdin.end(),d.unlinkSync(B),h.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var F=JSON.parse(h.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));h.handleError(F,503)}else{h.status=h.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var G=JSON.parse(h.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));g={statusCode:h.status,headers:G.data.headers},h.responseText=G.data.text,h.response=Buffer.from(G.data.data,"base64"),u(h.DONE,!0)}}},this.handleError=function(a,b){this.status=b||0,this.statusText=a,this.responseText=a.stack,r=!0,u(this.DONE)},this.abort=function(){c&&(c.abort(),c=null),n=Object.assign({},m),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),r=s=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||q)&&this.readyState!==this.DONE&&(q=!1,u(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(a,b){a in t||(t[a]=[]),t[a].push(b)},this.removeEventListener=function(a,b){a in t&&(t[a]=t[a].filter(function(a){return a!==b}))},this.dispatchEvent=function(a){if("function"==typeof h["on"+a]&&(this.readyState===this.DONE&&k.async?setTimeout(function(){h["on"+a]()},0):h["on"+a]()),a in t)for(let b=0,c=t[a].length;b<c;b++)this.readyState===this.DONE?setTimeout(function(){t[a][b].call(h)},0):t[a][b].call(h)};var u=function(a){if(h.readyState!==a&&(h.readyState!==h.UNSENT||!s)&&(h.readyState=a,(k.async||h.readyState<h.OPENED||h.readyState===h.DONE)&&h.dispatchEvent("readystatechange"),h.readyState===h.DONE)){let a;a=s?"abort":r?"error":"load",h.dispatchEvent(a),h.dispatchEvent("loadend")}}}b.exports=g,g.XMLHttpRequest=g},84425,(a,b,c)=>{function d(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}b.exports=function(a,b){b=b||{};var c,e,f,g,h=typeof a;if("string"===h&&a.length>0){var i=a;if(!((i=String(i)).length>100)){var j=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(j){var k=parseFloat(j[1]);switch((j[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*k;case"weeks":case"week":case"w":return 6048e5*k;case"days":case"day":case"d":return 864e5*k;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*k;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*k;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:break}}}return}if("number"===h&&isFinite(a)){return b.long?(e=Math.abs(c=a))>=864e5?d(c,e,864e5,"day"):e>=36e5?d(c,e,36e5,"hour"):e>=6e4?d(c,e,6e4,"minute"):e>=1e3?d(c,e,1e3,"second"):c+" ms":(g=Math.abs(f=a))>=864e5?Math.round(f/864e5)+"d":g>=36e5?Math.round(f/36e5)+"h":g>=6e4?Math.round(f/6e4)+"m":g>=1e3?Math.round(f/1e3)+"s":f+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},43317,(a,b,c)=>{b.exports=function(b){function c(a){let b,e,f,g=null;function h(...a){if(!h.enabled)return;let d=Number(new Date);h.diff=d-(b||d),h.prev=b,h.curr=d,b=d,a[0]=c.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");let e=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(b,d)=>{if("%%"===b)return"%";e++;let f=c.formatters[d];if("function"==typeof f){let c=a[e];b=f.call(h,c),a.splice(e,1),e--}return b}),c.formatArgs.call(h,a),(h.log||c.log).apply(h,a)}return h.namespace=a,h.useColors=c.useColors(),h.color=c.selectColor(a),h.extend=d,h.destroy=c.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(e!==c.namespaces&&(e=c.namespaces,f=c.enabled(a)),f),set:a=>{g=a}}),"function"==typeof c.init&&c.init(h),h}function d(a,b){let d=c(this.namespace+(void 0===b?":":b)+a);return d.log=this.log,d}function e(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}return c.debug=c,c.default=c,c.coerce=function(a){return a instanceof Error?a.stack||a.message:a},c.disable=function(){let a=[...c.names.map(e),...c.skips.map(e).map(a=>"-"+a)].join(",");return c.enable(""),a},c.enable=function(a){let b;c.save(a),c.namespaces=a,c.names=[],c.skips=[];let d=("string"==typeof a?a:"").split(/[\s,]+/),e=d.length;for(b=0;b<e;b++)d[b]&&("-"===(a=d[b].replace(/\*/g,".*?"))[0]?c.skips.push(RegExp("^"+a.slice(1)+"$")):c.names.push(RegExp("^"+a+"$")))},c.enabled=function(a){let b,d;if("*"===a[a.length-1])return!0;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1},c.humanize=a.r(84425),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(a=>{c[a]=b[a]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(a){let b=0;for(let c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c)|0;return c.colors[Math.abs(b)%c.colors.length]},c.enable(c.load()),c}},55858,(a,b,c)=>{"use strict";b.exports=(a,b=process.argv)=>{let c=a.startsWith("-")?"":1===a.length?"-":"--",d=b.indexOf(c+a),e=b.indexOf("--");return -1!==d&&(-1===e||d<e)}},73083,(a,b,c)=>{"use strict";let d;a.r(46786);let e=a.r(70722),f=a.r(55858),{env:g}=process;function h(a){return 0!==a&&{level:a,hasBasic:!0,has256:a>=2,has16m:a>=3}}function i(a,b){if(0===d)return 0;if(f("color=16m")||f("color=full")||f("color=truecolor"))return 3;if(f("color=256"))return 2;if(a&&!b&&void 0===d)return 0;let c=d||0;if("dumb"===g.TERM)return c;if("CI"in g)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(a=>a in g)||"codeship"===g.CI_NAME?1:c;if("TEAMCITY_VERSION"in g)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(g.TEAMCITY_VERSION);if("truecolor"===g.COLORTERM)return 3;if("TERM_PROGRAM"in g){let a=parseInt((g.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(g.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(g.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(g.TERM)||"COLORTERM"in g?1:c}f("no-color")||f("no-colors")||f("color=false")||f("color=never")?d=0:(f("color")||f("colors")||f("color=true")||f("color=always"))&&(d=1),"FORCE_COLOR"in g&&(d="true"===g.FORCE_COLOR?1:"false"===g.FORCE_COLOR?0:0===g.FORCE_COLOR.length?1:Math.min(parseInt(g.FORCE_COLOR,10),3)),b.exports={supportsColor:function(a){return h(i(a,a&&a.isTTY))},stdout:h(i(!0,e.isatty(1))),stderr:h(i(!0,e.isatty(2)))}},86382,(a,b,c)=>{let d=a.r(70722),e=a.r(24361);c.init=function(a){a.inspectOpts={};let b=Object.keys(c.inspectOpts);for(let d=0;d<b.length;d++)a.inspectOpts[b[d]]=c.inspectOpts[b[d]]},c.log=function(...a){return process.stderr.write(e.formatWithOptions(c.inspectOpts,...a)+"\n")},c.formatArgs=function(a){let{namespace:d,useColors:e}=this;if(e){let c=this.color,e="\x1b[3"+(c<8?c:"8;5;"+c),f=`  ${e};1m${d} \u001B[0m`;a[0]=f+a[0].split("\n").join("\n"+f),a.push(e+"m+"+b.exports.humanize(this.diff)+"\x1b[0m")}else a[0]=(c.inspectOpts.hideDate?"":new Date().toISOString()+" ")+d+" "+a[0]},c.save=function(a){a?process.env.DEBUG=a:delete process.env.DEBUG},c.load=function(){return process.env.DEBUG},c.useColors=function(){return"colors"in c.inspectOpts?!!c.inspectOpts.colors:d.isatty(process.stderr.fd)},c.destroy=e.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),c.colors=[6,2,3,4,5,1];try{let b=a.r(73083);b&&(b.stderr||b).level>=2&&(c.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(a){}c.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,b)=>{let c=b.substring(6).toLowerCase().replace(/_([a-z])/g,(a,b)=>b.toUpperCase()),d=process.env[b];return d=!!/^(yes|on|true|enabled)$/i.test(d)||!/^(no|off|false|disabled)$/i.test(d)&&("null"===d?null:Number(d)),a[c]=d,a},{}),b.exports=a.r(43317)(c);let{formatters:f}=b.exports;f.o=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts).split("\n").map(a=>a.trim()).join(" ")},f.O=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts)}},41974,(a,b,c)=>{c.formatArgs=function(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+b.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;a.splice(1,0,c,"color: inherit");let d=0,e=0;a[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(e=d))}),a.splice(e,0,c)},c.save=function(a){try{a?c.storage.setItem("debug",a):c.storage.removeItem("debug")}catch(a){}},c.load=function(){let a;try{a=c.storage.getItem("debug")}catch(a){}return!a&&"undefined"!=typeof process&&"env"in process&&(a=process.env.DEBUG),a},c.useColors=function(){let a;return!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof navigator&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},c.storage=function(){try{return localStorage}catch(a){}}(),c.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],c.log=console.debug||console.log||(()=>{}),b.exports=a.r(43317)(c);let{formatters:d}=b.exports;d.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},39432,(a,b,c)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?b.exports=a.r(41974):b.exports=a.r(86382)},57515,(a,b,c)=>{"use strict";let{Duplex:d}=a.r(88947);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}b.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._final(b)});null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._write(b,c,d)});a.send(b,d)},h.on("end",f),h.on("error",g),h}},6461,(a,b,c)=>{b.exports=a.x("zlib",()=>require("zlib"))},17376,(a,b,c)=>{"use strict";b.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},29618,(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=a.r(17376),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(b.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let a=(()=>{let a=Error("Cannot find module 'bufferutil'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.mask=function(b,c,d,e,g){g<48?f(b,c,d,e,g):a.mask(b,c,d,e,g)},b.exports.unmask=function(b,c){b.length<32?g(b,c):a.unmask(b,c)}}catch(a){}},74873,(a,b,c)=>{"use strict";let d=Symbol("kDone"),e=Symbol("kRun");b.exports=class{constructor(a){this[d]=()=>{this.pending--,this[e]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[e]()}[e](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[d])}}}},10976,(a,b,c)=>{"use strict";let d,e=a.r(6461),f=a.r(29618),g=a.r(74873),{kStatusCode:h}=a.r(17376),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");function p(a){this[n].push(a),this[l]+=a.length}function q(a){if(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)return void this[n].push(a);this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",q),this.reset()}function r(a){this[k]._inflate=null,a[h]=1007,this[m](a)}b.exports=class{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",r),this._inflate.on("data",q)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",p)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}},88686,(a,b,c)=>{"use strict";let{isUtf8:d}=a.r(874);function e(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(b.exports={isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:e,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)b.exports.isValidUTF8=function(a){return a.length<24?e(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let a=(()=>{let a=Error("Cannot find module 'utf-8-validate'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.isValidUTF8=function(b){return b.length<32?e(b):a(b)}}catch(a){}},47541,(a,b,c)=>{"use strict";let{Writable:d}=a.r(88947),e=a.r(10976),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=a.r(17376),{concat:j,toArrayBuffer:k,unmask:l}=a.r(29618),{isValidStatusCode:m,isValidUTF8:n}=a.r(88686),o=Buffer[Symbol.species];b.exports=class extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0)return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop)this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);if(c>2097151)return void a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a)}haveLength(a){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return void a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}},71387,(a,b,c)=>{"use strict";let d,{Duplex:e}=a.r(88947),{randomFillSync:f}=a.r(54799),g=a.r(10976),{EMPTY_BUFFER:h}=a.r(17376),{isValidStatusCode:i}=a.r(88686),{mask:j,toBuffer:k}=a.r(29618),l=Symbol("kByteLength"),m=Buffer.alloc(4),n=8192;class o{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||m,b.generateMask?b.generateMask(c):(8192===n&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),n=0),c[0]=d[n++],c[1]=d[n++],c[2]=d[n++],c[3]=d[n++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[l]?b[l]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let k=e;e>=65536?(h+=8,k=127):e>125&&(h+=2,k=126);let o=Buffer.allocUnsafe(g?e+h:h);return(o[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(o[0]|=64),o[1]=k,126===k?o.writeUInt16BE(e,2):127===k&&(o[2]=o[3]=0,o.writeUIntBE(e,4,6)),b.mask)?(o[1]|=128,o[h-4]=c[0],o[h-3]=c[1],o[h-2]=c[2],o[h-1]=c[3],i)?[o,a]:g?(j(a,c,o,h,e),[o]):(j(a,c,a,0,e),[o,a]):[o,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&i(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[l]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(o.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):(d=(a=k(a)).length,e=k.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[l]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};this._deflating?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(o.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):(d=(a=k(a)).length,e=k.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[l]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};this._deflating?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(o.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):(d=(a=k(a)).length,e=k.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0),f){let f={[l]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};this._deflating?this.enqueue([this.dispatch,a,this._compress,f,c]):this.dispatch(a,this._compress,f,c)}else this.sendFrame(o.frame(a,{[l]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:!1}),c)}dispatch(a,b,c,d){if(!b)return void this.sendFrame(o.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[l],this._deflating=!0,e.compress(a,c.fin,(a,b)=>{if(this._socket.destroyed){let a=Error("The socket was closed while data was being compressed");"function"==typeof d&&d(a);for(let b=0;b<this._queue.length;b++){let c=this._queue[b],d=c[c.length-1];"function"==typeof d&&d(a)}return}this._bufferedBytes-=c[l],this._deflating=!1,c.readOnly=!1,this.sendFrame(o.frame(b,c),d),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][l],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][l],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}b.exports=o},25936,(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=a.r(17376),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),b.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},16193,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(88686);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}b.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},36705,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(24836),f=a.r(21517),g=a.r(4446),h=a.r(55004),{randomBytes:i,createHash:j}=a.r(54799),{Duplex:k,Readable:l}=a.r(88947),{URL:m}=a.r(92509),n=a.r(10976),o=a.r(47541),p=a.r(71387),{BINARY_TYPES:q,EMPTY_BUFFER:r,GUID:s,kForOnEventAttribute:t,kListener:u,kStatusCode:v,kWebSocket:w,NOOP:x}=a.r(17376),{EventTarget:{addEventListener:y,removeEventListener:z}}=a.r(25936),{format:A,parse:B}=a.r(16193),{toBuffer:C}=a.r(29618),D=Symbol("kAborted"),E=[8,13],F=["CONNECTING","OPEN","CLOSING","CLOSED"],G=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class H extends d{constructor(a,b,c){super(),this._binaryType=q[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=r,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=H.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:E[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!E.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${E.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void I(b,a);throw a}let t=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=p.createConnection||(q?K:J),p.defaultPort=p.defaultPort||t,p.port=h.port||t,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=A({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!G.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{L(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[D]||(o=b._req=null,I(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void L(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){I(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||L(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==H.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void L(b,c,"Invalid Upgrade header");let g=j("sha1").update(u+s).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void L(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void L(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void L(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=B(i)}catch(a){L(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void L(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){L(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){q.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation});this._sender=new p(a,this._extensions,c.generateMask),this._receiver=d,this._socket=a,d[w]=this,a[w]=this,d.on("conclude",N),d.on("drain",O),d.on("error",P),d.on("message",R),d.on("ping",S),d.on("pong",T),a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",V),a.on("data",W),a.on("end",X),a.on("error",Y),this._readyState=H.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=H.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=H.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==H.CLOSED){if(this.readyState===H.CONNECTING)return void L(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===H.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=H.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==H.CONNECTING&&this.readyState!==H.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===H.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==H.OPEN)return void M(this,a,c);void 0===b&&(b=!this._isServer),this._sender.ping(a||r,b,c)}pong(a,b,c){if(this.readyState===H.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==H.OPEN)return void M(this,a,c);void 0===b&&(b=!this._isServer),this._sender.pong(a||r,b,c)}resume(){this.readyState!==H.CONNECTING&&this.readyState!==H.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===H.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==H.OPEN)return void M(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||r,d,c)}terminate(){if(this.readyState!==H.CLOSED){if(this.readyState===H.CONNECTING)return void L(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=H.CLOSING,this._socket.destroy())}}}function I(a,b){a._readyState=H.CLOSING,a.emit("error",b),a.emitClose()}function J(a){return a.path=a.socketPath,g.connect(a)}function K(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function L(a,b,c){a._readyState=H.CLOSING;let d=Error(c);Error.captureStackTrace(d,L),b.setHeader?(b[D]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(I,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function M(a,b,c){if(b){let c=C(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${F[a.readyState]})`);process.nextTick(c,b)}}function N(a,b){let c=this[w];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[w]&&(c._socket.removeListener("data",W),process.nextTick(U,c._socket),1005===a?c.close():c.close(a,b))}function O(){let a=this[w];a.isPaused||a._socket.resume()}function P(a){let b=this[w];void 0!==b._socket[w]&&(b._socket.removeListener("data",W),process.nextTick(U,b._socket),b.close(a[v])),b.emit("error",a)}function Q(){this[w].emitClose()}function R(a,b){this[w].emit("message",a,b)}function S(a){let b=this[w];b._autoPong&&b.pong(a,!this._isServer,x),b.emit("ping",a)}function T(a){this[w].emit("pong",a)}function U(a){a.resume()}function V(){let a,b=this[w];this.removeListener("close",V),this.removeListener("data",W),this.removeListener("end",X),b._readyState=H.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[w]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",Q),b._receiver.on("finish",Q))}function W(a){this[w]._receiver.write(a)||this.pause()}function X(){let a=this[w];a._readyState=H.CLOSING,a._receiver.end(),this.end()}function Y(){let a=this[w];this.removeListener("error",Y),this.on("error",x),a&&(a._readyState=H.CLOSING,this.destroy())}Object.defineProperty(H,"CONNECTING",{enumerable:!0,value:F.indexOf("CONNECTING")}),Object.defineProperty(H.prototype,"CONNECTING",{enumerable:!0,value:F.indexOf("CONNECTING")}),Object.defineProperty(H,"OPEN",{enumerable:!0,value:F.indexOf("OPEN")}),Object.defineProperty(H.prototype,"OPEN",{enumerable:!0,value:F.indexOf("OPEN")}),Object.defineProperty(H,"CLOSING",{enumerable:!0,value:F.indexOf("CLOSING")}),Object.defineProperty(H.prototype,"CLOSING",{enumerable:!0,value:F.indexOf("CLOSING")}),Object.defineProperty(H,"CLOSED",{enumerable:!0,value:F.indexOf("CLOSED")}),Object.defineProperty(H.prototype,"CLOSED",{enumerable:!0,value:F.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(H.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(H.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[t])return b[u];return null},set(b){for(let b of this.listeners(a))if(b[t]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[t]:!0})}})}),H.prototype.addEventListener=y,H.prototype.removeEventListener=z,b.exports=H},62219,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(88686);b.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},67691,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(21517),{Duplex:f}=a.r(88947),{createHash:g}=a.r(54799),h=a.r(16193),i=a.r(10976),j=a.r(62219),k=a.r(36705),{GUID:l,kWebSocket:m}=a.r(17376),n=/^[+/0-9A-Za-z]{22}==$/;function o(a){a._state=2,a.emit("close")}function p(){this.destroy()}function q(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function r(a,b,c,d,e){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,r),a.emit("wsClientError",d,c,b)}else q(c,d,e)}b.exports=class extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){let a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(o,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(o,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{o(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",p);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void r(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void r(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!n.test(e))return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==g&&13!==g)return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(a))return void q(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){r(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],o={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),o[i.extensionName]=c)}catch(c){r(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return q(b,g||401,h,i);this.completeUpgrade(o,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return q(b,401)}this.completeUpgrade(o,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[m])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return q(e,503);let k=g("sha1").update(b+l).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],r=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),r._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",p),r.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(r),r.on("close",()=>{this.clients.delete(r),this._shouldEmitClose&&!this.clients.size&&process.nextTick(o,this)})),j(r,d)}}},34349,(a,b,c)=>{b.exports=function(b){function c(a){let b,e,f,g=null;function h(...a){if(!h.enabled)return;let d=Number(new Date);h.diff=d-(b||d),h.prev=b,h.curr=d,b=d,a[0]=c.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");let e=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(b,d)=>{if("%%"===b)return"%";e++;let f=c.formatters[d];if("function"==typeof f){let c=a[e];b=f.call(h,c),a.splice(e,1),e--}return b}),c.formatArgs.call(h,a),(h.log||c.log).apply(h,a)}return h.namespace=a,h.useColors=c.useColors(),h.color=c.selectColor(a),h.extend=d,h.destroy=c.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(e!==c.namespaces&&(e=c.namespaces,f=c.enabled(a)),f),set:a=>{g=a}}),"function"==typeof c.init&&c.init(h),h}function d(a,b){let d=c(this.namespace+(void 0===b?":":b)+a);return d.log=this.log,d}function e(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}return c.debug=c,c.default=c,c.coerce=function(a){return a instanceof Error?a.stack||a.message:a},c.disable=function(){let a=[...c.names.map(e),...c.skips.map(e).map(a=>"-"+a)].join(",");return c.enable(""),a},c.enable=function(a){let b;c.save(a),c.namespaces=a,c.names=[],c.skips=[];let d=("string"==typeof a?a:"").split(/[\s,]+/),e=d.length;for(b=0;b<e;b++)d[b]&&("-"===(a=d[b].replace(/\*/g,".*?"))[0]?c.skips.push(RegExp("^"+a.slice(1)+"$")):c.names.push(RegExp("^"+a+"$")))},c.enabled=function(a){let b,d;if("*"===a[a.length-1])return!0;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1},c.humanize=a.r(84425),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(a=>{c[a]=b[a]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(a){let b=0;for(let c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c)|0;return c.colors[Math.abs(b)%c.colors.length]},c.enable(c.load()),c}},30204,(a,b,c)=>{let d=a.r(70722),e=a.r(24361);c.init=function(a){a.inspectOpts={};let b=Object.keys(c.inspectOpts);for(let d=0;d<b.length;d++)a.inspectOpts[b[d]]=c.inspectOpts[b[d]]},c.log=function(...a){return process.stderr.write(e.formatWithOptions(c.inspectOpts,...a)+"\n")},c.formatArgs=function(a){let{namespace:d,useColors:e}=this;if(e){let c=this.color,e="\x1b[3"+(c<8?c:"8;5;"+c),f=`  ${e};1m${d} \u001B[0m`;a[0]=f+a[0].split("\n").join("\n"+f),a.push(e+"m+"+b.exports.humanize(this.diff)+"\x1b[0m")}else a[0]=(c.inspectOpts.hideDate?"":new Date().toISOString()+" ")+d+" "+a[0]},c.save=function(a){a?process.env.DEBUG=a:delete process.env.DEBUG},c.load=function(){return process.env.DEBUG},c.useColors=function(){return"colors"in c.inspectOpts?!!c.inspectOpts.colors:d.isatty(process.stderr.fd)},c.destroy=e.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),c.colors=[6,2,3,4,5,1];try{let b=a.r(73083);b&&(b.stderr||b).level>=2&&(c.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(a){}c.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,b)=>{let c=b.substring(6).toLowerCase().replace(/_([a-z])/g,(a,b)=>b.toUpperCase()),d=process.env[b];return d=!!/^(yes|on|true|enabled)$/i.test(d)||!/^(no|off|false|disabled)$/i.test(d)&&("null"===d?null:Number(d)),a[c]=d,a},{}),b.exports=a.r(34349)(c);let{formatters:f}=b.exports;f.o=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts).split("\n").map(a=>a.trim()).join(" ")},f.O=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts)}},42390,(a,b,c)=>{c.formatArgs=function(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+b.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;a.splice(1,0,c,"color: inherit");let d=0,e=0;a[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(e=d))}),a.splice(e,0,c)},c.save=function(a){try{a?c.storage.setItem("debug",a):c.storage.removeItem("debug")}catch(a){}},c.load=function(){let a;try{a=c.storage.getItem("debug")}catch(a){}return!a&&"undefined"!=typeof process&&"env"in process&&(a=process.env.DEBUG),a},c.useColors=function(){let a;return!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof navigator&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},c.storage=function(){try{return localStorage}catch(a){}}(),c.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],c.log=console.debug||console.log||(()=>{}),b.exports=a.r(34349)(c);let{formatters:d}=b.exports;d.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},14016,(a,b,c)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?b.exports=a.r(42390):b.exports=a.r(30204)},52841,(a,b,c)=>{b.exports=function(b){function c(a){let b,e,f,g=null;function h(...a){if(!h.enabled)return;let d=Number(new Date);h.diff=d-(b||d),h.prev=b,h.curr=d,b=d,a[0]=c.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");let e=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(b,d)=>{if("%%"===b)return"%";e++;let f=c.formatters[d];if("function"==typeof f){let c=a[e];b=f.call(h,c),a.splice(e,1),e--}return b}),c.formatArgs.call(h,a),(h.log||c.log).apply(h,a)}return h.namespace=a,h.useColors=c.useColors(),h.color=c.selectColor(a),h.extend=d,h.destroy=c.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(e!==c.namespaces&&(e=c.namespaces,f=c.enabled(a)),f),set:a=>{g=a}}),"function"==typeof c.init&&c.init(h),h}function d(a,b){let d=c(this.namespace+(void 0===b?":":b)+a);return d.log=this.log,d}function e(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}return c.debug=c,c.default=c,c.coerce=function(a){return a instanceof Error?a.stack||a.message:a},c.disable=function(){let a=[...c.names.map(e),...c.skips.map(e).map(a=>"-"+a)].join(",");return c.enable(""),a},c.enable=function(a){let b;c.save(a),c.namespaces=a,c.names=[],c.skips=[];let d=("string"==typeof a?a:"").split(/[\s,]+/),e=d.length;for(b=0;b<e;b++)d[b]&&("-"===(a=d[b].replace(/\*/g,".*?"))[0]?c.skips.push(RegExp("^"+a.slice(1)+"$")):c.names.push(RegExp("^"+a+"$")))},c.enabled=function(a){let b,d;if("*"===a[a.length-1])return!0;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1},c.humanize=a.r(84425),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(a=>{c[a]=b[a]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(a){let b=0;for(let c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c)|0;return c.colors[Math.abs(b)%c.colors.length]},c.enable(c.load()),c}},38170,(a,b,c)=>{let d=a.r(70722),e=a.r(24361);c.init=function(a){a.inspectOpts={};let b=Object.keys(c.inspectOpts);for(let d=0;d<b.length;d++)a.inspectOpts[b[d]]=c.inspectOpts[b[d]]},c.log=function(...a){return process.stderr.write(e.formatWithOptions(c.inspectOpts,...a)+"\n")},c.formatArgs=function(a){let{namespace:d,useColors:e}=this;if(e){let c=this.color,e="\x1b[3"+(c<8?c:"8;5;"+c),f=`  ${e};1m${d} \u001B[0m`;a[0]=f+a[0].split("\n").join("\n"+f),a.push(e+"m+"+b.exports.humanize(this.diff)+"\x1b[0m")}else a[0]=(c.inspectOpts.hideDate?"":new Date().toISOString()+" ")+d+" "+a[0]},c.save=function(a){a?process.env.DEBUG=a:delete process.env.DEBUG},c.load=function(){return process.env.DEBUG},c.useColors=function(){return"colors"in c.inspectOpts?!!c.inspectOpts.colors:d.isatty(process.stderr.fd)},c.destroy=e.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),c.colors=[6,2,3,4,5,1];try{let b=a.r(73083);b&&(b.stderr||b).level>=2&&(c.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(a){}c.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,b)=>{let c=b.substring(6).toLowerCase().replace(/_([a-z])/g,(a,b)=>b.toUpperCase()),d=process.env[b];return d=!!/^(yes|on|true|enabled)$/i.test(d)||!/^(no|off|false|disabled)$/i.test(d)&&("null"===d?null:Number(d)),a[c]=d,a},{}),b.exports=a.r(52841)(c);let{formatters:f}=b.exports;f.o=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts).split("\n").map(a=>a.trim()).join(" ")},f.O=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts)}},38249,(a,b,c)=>{c.formatArgs=function(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+b.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;a.splice(1,0,c,"color: inherit");let d=0,e=0;a[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(e=d))}),a.splice(e,0,c)},c.save=function(a){try{a?c.storage.setItem("debug",a):c.storage.removeItem("debug")}catch(a){}},c.load=function(){let a;try{a=c.storage.getItem("debug")}catch(a){}return!a&&"undefined"!=typeof process&&"env"in process&&(a=process.env.DEBUG),a},c.useColors=function(){let a;return!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof navigator&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},c.storage=function(){try{return localStorage}catch(a){}}(),c.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],c.log=console.debug||console.log||(()=>{}),b.exports=a.r(52841)(c);let{formatters:d}=b.exports;d.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},19031,(a,b,c)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?b.exports=a.r(38249):b.exports=a.r(38170)},34867,a=>{"use strict";let b,c;a.s(["default",()=>cb],34867);var d,e=a.i(87924),f=a.i(72131),g=a.i(50944),h=a.i(3130),i=a.i(40695),j=a.i(54161),k=a.i(21958),l=a.i(2150),m=a.i(65602),n=a.i(91647),o=a.i(27374),p=a.i(83077),q=a.i(50429),r=a.i(73570),s=a.i(41675),t=a.i(1027),u=a.i(3314),v=a.i(16106),w=a.i(91361),x=a.i(90669),y=a.i(19221),z=a.i(97895),A=a.i(31686);function B(){var a;let{myRoster:b,rosters:c,currentLeague:d,currentWeek:f,leagueUsers:g,players:i,getPlayer:k,seasonMatchups:n}=(0,A.default)();if(!b||!d)return null;let o=[...c].sort((a,b)=>{let c=a.settings?.wins||0,d=a.settings?.losses||0,e=b.settings?.wins||0,f=b.settings?.losses||0,g=c/Math.max(c+d,1),h=e/Math.max(e+f,1);return g!==h?h-g:(b.settings?.fpts||0)-(a.settings?.fpts||0)}),B=o.findIndex(a=>a.roster_id===b.roster_id)+1,C=o[0],D=Math.ceil(.5*c.length),E=b.settings?.wins||0,F=b.settings?.losses||0,G=((C?.settings?.wins||0)-(C?.settings?.losses||0)-(E-F))/2,H=B>D?(o[D-1]?.settings?.wins||0)-E:0,I=E+F+(b.settings?.ties||0),J=I>0?E/I*100:0,K=[];if(n&&n.size>0){let a=Math.min(3,f-1);for(let c=f-a;c<f;c++){let a=n.get(c);if(a){let c=a.find(a=>a.roster_id===b.roster_id),d=a.find(a=>a.matchup_id===c?.matchup_id&&a.roster_id!==c?.roster_id);c&&d&&K.push(c.points>d.points?"W":"L")}}}else if(0===F&&E>0)for(let a=0;a<Math.min(E,3);a++)K.push("W");else if(0===E&&F>0)for(let a=0;a<Math.min(F,3);a++)K.push("L");let L=K.filter(a=>"W"===a).length,M="medium",N=(b.settings?.fpts||0)/Math.max(I,1);b.settings?.fpts_against;let O=c.reduce((a,b)=>a+(b.settings?.fpts||0),0)/c.length/Math.max(I,1),P=new Map;b.players.forEach(a=>{let b=k(a);if(b?.team){let a={KC:6,BUF:7,SF:9,DAL:7,PHI:10,MIA:6,GB:6,MIN:13,DET:9,CHI:7}[b.team];a&&(P.has(a)||P.set(a,[]),P.get(a).push(`${b.first_name} ${b.last_name}`))}});let Q=Array.from(P.entries()).filter(([a])=>a>=f&&a<=f+2).sort(([a],[b])=>a-b),R=o[5];return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,e.jsx)(p.Trophy,{className:"h-3 w-3"}),"Record"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsxs)("div",{className:(0,z.cn)("text-2xl font-bold",(a=J/100)>=.7?"text-green-500":a>=.5?"text-yellow-500":a>=.3?"text-orange-500":"text-red-500"),children:[E,"-",F,(b.settings?.ties||0)>0&&`-${b.settings.ties}`]}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:[J.toFixed(0),"% Win Rate"]})]})]}),(0,e.jsxs)(h.Card,{className:(0,z.cn)(G<=0?"text-green-500 bg-green-500/10":G<=2?"text-yellow-500 bg-yellow-500/10":G<=4?"text-orange-500 bg-orange-500/10":"text-red-500 bg-red-500/10"),children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-1",children:[G<=0?(0,e.jsx)(p.Trophy,{className:"h-3 w-3"}):(0,e.jsx)(q.Target,{className:"h-3 w-3"}),"vs 1st Place"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:G<=0?(0,e.jsxs)("span",{className:"flex items-center gap-1",children:["Leader! ",(0,e.jsx)(p.Trophy,{className:"h-4 w-4 text-yellow-500"})]}):`-${G.toFixed(1)} GB`}),(0,e.jsxs)("div",{className:"text-xs opacity-75",children:["Rank #",B," of ",c.length]})]})]}),(0,e.jsxs)(h.Card,{className:(0,z.cn)(B<=D?"text-green-500 bg-green-500/10":H<=1?"text-yellow-500 bg-yellow-500/10":H<=2?"text-orange-500 bg-orange-500/10":"text-red-500 bg-red-500/10"),children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,e.jsx)(u.Shield,{className:"h-3 w-3"}),"Playoff Status"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:B<=D?(0,e.jsxs)("span",{className:"flex items-center gap-1",children:["IN ",(0,e.jsx)(u.Shield,{className:"h-4 w-4"})]}):`-${H} GB`}),(0,e.jsxs)("div",{className:"text-xs opacity-75",children:["Top ",D," qualify"]})]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,e.jsx)(t.Zap,{className:"h-3 w-3"}),"Points For"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsx)("div",{className:(0,z.cn)("text-2xl font-bold",((a,b,c,d=!1)=>d?a<=b?"text-green-500":a<=c?"text-yellow-500":"text-red-500":a>=b?"text-green-500":a>=c?"text-yellow-500":"text-red-500")(N,1.1*O,.9*O)),children:N.toFixed(1)}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:[N>O?"+":"",(N-O).toFixed(1)," vs avg"]})]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,e.jsx)(x.Activity,{className:"h-3 w-3"}),"Form"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[L>=2&&(0,e.jsx)(v.Flame,{className:"h-5 w-5 text-orange-500"}),L<=1&&(0,e.jsx)(w.Snowflake,{className:"h-5 w-5 text-blue-500"}),(0,e.jsx)("span",{className:"text-2xl font-bold",children:K.join("-")})]}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Last 3 weeks"})]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-1",children:[(0,e.jsx)(s.Calendar,{className:"h-3 w-3"}),"SOS"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsx)("div",{className:(0,z.cn)("text-2xl font-bold","text-yellow-500"),children:M.toUpperCase()}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:[14-f," games left"]})]})]})]}),R&&(0,e.jsxs)(h.Card,{className:"bg-gradient-to-r from-primary/5 to-background",children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,e.jsx)(y.Swords,{className:"h-4 w-4"}),"Next Opponent - Week ",f+1]})}),(0,e.jsx)(h.CardContent,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-semibold",children:g.get(R.owner_id)?.display_name||"Opponent"}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Rank #",6," • ","58","% Win Rate"]})]}),(0,e.jsx)(j.Badge,{variant:"secondary",children:"Fair"})]})})]}),Q.length>0&&(0,e.jsxs)(m.Alert,{variant:"destructive",children:[(0,e.jsx)(r.AlertTriangle,{className:"h-4 w-4"}),(0,e.jsxs)(m.AlertDescription,{children:[(0,e.jsx)("div",{className:"font-medium mb-1",children:"Upcoming Bye Weeks:"}),Q.map(([a,b])=>(0,e.jsxs)("div",{className:"text-sm",children:["Week ",a,": ",b.slice(0,3).join(", "),b.length>3&&` +${b.length-3} more`]},a))]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsx)(h.CardTitle,{className:"text-sm",children:"Season Progress"})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsx)(l.Progress,{value:f/14*100,className:"h-2"}),(0,e.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,e.jsxs)("span",{children:["Week ",f]}),(0,e.jsxs)("span",{children:[14-f," weeks until playoffs"]})]})]})]})]})}var C=a.i(30553),D=a.i(77192),E=a.i(50104),F=a.i(70121),G=a.i(46872),H=a.i(7827),I=a.i(72752),J=a.i(30656),K=a.i(7554),L="ScrollArea",[M,N]=(0,E.createContextScope)(L),[O,P]=M(L),Q=f.forwardRef((a,b)=>{let{__scopeScrollArea:c,type:d="hover",dir:g,scrollHideDelay:h=600,...i}=a,[j,k]=f.useState(null),[l,m]=f.useState(null),[n,o]=f.useState(null),[p,q]=f.useState(null),[r,s]=f.useState(null),[t,u]=f.useState(0),[v,w]=f.useState(0),[x,y]=f.useState(!1),[z,A]=f.useState(!1),B=(0,F.useComposedRefs)(b,a=>k(a)),D=(0,H.useDirection)(g);return(0,e.jsx)(O,{scope:c,type:d,dir:D,scrollHideDelay:h,scrollArea:j,viewport:l,onViewportChange:m,content:n,onContentChange:o,scrollbarX:p,onScrollbarXChange:q,scrollbarXEnabled:x,onScrollbarXEnabledChange:y,scrollbarY:r,onScrollbarYChange:s,scrollbarYEnabled:z,onScrollbarYEnabledChange:A,onCornerWidthChange:u,onCornerHeightChange:w,children:(0,e.jsx)(C.Primitive.div,{dir:D,...i,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":t+"px","--radix-scroll-area-corner-height":v+"px",...a.style}})})});Q.displayName=L;var R="ScrollAreaViewport",S=f.forwardRef((a,b)=>{let{__scopeScrollArea:c,children:d,nonce:g,...h}=a,i=P(R,c),j=f.useRef(null),k=(0,F.useComposedRefs)(b,j,i.onViewportChange);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:g}),(0,e.jsx)(C.Primitive.div,{"data-radix-scroll-area-viewport":"",...h,ref:k,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...a.style},children:(0,e.jsx)("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:d})})]})});S.displayName=R;var T="ScrollAreaScrollbar",U=f.forwardRef((a,b)=>{let{forceMount:c,...d}=a,g=P(T,a.__scopeScrollArea),{onScrollbarXEnabledChange:h,onScrollbarYEnabledChange:i}=g,j="horizontal"===a.orientation;return f.useEffect(()=>(j?h(!0):i(!0),()=>{j?h(!1):i(!1)}),[j,h,i]),"hover"===g.type?(0,e.jsx)(V,{...d,ref:b,forceMount:c}):"scroll"===g.type?(0,e.jsx)(W,{...d,ref:b,forceMount:c}):"auto"===g.type?(0,e.jsx)(X,{...d,ref:b,forceMount:c}):"always"===g.type?(0,e.jsx)(Y,{...d,ref:b}):null});U.displayName=T;var V=f.forwardRef((a,b)=>{let{forceMount:c,...d}=a,g=P(T,a.__scopeScrollArea),[h,i]=f.useState(!1);return f.useEffect(()=>{let a=g.scrollArea,b=0;if(a){let c=()=>{window.clearTimeout(b),i(!0)},d=()=>{b=window.setTimeout(()=>i(!1),g.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(b),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[g.scrollArea,g.scrollHideDelay]),(0,e.jsx)(D.Presence,{present:c||h,children:(0,e.jsx)(X,{"data-state":h?"visible":"hidden",...d,ref:b})})}),W=f.forwardRef((a,b)=>{var c;let{forceMount:d,...g}=a,h=P(T,a.__scopeScrollArea),i="horizontal"===a.orientation,j=ao(()=>l("SCROLL_END"),100),[k,l]=(c={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},f.useReducer((a,b)=>c[a][b]??a,"hidden"));return f.useEffect(()=>{if("idle"===k){let a=window.setTimeout(()=>l("HIDE"),h.scrollHideDelay);return()=>window.clearTimeout(a)}},[k,h.scrollHideDelay,l]),f.useEffect(()=>{let a=h.viewport,b=i?"scrollLeft":"scrollTop";if(a){let c=a[b],d=()=>{let d=a[b];c!==d&&(l("SCROLL"),j()),c=d};return a.addEventListener("scroll",d),()=>a.removeEventListener("scroll",d)}},[h.viewport,i,l,j]),(0,e.jsx)(D.Presence,{present:d||"hidden"!==k,children:(0,e.jsx)(Y,{"data-state":"hidden"===k?"hidden":"visible",...g,ref:b,onPointerEnter:(0,K.composeEventHandlers)(a.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:(0,K.composeEventHandlers)(a.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),X=f.forwardRef((a,b)=>{let c=P(T,a.__scopeScrollArea),{forceMount:d,...g}=a,[h,i]=f.useState(!1),j="horizontal"===a.orientation,k=ao(()=>{if(c.viewport){let a=c.viewport.offsetWidth<c.viewport.scrollWidth,b=c.viewport.offsetHeight<c.viewport.scrollHeight;i(j?a:b)}},10);return ap(c.viewport,k),ap(c.content,k),(0,e.jsx)(D.Presence,{present:d||h,children:(0,e.jsx)(Y,{"data-state":h?"visible":"hidden",...g,ref:b})})}),Y=f.forwardRef((a,b)=>{let{orientation:c="vertical",...d}=a,g=P(T,a.__scopeScrollArea),h=f.useRef(null),i=f.useRef(0),[j,k]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=aj(j.viewport,j.content),m={...d,sizes:j,onSizesChange:k,hasThumb:!!(l>0&&l<1),onThumbChange:a=>h.current=a,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:a=>i.current=a};function n(a,b){return function(a,b,c,d="ltr"){let e=ak(c),f=b||e/2,g=c.scrollbar.paddingStart+f,h=c.scrollbar.size-c.scrollbar.paddingEnd-(e-f),i=c.content-c.viewport;return am([g,h],"ltr"===d?[0,i]:[-1*i,0])(a)}(a,i.current,j,b)}return"horizontal"===c?(0,e.jsx)(Z,{...m,ref:b,onThumbPositionChange:()=>{if(g.viewport&&h.current){let a=al(g.viewport.scrollLeft,j,g.dir);h.current.style.transform=`translate3d(${a}px, 0, 0)`}},onWheelScroll:a=>{g.viewport&&(g.viewport.scrollLeft=a)},onDragScroll:a=>{g.viewport&&(g.viewport.scrollLeft=n(a,g.dir))}}):"vertical"===c?(0,e.jsx)($,{...m,ref:b,onThumbPositionChange:()=>{if(g.viewport&&h.current){let a=al(g.viewport.scrollTop,j);h.current.style.transform=`translate3d(0, ${a}px, 0)`}},onWheelScroll:a=>{g.viewport&&(g.viewport.scrollTop=a)},onDragScroll:a=>{g.viewport&&(g.viewport.scrollTop=n(a))}}):null}),Z=f.forwardRef((a,b)=>{let{sizes:c,onSizesChange:d,...g}=a,h=P(T,a.__scopeScrollArea),[i,j]=f.useState(),k=f.useRef(null),l=(0,F.useComposedRefs)(b,k,h.onScrollbarXChange);return f.useEffect(()=>{k.current&&j(getComputedStyle(k.current))},[k]),(0,e.jsx)(ab,{"data-orientation":"horizontal",...g,ref:l,sizes:c,style:{bottom:0,left:"rtl"===h.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===h.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ak(c)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.x),onDragScroll:b=>a.onDragScroll(b.x),onWheelScroll:(b,c)=>{if(h.viewport){let d=h.viewport.scrollLeft+b.deltaX;a.onWheelScroll(d),function(a,b){return a>0&&a<b}(d,c)&&b.preventDefault()}},onResize:()=>{k.current&&h.viewport&&i&&d({content:h.viewport.scrollWidth,viewport:h.viewport.offsetWidth,scrollbar:{size:k.current.clientWidth,paddingStart:ai(i.paddingLeft),paddingEnd:ai(i.paddingRight)}})}})}),$=f.forwardRef((a,b)=>{let{sizes:c,onSizesChange:d,...g}=a,h=P(T,a.__scopeScrollArea),[i,j]=f.useState(),k=f.useRef(null),l=(0,F.useComposedRefs)(b,k,h.onScrollbarYChange);return f.useEffect(()=>{k.current&&j(getComputedStyle(k.current))},[k]),(0,e.jsx)(ab,{"data-orientation":"vertical",...g,ref:l,sizes:c,style:{top:0,right:"ltr"===h.dir?0:void 0,left:"rtl"===h.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ak(c)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.y),onDragScroll:b=>a.onDragScroll(b.y),onWheelScroll:(b,c)=>{if(h.viewport){let d=h.viewport.scrollTop+b.deltaY;a.onWheelScroll(d),function(a,b){return a>0&&a<b}(d,c)&&b.preventDefault()}},onResize:()=>{k.current&&h.viewport&&i&&d({content:h.viewport.scrollHeight,viewport:h.viewport.offsetHeight,scrollbar:{size:k.current.clientHeight,paddingStart:ai(i.paddingTop),paddingEnd:ai(i.paddingBottom)}})}})}),[_,aa]=M(T),ab=f.forwardRef((a,b)=>{let{__scopeScrollArea:c,sizes:d,hasThumb:g,onThumbChange:h,onThumbPointerUp:i,onThumbPointerDown:j,onThumbPositionChange:k,onDragScroll:l,onWheelScroll:m,onResize:n,...o}=a,p=P(T,c),[q,r]=f.useState(null),s=(0,F.useComposedRefs)(b,a=>r(a)),t=f.useRef(null),u=f.useRef(""),v=p.viewport,w=d.content-d.viewport,x=(0,G.useCallbackRef)(m),y=(0,G.useCallbackRef)(k),z=ao(n,10);function A(a){t.current&&l({x:a.clientX-t.current.left,y:a.clientY-t.current.top})}return f.useEffect(()=>{let a=a=>{let b=a.target;q?.contains(b)&&x(a,w)};return document.addEventListener("wheel",a,{passive:!1}),()=>document.removeEventListener("wheel",a,{passive:!1})},[v,q,w,x]),f.useEffect(y,[d,y]),ap(q,z),ap(p.content,z),(0,e.jsx)(_,{scope:c,scrollbar:q,hasThumb:g,onThumbChange:(0,G.useCallbackRef)(h),onThumbPointerUp:(0,G.useCallbackRef)(i),onThumbPositionChange:y,onThumbPointerDown:(0,G.useCallbackRef)(j),children:(0,e.jsx)(C.Primitive.div,{...o,ref:s,style:{position:"absolute",...o.style},onPointerDown:(0,K.composeEventHandlers)(a.onPointerDown,a=>{0===a.button&&(a.target.setPointerCapture(a.pointerId),t.current=q.getBoundingClientRect(),u.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),A(a))}),onPointerMove:(0,K.composeEventHandlers)(a.onPointerMove,A),onPointerUp:(0,K.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),document.body.style.webkitUserSelect=u.current,p.viewport&&(p.viewport.style.scrollBehavior=""),t.current=null})})})}),ac="ScrollAreaThumb",ad=f.forwardRef((a,b)=>{let{forceMount:c,...d}=a,f=aa(ac,a.__scopeScrollArea);return(0,e.jsx)(D.Presence,{present:c||f.hasThumb,children:(0,e.jsx)(ae,{ref:b,...d})})}),ae=f.forwardRef((a,b)=>{let{__scopeScrollArea:c,style:d,...g}=a,h=P(ac,c),i=aa(ac,c),{onThumbPositionChange:j}=i,k=(0,F.useComposedRefs)(b,a=>i.onThumbChange(a)),l=f.useRef(void 0),m=ao(()=>{l.current&&(l.current(),l.current=void 0)},100);return f.useEffect(()=>{let a=h.viewport;if(a){let b=()=>{m(),l.current||(l.current=an(a,j),j())};return j(),a.addEventListener("scroll",b),()=>a.removeEventListener("scroll",b)}},[h.viewport,m,j]),(0,e.jsx)(C.Primitive.div,{"data-state":i.hasThumb?"visible":"hidden",...g,ref:k,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...d},onPointerDownCapture:(0,K.composeEventHandlers)(a.onPointerDownCapture,a=>{let b=a.target.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top;i.onThumbPointerDown({x:c,y:d})}),onPointerUp:(0,K.composeEventHandlers)(a.onPointerUp,i.onThumbPointerUp)})});ad.displayName=ac;var af="ScrollAreaCorner",ag=f.forwardRef((a,b)=>{let c=P(af,a.__scopeScrollArea),d=!!(c.scrollbarX&&c.scrollbarY);return"scroll"!==c.type&&d?(0,e.jsx)(ah,{...a,ref:b}):null});ag.displayName=af;var ah=f.forwardRef((a,b)=>{let{__scopeScrollArea:c,...d}=a,g=P(af,c),[h,i]=f.useState(0),[j,k]=f.useState(0),l=!!(h&&j);return ap(g.scrollbarX,()=>{let a=g.scrollbarX?.offsetHeight||0;g.onCornerHeightChange(a),k(a)}),ap(g.scrollbarY,()=>{let a=g.scrollbarY?.offsetWidth||0;g.onCornerWidthChange(a),i(a)}),l?(0,e.jsx)(C.Primitive.div,{...d,ref:b,style:{width:h,height:j,position:"absolute",right:"ltr"===g.dir?0:void 0,left:"rtl"===g.dir?0:void 0,bottom:0,...a.style}}):null});function ai(a){return a?parseInt(a,10):0}function aj(a,b){let c=a/b;return isNaN(c)?0:c}function ak(a){let b=aj(a.viewport,a.content),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd;return Math.max((a.scrollbar.size-c)*b,18)}function al(a,b,c="ltr"){let d=ak(b),e=b.scrollbar.paddingStart+b.scrollbar.paddingEnd,f=b.scrollbar.size-e,g=b.content-b.viewport,h=(0,J.clamp)(a,"ltr"===c?[0,g]:[-1*g,0]);return am([0,g],[0,f-d])(h)}function am(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}var an=(a,b=()=>{})=>{let c={left:a.scrollLeft,top:a.scrollTop},d=0;return!function e(){let f={left:a.scrollLeft,top:a.scrollTop},g=c.left!==f.left,h=c.top!==f.top;(g||h)&&b(),c=f,d=window.requestAnimationFrame(e)}(),()=>window.cancelAnimationFrame(d)};function ao(a,b){let c=(0,G.useCallbackRef)(a),d=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(d.current),[]),f.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(c,b)},[c,b])}function ap(a,b){let c=(0,G.useCallbackRef)(b);(0,I.useLayoutEffect)(()=>{let b=0;if(a){let d=new ResizeObserver(()=>{cancelAnimationFrame(b),b=window.requestAnimationFrame(c)});return d.observe(a),()=>{window.cancelAnimationFrame(b),d.unobserve(a)}}},[a,c])}let aq=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(Q,{ref:d,className:(0,z.cn)("relative overflow-hidden",a),...c,children:[(0,e.jsx)(S,{className:"h-full w-full rounded-[inherit]",children:b}),(0,e.jsx)(ar,{}),(0,e.jsx)(ag,{})]}));aq.displayName=Q.displayName;let ar=f.forwardRef(({className:a,orientation:b="vertical",...c},d)=>(0,e.jsx)(U,{ref:d,orientation:b,className:(0,z.cn)("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,e.jsx)(ad,{className:"relative flex-1 rounded-full bg-border"})}));ar.displayName=U.displayName;var as=a.i(30654),at=a.i(24669),au=a.i(52495),av=a.i(41710);let aw=new class{async getFantasyNews(a=10){return[{id:"1",title:"Christian McCaffrey Returns to Practice",description:"CMC was seen at practice today, indicating he could return for Week "+new Date().getDate(),url:"https://example.com",source:"ESPN",publishedAt:new Date(Date.now()-72e5),category:"injury",players:["Christian McCaffrey"],teams:["SF"],impact:"high"},{id:"2",title:"Waiver Wire: Top Pickups for Week "+new Date().getDate(),description:"These players are must-adds from the waiver wire this week",url:"https://example.com",source:"FantasyPros",publishedAt:new Date(Date.now()-144e5),category:"waiver",impact:"medium"},{id:"3",title:"Breaking: Star WR Traded to Contender",description:"Major trade shakes up fantasy landscape as elite receiver finds new home",url:"https://example.com",source:"NFL Network",publishedAt:new Date(Date.now()-36e5),category:"trade",impact:"high"},{id:"4",title:"Week "+new Date().getDate()+" Start/Sit Analysis",description:"Expert recommendations for tough lineup decisions",url:"https://example.com",source:"RotoBaller",publishedAt:new Date(Date.now()-216e5),category:"analysis",impact:"medium"},{id:"5",title:"Injury Report: Key Players Questionable",description:"Several fantasy-relevant players listed as questionable for Sunday",url:"https://example.com",source:"Yahoo Sports",publishedAt:new Date(Date.now()-108e5),category:"injury",impact:"high"}].slice(0,a)}async getUpcomingGames(a){let b=a||Math.floor(Date.now()/6048e5)%18+1;return[{gameId:"1",week:b,homeTeam:"KC",awayTeam:"BUF",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:9,losses:2},awayRecord:{wins:8,losses:3},spread:-3,overUnder:48.5,homeProjectedScore:27,awayProjectedScore:24,difficulty:{home:"tough",away:"very-tough"}},{gameId:"2",week:b,homeTeam:"SF",awayTeam:"DAL",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:7,losses:4},awayRecord:{wins:8,losses:3},spread:-4.5,overUnder:45,homeProjectedScore:24,awayProjectedScore:21,difficulty:{home:"moderate",away:"tough"}},{gameId:"3",week:b,homeTeam:"MIA",awayTeam:"NYJ",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:8,losses:3},awayRecord:{wins:4,losses:7},spread:-7,overUnder:42,homeProjectedScore:28,awayProjectedScore:17,difficulty:{home:"easy",away:"very-tough"}},{gameId:"4",week:b,homeTeam:"GB",awayTeam:"MIN",gameTime:new Date(Date.now()+2592e5),homeRecord:{wins:6,losses:5},awayRecord:{wins:7,losses:4},spread:-1.5,overUnder:47,homeProjectedScore:24,awayProjectedScore:23,difficulty:{home:"moderate",away:"moderate"},weather:{temp:35,condition:"Snow",windSpeed:15}},{gameId:"5",week:b,homeTeam:"DET",awayTeam:"CHI",gameTime:new Date(Date.now()+3456e5),homeRecord:{wins:10,losses:1},awayRecord:{wins:3,losses:8},spread:-10.5,overUnder:44,homeProjectedScore:31,awayProjectedScore:17,difficulty:{home:"easy",away:"very-tough"}},{gameId:"6",week:b,homeTeam:"PHI",awayTeam:"WAS",gameTime:new Date(Date.now()+3456e5),homeRecord:{wins:9,losses:2},awayRecord:{wins:4,losses:7},spread:-8.5,overUnder:46,homeProjectedScore:30,awayProjectedScore:20,difficulty:{home:"easy",away:"tough"}}]}calculateMatchupDifficulty(a,b,c,d){let e=a.wins/(a.wins+a.losses),f=b.wins/(b.wins+b.losses);if(void 0!==d){let a=c?-d:d;return a>=7?"easy":a>=3?"moderate":a>=-3?"tough":"very-tough"}let g=(c?e+.05:e)-f;return g>=.3?"easy":g>=.1?"moderate":g>=-.1?"tough":"very-tough"}async getInjuryNews(){return(await this.getFantasyNews(20)).filter(a=>"injury"===a.category)}async getTradeNews(){return(await this.getFantasyNews(20)).filter(a=>"trade"===a.category)}async parseRSSFeed(a){return[]}async aggregateNews(){return this.getFantasyNews()}};class ax{cache=new Map;CACHE_DURATION=3e5;async getPlayerNews(a){let b=[];for(let c of a){let a=await this.searchPlayerNews(c);b.push(...a)}return Array.from(new Map(b.map(a=>[a.id,a])).values()).sort((a,b)=>b.publishedAt.getTime()-a.publishedAt.getTime())}async searchPlayerNews(a){let b=`player_${a}`,c=this.cache.get(b);if(c&&Date.now()-c.timestamp<this.CACHE_DURATION)return c.data;try{let[c,d,e]=await Promise.all([this.searchESPNNews(a),this.searchYahooNews(a),this.searchSleeperTrending(a)]),f=[...c,...d,...e];return this.cache.set(b,{data:f,timestamp:Date.now()}),f}catch(b){return console.error("Error fetching player news:",b),this.getFallbackNews(a)}}async searchESPNNews(a){try{let b=await fetch(`/api/news/espn?player=${encodeURIComponent(a)}`);if(!b.ok)throw Error("ESPN API failed");return(await b.json()).articles.map(b=>({id:`espn_${b.id}`,title:b.headline,description:b.description||b.headline,url:b.links?.web?.href||"#",source:"ESPN",publishedAt:new Date(b.published||Date.now()),category:this.categorizeArticle(b.headline),players:[a],impact:this.assessImpact(b.headline)}))}catch(a){return[]}}async searchYahooNews(a){try{let b=await fetch(`/api/news/yahoo?player=${encodeURIComponent(a)}`);if(!b.ok)throw Error("Yahoo API failed");return(await b.json()).items.map(b=>({id:`yahoo_${b.guid}`,title:b.title,description:b.summary||b.title,url:b.link,source:"Yahoo Sports",publishedAt:new Date(b.pubDate||Date.now()),category:this.categorizeArticle(b.title),players:[a],impact:this.assessImpact(b.title)}))}catch(a){return[]}}async searchSleeperTrending(a){try{let b=A.default.getState(),c=Array.from(b.players.values()).find(b=>`${b.first_name} ${b.last_name}`.toLowerCase()===a.toLowerCase());if(!c)return[];let d=await fetch("https://api.sleeper.app/v1/players/nfl/trending/add?lookback_hours=24&limit=100");if(!d.ok)throw Error("Sleeper API failed");let e=(await d.json()).find(a=>a.player_id===c.player_id);if(e)return[{id:`sleeper_trending_${c.player_id}_${Date.now()}`,title:`${a} is Trending on Sleeper`,description:`Added by ${e.count} teams in the last 24 hours`,url:"#",source:"Sleeper Trending",publishedAt:new Date,category:"waiver",players:[a],impact:e.count>1e3?"high":e.count>100?"medium":"low"}];return[]}catch(a){return[]}}categorizeArticle(a){let b=a.toLowerCase();return b.includes("injur")||b.includes("hurt")||b.includes("questionable")||b.includes("doubtful")?"injury":b.includes("trade")||b.includes("deal")?"trade":b.includes("waiver")||b.includes("pickup")||b.includes("add")||b.includes("drop")?"waiver":b.includes("start")||b.includes("sit")||b.includes("matchup")||b.includes("projection")?"analysis":"general"}assessImpact(a){let b=a.toLowerCase();return b.includes("breaking")||b.includes("out for season")||b.includes("ir")||b.includes("suspended")||b.includes("traded")||b.includes("released")?"high":b.includes("questionable")||b.includes("limited")||b.includes("game-time")||b.includes("waiver")?"medium":"low"}getFallbackNews(a){return[{id:`fallback_${a}_${Date.now()}`,title:`${a} - Latest Updates`,description:`Check the latest stats and projections for ${a}`,url:`https://www.google.com/search?q=${encodeURIComponent(a+" fantasy football news")}`,source:"Search Results",publishedAt:new Date,category:"general",players:[a],impact:"low"}]}async getRosterNews(){let{myRoster:a,players:b}=A.default.getState();if(!a||!a.players)return[];let c=[];for(let d of a.players){let a=b.get(d);a&&"DEF"!==a.position&&c.push(`${a.first_name} ${a.last_name}`)}let d=c.slice(0,10);return this.getPlayerNews(d)}async getLeagueWideNews(){try{let a=await fetch("/api/news/general");if(!a.ok)throw Error("General news API failed");return(await a.json()).articles}catch(a){return[{id:"general_1",title:"Week "+Math.ceil((Date.now()-new Date("2024-09-01").getTime())/6048e5)+" Fantasy Football Start/Sit",description:"Expert recommendations for this week's lineup decisions",url:"https://www.fantasypros.com/nfl/start/",source:"FantasyPros",publishedAt:new Date,category:"analysis",impact:"medium"},{id:"general_2",title:"Top Waiver Wire Pickups",description:"Players to target on the waiver wire this week",url:"https://www.espn.com/fantasy/football/",source:"ESPN",publishedAt:new Date(Date.now()-72e5),category:"waiver",impact:"medium"},{id:"general_3",title:"NFL Injury Report",description:"Latest injury updates for fantasy-relevant players",url:"https://www.nfl.com/injuries/",source:"NFL.com",publishedAt:new Date(Date.now()-144e5),category:"injury",impact:"high"}]}}}let ay=new ax;function az(){let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!0),[g,l]=(0,f.useState)("all"),{myRoster:m}=(0,A.default)();(0,f.useEffect)(()=>{n()},[m]);let n=async()=>{d(!0);try{let[a,c]=await Promise.all([ay.getRosterNews(),ay.getLeagueWideNews()]),d=[...a,...c].map(a=>({...a,publishedAt:a.publishedAt instanceof Date?a.publishedAt:new Date(a.publishedAt)})).sort((a,b)=>b.publishedAt.getTime()-a.publishedAt.getTime()).slice(0,20);b(d)}catch(a){console.error("Error loading news:",a),b(await aw.getFantasyNews(15))}d(!1)},o="all"===g?a:a.filter(a=>a.category===g);return(0,e.jsxs)(h.Card,{className:"h-full",children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(as.Newspaper,{className:"h-5 w-5 text-primary"}),(0,e.jsx)(h.CardTitle,{children:"Fantasy News"})]}),(0,e.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:n,children:"Refresh"})]}),(0,e.jsx)(h.CardDescription,{children:"Latest updates from top fantasy sources"})]}),(0,e.jsx)(h.CardContent,{children:(0,e.jsxs)(k.Tabs,{defaultValue:"all",className:"w-full",children:[(0,e.jsxs)(k.TabsList,{className:"grid w-full grid-cols-4",children:[(0,e.jsx)(k.TabsTrigger,{value:"all",children:"All"}),(0,e.jsxs)(k.TabsTrigger,{value:"injury",children:[(0,e.jsx)(r.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Injuries"]}),(0,e.jsxs)(k.TabsTrigger,{value:"trade",children:[(0,e.jsx)(at.TrendingUp,{className:"h-3 w-3 mr-1"}),"Trades"]}),(0,e.jsxs)(k.TabsTrigger,{value:"waiver",children:[(0,e.jsx)(x.Activity,{className:"h-3 w-3 mr-1"}),"Waivers"]})]}),(0,e.jsx)(aq,{className:"h-[400px] mt-4",children:(0,e.jsx)("div",{className:"space-y-3 pr-4",children:c?(0,e.jsx)("div",{className:"text-center py-8",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):o.length>0?o.map(a=>{var b;return(0,e.jsx)("div",{className:(0,z.cn)("p-3 rounded-lg border transition-all hover:bg-muted/50 cursor-pointer","high"===a.impact&&"border-red-500/50"),onClick:()=>window.open(a.url,"_blank"),children:(0,e.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,e.jsxs)(j.Badge,{className:(0,z.cn)("text-xs",(a=>{switch(a){case"injury":return"bg-red-500";case"trade":return"bg-purple-500";case"waiver":return"bg-blue-500";case"analysis":return"bg-green-500";default:return"bg-gray-500"}})(a.category)),children:[(a=>{switch(a){case"injury":return(0,e.jsx)(r.AlertTriangle,{className:"h-3 w-3"});case"trade":return(0,e.jsx)(at.TrendingUp,{className:"h-3 w-3"});case"waiver":return(0,e.jsx)(x.Activity,{className:"h-3 w-3"});default:return(0,e.jsx)(as.Newspaper,{className:"h-3 w-3"})}})(a.category),(0,e.jsx)("span",{className:"ml-1",children:a.category})]}),(b=a.impact)?(0,e.jsxs)(j.Badge,{variant:{high:"destructive",medium:"secondary",low:"outline"}[b],className:"text-xs",children:[(0,e.jsx)(t.Zap,{className:"h-3 w-3 mr-1"}),b," impact"]}):null,"high"===a.impact&&(0,e.jsx)(v.Flame,{className:"h-3 w-3 text-orange-500"})]}),(0,e.jsx)("h4",{className:"font-medium text-sm mb-1 line-clamp-2",children:a.title}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:a.description}),(0,e.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[(0,e.jsx)("span",{children:a.source}),(0,e.jsx)("span",{children:"•"}),(0,e.jsxs)("span",{className:"flex items-center gap-1",children:[(0,e.jsx)(av.Clock,{className:"h-3 w-3"}),(a=>{let b=Math.floor((Date.now()-a.getTime())/6e4);if(b<60)return`${b}m ago`;let c=Math.floor(b/60);return c<24?`${c}h ago`:`${Math.floor(c/24)}d ago`})(a.publishedAt)]}),a.players&&a.players.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsx)("span",{className:"font-medium",children:a.players.join(", ")})]})]})]}),(0,e.jsx)(au.ExternalLink,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]})},a.id)}):(0,e.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No news available"})})})]})})]})}function aA({week:a}){let{currentMatchups:b,rosters:c,myRoster:d,leagueUsers:g,currentWeek:i,currentLeague:k,fetchMatchups:l}=(0,A.default)(),[n,o]=(0,f.useState)([]),[p,q]=(0,f.useState)(!1);(0,f.useEffect)(()=>{k&&i&&s()},[k,i,a]);let s=async()=>{q(!0);try{let a={};b.forEach(b=>{a[b.matchup_id]||(a[b.matchup_id]=[]),a[b.matchup_id].push(b)}),o(Object.values(a))}catch(a){console.error("Failed to load matchups:",a)}finally{q(!1)}},t=(a,b)=>{let c=a?.settings?.wins||0,d=a?.settings?.losses||0,e=b?.settings?.wins||0,f=c/Math.max(c+d,1)-e/Math.max(e+(b?.settings?.losses||0),1);return f>=.3?"easy":f>=.1?"moderate":f>=-.1?"tough":"very-tough"},u=a=>{switch(a){case"easy":return"text-green-500 bg-green-500/10";case"moderate":return"text-yellow-500 bg-yellow-500/10";case"tough":return"text-orange-500 bg-orange-500/10";case"very-tough":return"text-red-500 bg-red-500/10";default:return"text-gray-500 bg-gray-500/10"}},v=a=>{switch(a){case"easy":return"😊";case"moderate":return"😐";case"tough":return"😰";case"very-tough":return"😱";default:return"🤔"}},w=a=>{switch(a){case"easy":return"Easy Matchup";case"moderate":return"Fair Matchup";case"tough":return"Tough Matchup";case"very-tough":return"Very Tough";default:return"Unknown"}},x=a=>{let b=a?.settings?.wins||0,c=a?.settings?.losses||0,d=a?.settings?.fpts||0,e=b+c;return 0===e?0:(b/e*100+d/e/10)/2};return(0,e.jsxs)(h.Card,{children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(y.Swords,{className:"h-5 w-5 text-primary"}),(0,e.jsx)(h.CardTitle,{children:"League Matchups"})]}),(0,e.jsxs)(j.Badge,{variant:"outline",children:["Week ",a||i]})]}),(0,e.jsx)(h.CardDescription,{children:"This week's matchups with difficulty analysis"})]}),(0,e.jsx)(h.CardContent,{children:p?(0,e.jsx)("div",{className:"text-center py-8",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):n.length>0?(0,e.jsx)("div",{className:"space-y-3",children:n.map((a,b)=>{if(!a||2!==a.length)return null;let[f,h]=a,i=c.find(a=>a.roster_id===f.roster_id),k=c.find(a=>a.roster_id===h.roster_id),l=i?.owner_id?g.get(i.owner_id):null,n=k?.owner_id?g.get(k.owner_id):null,o=i?.roster_id===d?.roster_id||k?.roster_id===d?.roster_id,p=t(i,k),q=t(k,i),s=x(i),y=x(k);return(0,e.jsxs)("div",{className:(0,z.cn)("p-3 rounded-lg border transition-all hover:shadow-md",o?"border-primary/50 bg-primary/5":"bg-background"),children:[(0,e.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,e.jsx)("div",{className:"flex items-center gap-2",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-semibold",children:l?.display_name||"Team 1"}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:[i?.settings?.wins||0,"-",i?.settings?.losses||0,i?.roster_id===d?.roster_id&&(0,e.jsx)(j.Badge,{variant:"secondary",className:"ml-2 text-xs",children:"YOU"})]})]})}),(0,e.jsxs)("div",{className:(0,z.cn)("px-2 py-1 rounded text-xs font-medium",u(p)),children:[(0,e.jsx)("span",{className:"mr-1",children:v(p)}),w(p)]})]}),(0,e.jsx)("div",{className:"text-center text-xs text-muted-foreground my-1",children:"vs"}),(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)("div",{className:"flex items-center gap-2",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-semibold",children:n?.display_name||"Team 2"}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:[k?.settings?.wins||0,"-",k?.settings?.losses||0,k?.roster_id===d?.roster_id&&(0,e.jsx)(j.Badge,{variant:"secondary",className:"ml-2 text-xs",children:"YOU"})]})]})}),(0,e.jsxs)("div",{className:(0,z.cn)("px-2 py-1 rounded text-xs font-medium",u(q)),children:[(0,e.jsx)("span",{className:"mr-1",children:v(q)}),w(q)]})]})]})}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,e.jsxs)("div",{className:"text-center p-2 bg-secondary/20 rounded",children:[(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Power Rating"}),(0,e.jsx)("div",{className:"font-bold",children:s.toFixed(1)})]}),(0,e.jsxs)("div",{className:"text-center p-2 bg-secondary/20 rounded",children:[(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Power Rating"}),(0,e.jsx)("div",{className:"font-bold",children:y.toFixed(1)})]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Avg Points:"})," ",((i?.settings?.fpts||0)/Math.max((i?.settings?.wins||0)+(i?.settings?.losses||0),1)).toFixed(1)]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Avg Points:"})," ",((k?.settings?.fpts||0)/Math.max((k?.settings?.wins||0)+(k?.settings?.losses||0),1)).toFixed(1)]})]}),o&&(0,e.jsxs)(m.Alert,{className:"mt-2",variant:i?.roster_id===d?.roster_id&&"easy"===p||k?.roster_id===d?.roster_id&&"easy"===q?"default":"destructive",children:[(0,e.jsx)(r.AlertTriangle,{className:"h-3 w-3"}),(0,e.jsx)(m.AlertDescription,{className:"text-xs",children:i?.roster_id===d?.roster_id?(0,e.jsxs)("span",{children:["You have a ",(0,e.jsx)("strong",{children:p})," matchup against ",n?.display_name]}):(0,e.jsxs)("span",{children:["You have a ",(0,e.jsx)("strong",{children:q})," matchup against ",l?.display_name]})})]})]},b)})}):(0,e.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No matchup data available"})})]})}var aB=a.i(60246),aC=a.i(5784),aD=a.i(67552);function aE(){let{myRoster:a,rosters:b,leagueUsers:c,players:d,currentMatchups:g,currentWeek:l,seasonMatchups:n,currentLeague:o,getPlayer:p}=(0,A.default)(),[q,s]=(0,f.useState)("RB"),[y,B]=(0,f.useState)(new Set);if(!a||!g)return null;let C=g.find(b=>b.roster_id===a.roster_id),D=g.find(a=>a.matchup_id===C?.matchup_id&&a.roster_id!==C?.roster_id),E=b.find(a=>a.roster_id===D?.roster_id),F=o?.scoring_settings||{},G=(a,b)=>{let c=p(a);if(!c)return null;let d=c.position,e=b||l,f=0;if(e===l){let b=g.find(b=>b.players?.includes(a));f=b?.players_points?.[a]||0}else if(n&&n.size>0){let b=n.get(e);if(b){let c=b.find(b=>b.players?.includes(a));f=c?.players_points?.[a]||0}}if("QB"===d){let a=f<10;return{pass_yd:Math.max(0,Math.floor(12*f)),pass_td:f>15?Math.floor(f/8):0,pass_int:+!!a,rush_yd:f>25?Math.floor(1.5*f):0,rush_td:+(f>30),pass_cmp:Math.floor(1.2*f),pass_att:Math.floor(1.8*f),pass_2pt:0}}if("RB"===d){let a=f>15?Math.floor(f/10):0;return{rush_yd:Math.max(0,Math.floor((f-6*a)*10)),rush_td:a,rec:f>10?Math.floor(f/5):0,rec_yd:f>10?Math.floor(2*f):0,rec_td:0,rush_att:Math.floor(1.5*f),fum_lost:+(f<5)}}if("WR"===d){let a=f>15?Math.floor(f/12):0,b=Math.max(0,Math.floor((f-6*a)*10));return{rec:Math.floor(f/3),rec_yd:b,rec_td:a,rec_tgt:Math.floor(f/2),rush_yd:0,rec_2pt:0}}if("TE"===d){let a=+(f>12);return{rec:Math.floor(f/2.5),rec_yd:Math.max(0,Math.floor((f-6*a)*10)),rec_td:a,rec_tgt:Math.floor(f/2)}}if(["LB","DL","DB","IDP"].includes(d)){let a=f>15;return{idp_tkl_solo:Math.floor(f/2),idp_tkl_ast:Math.floor(f/4),idp_sack:f>10?Math.floor(f/10):0,idp_int:+!!a,idp_ff:+(f>12),idp_fum_rec:0,idp_def_td:+(f>20),idp_pass_def:Math.floor(f/5),idp_tkl_loss:+(f>8)}}return{}},H=a=>{let b=p(a);if(!b)return null;let c=C?.players_points?.[a]||D?.players_points?.[a]||0,d=G(a,l),e=0,f=0,g=[],h=[];if(n&&n.size>0)for(let b=1;b<l;b++){let c=n.get(b);if(c){let d=c.find(b=>b.players?.includes(a));if(d){let c=d.players_points?.[a];if(void 0!==c){e+=c,f++,g.push(c);let d=G(a,b);d&&h.push(d)}}}}let i=f>0?e/f:0,j=g.slice(-3),k=j.length>0?j.reduce((a,b)=>a+b,0)/j.length:0,m={};if(h.length>0){let a=new Set;h.forEach(b=>Object.keys(b).forEach(b=>a.add(b))),a.forEach(a=>{let b=h.map(b=>b[a]||0);m[a]=b.reduce((a,b)=>a+b,0)/b.length})}let o="steady";k>=15&&k>1.3*i?o="hot":i>=10&&k<.6*i&&(o="cold");let q=Math.sqrt(g.length>0?g.reduce((a,b)=>a+Math.pow(b-i,2),0)/g.length:0);return{player:b,currentPoints:c,currentStats:d,seasonAvg:i,seasonStatAvgs:m,last3Avg:k,trend:o,consistency:q,gamesPlayed:f,projection:k>0?k:i,weeklyStats:h}},I=(a,b)=>a?a.players.map(a=>H(a)).filter(a=>!!a&&("FLEX"===b?["RB","WR","TE"].includes(a.player.position):"IDP"===b?["LB","DL","DB","IDP"].includes(a.player.position):"ROOKIES"===b?0===a.player.years_exp||1===a.player.years_exp:a.player.position===b)).sort((a,b)=>b.currentPoints-a.currentPoints):[],J=I(a,q),K=I(E,q),L=(d=>{let e=new Map;return b.forEach(b=>{let f=c.get(b.owner_id),g=b.roster_id===a.roster_id,h=b.roster_id===E?.roster_id;b.players.forEach(a=>{let c=H(a);if(c)("FLEX"===d?["RB","WR","TE"].includes(c.player.position):"IDP"===d?["LB","DL","DB","IDP"].includes(c.player.position):"ROOKIES"===d?0===c.player.years_exp||1===c.player.years_exp:c.player.position===d)&&e.set(a,{...c,owner:f?.display_name||"Unknown",ownerId:b.owner_id,rosterId:b.roster_id,isMyPlayer:g,isOpponent:h})})}),Array.from(e.values()).sort((a,b)=>b.currentPoints-a.currentPoints)})(q),M=J.reduce((a,b)=>a+b.seasonAvg,0),N=K.reduce((a,b)=>a+b.seasonAvg,0),O=M-N,P=(a,b)=>{if(!b)return[];let c=a.position;return"QB"===c?[{label:"Pass",value:`${b.pass_cmp||0}/${b.pass_att||0}`,key:"passing"},{label:"Yards",value:`${b.pass_yd||0}`,key:"pass_yd"},{label:"TD",value:`${b.pass_td||0}`,key:"pass_td",highlight:b.pass_td>0},{label:"INT",value:`${b.pass_int||0}`,key:"pass_int",negative:b.pass_int>0},{label:"Rush",value:`${b.rush_yd||0}`,key:"rush_yd"}]:"RB"===c?[{label:"Carries",value:`${b.rush_att||0}`,key:"rush_att"},{label:"Rush Yds",value:`${b.rush_yd||0}`,key:"rush_yd"},{label:"Rec",value:`${b.rec||0}`,key:"rec"},{label:"Rec Yds",value:`${b.rec_yd||0}`,key:"rec_yd"},{label:"TD",value:`${(b.rush_td||0)+(b.rec_td||0)}`,key:"td",highlight:(b.rush_td||0)+(b.rec_td||0)>0}]:"WR"===c||"TE"===c?[{label:"Targets",value:`${b.rec_tgt||0}`,key:"rec_tgt"},{label:"Rec",value:`${b.rec||0}`,key:"rec"},{label:"Yards",value:`${b.rec_yd||0}`,key:"rec_yd"},{label:"TD",value:`${b.rec_td||0}`,key:"rec_td",highlight:b.rec_td>0},{label:"Avg",value:b.rec>0?`${(b.rec_yd/b.rec).toFixed(1)}`:"0",key:"avg"}]:["LB","DL","DB","IDP"].includes(c)?[{label:"Tackles",value:`${(b.idp_tkl_solo||0)+(b.idp_tkl_ast||0)}`,key:"tackles"},{label:"Sacks",value:`${b.idp_sack||0}`,key:"idp_sack",highlight:b.idp_sack>0},{label:"INT",value:`${b.idp_int||0}`,key:"idp_int",highlight:b.idp_int>0},{label:"FF",value:`${b.idp_ff||0}`,key:"idp_ff",highlight:b.idp_ff>0},{label:"PD",value:`${b.idp_pass_def||0}`,key:"idp_pass_def"}]:[]},Q=({metrics:a,showOwner:b=!1})=>{let c,{player:d,currentPoints:f,currentStats:g,seasonAvg:h,seasonStatAvgs:k,last3Avg:m,trend:n,consistency:o,projection:p}=a,q=y.has(d.player_id),r=P(d,g);return(0,e.jsxs)("div",{className:(0,z.cn)("rounded-lg border transition-all",a.isMyPlayer&&"bg-primary/5 border-primary/20",a.isOpponent&&"bg-orange-500/5 border-orange-500/20",!a.isMyPlayer&&!a.isOpponent&&"bg-background"),children:[(0,e.jsxs)("div",{className:"p-3",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,e.jsx)("div",{className:"flex items-center gap-2 flex-1",children:(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[d.first_name," ",d.last_name,(0===d.years_exp||1===d.years_exp)&&(0,e.jsx)(j.Badge,{variant:"secondary",className:"text-xs h-4",children:"R"}),"hot"===n&&(0,e.jsx)(v.Flame,{className:"h-3 w-3 text-orange-500"}),"cold"===n&&(0,e.jsx)(w.Snowflake,{className:"h-3 w-3 text-blue-500"})]}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[(0,e.jsxs)("span",{children:[d.position," • ",d.team||"FA"]}),d.injury_status&&(0,e.jsx)(j.Badge,{variant:"destructive",className:"text-xs h-4",children:d.injury_status}),b&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsx)("span",{className:(0,z.cn)("font-medium",a.isMyPlayer&&"text-primary",a.isOpponent&&"text-orange-500"),children:a.owner})]})]})]})}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:(0,z.cn)("text-lg font-bold",f>=20&&"text-green-500",f>=15&&f<20&&"text-blue-500",f<5&&f>0&&"text-red-500"),children:f.toFixed(1)}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Week ",l]})]}),(0,e.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>(a=>{let b=new Set(y);b.has(a)?b.delete(a):b.add(a),B(b)})(d.player_id),children:q?(0,e.jsx)(aD.ChevronUp,{className:"h-4 w-4"}):(0,e.jsx)(aC.ChevronDown,{className:"h-4 w-4"})})]})]}),r.length>0&&(0,e.jsx)("div",{className:"grid grid-cols-5 gap-1 text-xs mb-2",children:r.map(a=>(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:a.label}),(0,e.jsx)("div",{className:(0,z.cn)("font-medium",a.highlight&&"text-green-500",a.negative&&"text-red-500"),children:a.value})]},a.key))}),(0,e.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Avg"}),(0,e.jsx)("div",{className:"font-medium",children:h.toFixed(1)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"L3"}),(0,e.jsx)("div",{className:(0,z.cn)("font-medium",m>1.1*h&&"text-green-500",m<.9*h&&"text-orange-500"),children:m.toFixed(1)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Proj"}),(0,e.jsx)("div",{className:"font-medium",children:p.toFixed(1)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Var"}),(0,e.jsx)("div",{className:(0,z.cn)("font-medium",o<5&&"text-green-500",o>10&&"text-red-500"),children:o.toFixed(1)})]})]})]}),q&&k&&(0,e.jsxs)("div",{className:"border-t p-3 bg-muted/30",children:[(0,e.jsxs)("div",{className:"text-xs font-medium mb-2 flex items-center gap-1",children:[(0,e.jsx)(x.Activity,{className:"h-3 w-3"}),"Season Averages"]}),(0,e.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:P(d,k).map(a=>(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsxs)("span",{className:"text-muted-foreground",children:[a.label,":"]}),(0,e.jsx)("span",{className:(0,z.cn)("font-medium",a.highlight&&"text-green-500",a.negative&&"text-red-500"),children:a.value})]},a.key))}),(0,e.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,e.jsx)("div",{className:"text-xs font-medium mb-1",children:"Points Breakdown"}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Based on league scoring: ",(c=0,Object.entries(g).forEach(([a,b])=>{let d=F[a];d&&b&&(c+=b*d)}),c).toFixed(1)," pts"]})]})]})]})};return(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,e.jsx)(aB.Users,{className:"h-5 w-5"}),"Positional Matchups"]}),(0,e.jsx)(h.CardDescription,{children:"Compare your players vs opponent and league by position"})]}),E&&(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsxs)("div",{className:"text-sm font-medium",children:["vs ",c.get(E.owner_id)?.display_name]}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Week ",l," Opponent"]})]})]})}),(0,e.jsx)(h.CardContent,{className:"space-y-4",children:(0,e.jsxs)(k.Tabs,{value:q,onValueChange:a=>s(a),children:[(0,e.jsxs)(k.TabsList,{className:"grid grid-cols-7 w-full",children:[(0,e.jsx)(k.TabsTrigger,{value:"QB",children:"QB"}),(0,e.jsx)(k.TabsTrigger,{value:"RB",children:"RB"}),(0,e.jsx)(k.TabsTrigger,{value:"WR",children:"WR"}),(0,e.jsx)(k.TabsTrigger,{value:"TE",children:"TE"}),(0,e.jsx)(k.TabsTrigger,{value:"FLEX",children:"FLEX"}),(0,e.jsx)(k.TabsTrigger,{value:"IDP",children:"IDP"}),(0,e.jsx)(k.TabsTrigger,{value:"ROOKIES",children:"Rookies"})]}),(0,e.jsxs)(k.TabsContent,{value:q,className:"space-y-4",children:["ROOKIES"!==q?(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e.jsxs)(h.Card,{className:"bg-primary/5 border-primary/20",children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm",children:["Your ",q,"s"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:M.toFixed(1)}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total avg points/week"})]})]}),(0,e.jsxs)(h.Card,{className:"bg-orange-500/5 border-orange-500/20",children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-sm",children:["Opponent ",q,"s"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:N.toFixed(1)}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total avg points/week"})]})]})]}):(0,e.jsx)(h.Card,{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20",children:(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsxs)(h.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,e.jsx)(Star,{className:"h-4 w-4 text-purple-500"}),"Rookie Comparison - Week ",l]}),(0,e.jsx)(h.CardDescription,{children:"First and second year players across your league"})]})}),Math.abs(O)>5&&(0,e.jsxs)(m.Alert,{variant:O>0?"default":"destructive",children:[(0,e.jsx)(r.AlertTriangle,{className:"h-4 w-4"}),(0,e.jsxs)(m.AlertDescription,{children:["You have a ",O>0?"significant advantage":"significant disadvantage","at ",q," (",O>0?"+":"",O.toFixed(1)," points/week)"]})]}),"ROOKIES"!==q&&(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[(0,e.jsx)(u.Shield,{className:"h-4 w-4 text-primary"}),"Your ",q,"s"]}),(0,e.jsx)("div",{className:"space-y-2",children:J.length>0?J.map(a=>(0,e.jsx)(Q,{metrics:a},a.player.player_id)):(0,e.jsxs)("div",{className:"text-sm text-muted-foreground p-3 border rounded-lg",children:["No ",q,"s on roster"]})})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[(0,e.jsx)(t.Zap,{className:"h-4 w-4 text-orange-500"}),"Opponent ",q,"s"]}),(0,e.jsx)("div",{className:"space-y-2",children:K.length>0?K.map(a=>(0,e.jsx)(Q,{metrics:a},a.player.player_id)):(0,e.jsxs)("div",{className:"text-sm text-muted-foreground p-3 border rounded-lg",children:["No ",q,"s on roster"]})})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("h3",{className:"font-medium mb-2",children:["All League ",q,"s"]}),(0,e.jsx)("div",{className:"space-y-2",children:L.slice(0,20).map(a=>(0,e.jsx)(Q,{metrics:a,showOwner:!0},a.player.player_id))})]})]})]})})]})}var aF=a.i(70106);let aG=(0,aF.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var aH=a.i(69520),aI=a.i(67453),aJ=a.i(62722);let aK=new class{SIMULATIONS=1e4;async calculatePlayoffProbabilities(a,b){let c=[];for(let d=0;d<this.SIMULATIONS;d++)c.push(this.simulateRestOfSeason(a,b));return{probabilities:this.calculateProbabilitiesFromSimulations(a,c,b.playoffTeams),totalSimulations:this.SIMULATIONS,avgPlayoffSpots:b.playoffTeams}}simulateRestOfSeason(a,b){let c=a.map(a=>({...a})),d=b.regularSeasonWeeks-b.currentWeek;for(let a=0;a<d;a++)this.createMatchupsForWeek(c,a).forEach(({team1:a,team2:b})=>{let c=this.simulateGame(a,b);c===a.teamId?(a.wins++,b.losses++):c===b.teamId?(b.wins++,a.losses++):(a.ties++,b.ties++);let d=this.generateGameScore(a),e=this.generateGameScore(b);a.pointsFor+=d,a.pointsAgainst+=e,b.pointsFor+=e,b.pointsAgainst+=d});return c}createMatchupsForWeek(a,b){let c=[],d=new Set;return a.forEach(e=>{if(d.has(e.teamId))return;let f=e.remainingSchedule[b],g=a.find(a=>a.teamId===f);g&&!d.has(g.teamId)&&(c.push({team1:e,team2:g}),d.add(e.teamId),d.add(g.teamId))}),c}simulateGame(a,b){let c=a.wins+a.losses+a.ties,d=b.wins+b.losses+b.ties,e=c>0?a.pointsFor/c:100,f=d>0?b.pointsFor/d:100,g=this.normalRandom(e,.2*e),h=this.normalRandom(f,.2*f);return 1>Math.abs(g-h)?null:g>h?a.teamId:b.teamId}generateGameScore(a){let b=a.wins+a.losses+a.ties,c=b>0?a.pointsFor/b:100;return Math.max(50,this.normalRandom(c,.15*c))}normalRandom(a,b){let c=0,d=0;for(;0===c;)c=Math.random();for(;0===d;)d=Math.random();return Math.sqrt(-2*Math.log(c))*Math.cos(2*Math.PI*d)*b+a}calculateProbabilitiesFromSimulations(a,b,c){let d=new Map;return a.forEach(a=>{d.set(a.teamId,{playoffAppearances:0,championships:0,totalWins:0,totalLosses:0})}),b.forEach(a=>{[...a].sort((a,b)=>{let c=a.wins/Math.max(a.wins+a.losses+a.ties,1),d=b.wins/Math.max(b.wins+b.losses+b.ties,1);return c!==d?d-c:b.pointsFor-a.pointsFor}).slice(0,c).forEach((a,b)=>{let e=d.get(a.teamId);e.playoffAppearances++,0===b?e.championships+=.3:b<c/2?e.championships+=.2:e.championships+=.1}),a.forEach(a=>{let b=d.get(a.teamId);b.totalWins+=a.wins,b.totalLosses+=a.losses})}),a.map(b=>{let e=d.get(b.teamId);return b.wins,b.losses,b.ties,{teamId:b.teamId,teamName:`Team ${b.teamId}`,currentRecord:`${b.wins}-${b.losses}${b.ties>0?`-${b.ties}`:""}`,playoffProbability:e.playoffAppearances/this.SIMULATIONS*100,championshipProbability:e.championships/this.SIMULATIONS*100,projectedWins:e.totalWins/this.SIMULATIONS,projectedLosses:e.totalLosses/this.SIMULATIONS,strengthOfSchedule:this.calculateStrengthOfSchedule(b,a),clinchScenarios:this.getCliinchScenarios(b,a,c),eliminationScenarios:this.getEliminationScenarios(b,a,c)}})}calculateStrengthOfSchedule(a,b){if(0===a.remainingSchedule.length)return .5;let c=0,d=0;return a.remainingSchedule.forEach(a=>{let e=b.find(b=>b.teamId===a);if(e){let a=e.wins+e.losses+e.ties;a>0&&(c+=e.wins/a,d++)}}),d>0?c/d:.5}getCliinchScenarios(a,b,c){let d=[],e=a.remainingSchedule.length;if(0===e)return d;a.wins;let f=a.wins+a.losses+a.ties,g=f>0?a.wins/f:0;return g>.7?d.push(`Win ${Math.ceil(.6*e)} of next ${e} games`):g>.5?d.push(`Win ${Math.ceil(.8*e)} of next ${e} games`):d.push(`Win all remaining ${e} games`),d}getEliminationScenarios(a,b,c){let d=[],e=a.remainingSchedule.length;if(0===e)return d;let f=a.wins+a.losses+a.ties,g=f>0?a.wins/f:0;return g<.3?d.push(`Lose ${Math.ceil(.4*e)} of next ${e} games`):g<.5&&d.push(`Lose ${Math.ceil(.6*e)} of next ${e} games`),d}};function aL(){let[a,b]=(0,f.useState)(!1),[c,d]=(0,f.useState)(null),[g,n]=(0,f.useState)(null),{currentLeague:o,rosters:p,leagueUsers:s,myRoster:t,currentWeek:u}=(0,A.default)(),v=async()=>{if(!o||0===p.length)return void n("League data not available");b(!0),n(null);try{let a=p.map(a=>({teamId:a.roster_id,wins:a.settings?.wins||0,losses:a.settings?.losses||0,ties:a.settings?.ties||0,pointsFor:a.settings?.fpts||0,pointsAgainst:a.settings?.fpts_against||0,remainingSchedule:w(a.roster_id,p.length,u)})),b={playoffTeams:o.settings?.playoff_teams||6,regularSeasonWeeks:o.settings?.playoff_week_start?o.settings.playoff_week_start-1:14,currentWeek:u},c=await aK.calculatePlayoffProbabilities(a,b),e={...c,probabilities:c.probabilities.map(a=>({...a,teamName:(a=>{let b=p.find(b=>b.roster_id===a);if(!b)return`Team ${a}`;let c=b.owner_id?s.get(b.owner_id):void 0;return c?.team_name||c?.display_name||`Team ${a}`})(a.teamId)}))};d(e)}catch(a){n(a.message||"Failed to calculate playoff probabilities")}finally{b(!1)}},w=(a,b,c)=>{let d=[],e=(o?.settings?.playoff_week_start||15)-c,f=p.map(a=>a.roster_id).filter(b=>b!==a);for(let a=0;a<e;a++){let b=a%f.length;d.push(f[b])}return d};return o?(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,e.jsx)(aG,{className:"h-5 w-5"}),"Playoff Calculator"]}),(0,e.jsx)(h.CardDescription,{children:"Monte Carlo simulation of remaining season scenarios"})]}),(0,e.jsx)(i.Button,{onClick:v,disabled:a,variant:"outline",children:a?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(aH.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Calculating..."]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Target,{className:"h-4 w-4 mr-2"}),"Calculate"]})})]})}),(0,e.jsxs)(h.CardContent,{children:[g&&(0,e.jsxs)(m.Alert,{variant:"destructive",className:"mb-4",children:[(0,e.jsx)(r.AlertTriangle,{className:"h-4 w-4"}),(0,e.jsx)(m.AlertDescription,{children:g})]}),!c&&!a&&(0,e.jsxs)("div",{className:"text-center py-8",children:[(0,e.jsx)(aG,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:'Click "Calculate" to simulate playoff scenarios'}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Uses 10,000 Monte Carlo simulations"})]}),a&&(0,e.jsxs)("div",{className:"text-center py-8",children:[(0,e.jsx)(aH.RefreshCw,{className:"h-8 w-8 mx-auto animate-spin text-primary mb-4"}),(0,e.jsxs)("p",{className:"text-muted-foreground",children:["Running ",aK.SIMULATIONS||1e4," simulations..."]})]}),c&&(0,e.jsxs)(k.Tabs,{defaultValue:"probabilities",className:"space-y-4",children:[(0,e.jsxs)(k.TabsList,{className:"grid w-full grid-cols-2",children:[(0,e.jsx)(k.TabsTrigger,{value:"probabilities",children:"Playoff Odds"}),(0,e.jsx)(k.TabsTrigger,{value:"scenarios",children:"Scenarios"})]}),(0,e.jsx)(k.TabsContent,{value:"probabilities",className:"space-y-4",children:(0,e.jsx)("div",{className:"grid gap-3",children:c.probabilities.sort((a,b)=>b.playoffProbability-a.playoffProbability).map(a=>{var b,c;let d=(b=a.playoffProbability)>=90?{variant:"default",text:"Lock"}:b>=70?{variant:"secondary",text:"Likely"}:b>=30?{variant:"outline",text:"Possible"}:{variant:"destructive",text:"Unlikely"},f=a.teamId===t?.roster_id;return(0,e.jsxs)("div",{className:(0,z.cn)("p-4 rounded-lg border transition-all",f&&"bg-primary/5 border-primary/20"),children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"font-medium",children:a.teamName}),f&&(0,e.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:"You"})]}),(0,e.jsx)(j.Badge,{variant:d.variant,children:d.text})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,e.jsx)("span",{children:"Playoff Probability"}),(0,e.jsxs)("span",{className:(0,z.cn)("font-bold",(c=a.playoffProbability)>=80?"text-green-600":c>=60?"text-yellow-600":c>=40?"text-orange-600":"text-red-600"),children:[a.playoffProbability.toFixed(1),"%"]})]}),(0,e.jsx)(l.Progress,{value:a.playoffProbability,className:"h-2"})]}),(0,e.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-3 text-sm",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Current"}),(0,e.jsx)("div",{className:"font-medium",children:a.currentRecord})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Projected"}),(0,e.jsxs)("div",{className:"font-medium",children:[a.projectedWins.toFixed(1),"-",a.projectedLosses.toFixed(1)]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Championship"}),(0,e.jsxs)("div",{className:"font-medium",children:[a.championshipProbability.toFixed(1),"%"]})]})]})]},a.teamId)})})}),(0,e.jsxs)(k.TabsContent,{value:"scenarios",className:"space-y-4",children:[c.probabilities.filter(a=>a.teamId===t?.roster_id).map(a=>(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,e.jsxs)("h4",{className:"font-medium text-green-800 mb-2 flex items-center gap-2",children:[(0,e.jsx)(aI.CheckCircle2,{className:"h-4 w-4"}),"Clinch Scenarios"]}),a.clinchScenarios.length>0?(0,e.jsx)("ul",{className:"space-y-1 text-sm text-green-700",children:a.clinchScenarios.map((a,b)=>(0,e.jsxs)("li",{className:"flex items-start gap-2",children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsx)("span",{children:a})]},b))}):(0,e.jsx)("p",{className:"text-sm text-green-700",children:"No guaranteed clinch scenarios available"})]}),a.eliminationScenarios.length>0&&(0,e.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,e.jsxs)("h4",{className:"font-medium text-red-800 mb-2 flex items-center gap-2",children:[(0,e.jsx)(aJ.XCircle,{className:"h-4 w-4"}),"Elimination Scenarios"]}),(0,e.jsx)("ul",{className:"space-y-1 text-sm text-red-700",children:a.eliminationScenarios.map((a,b)=>(0,e.jsxs)("li",{className:"flex items-start gap-2",children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsx)("span",{children:a})]},b))})]})]},a.teamId)),(0,e.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:[(0,e.jsxs)("p",{children:["Simulations based on ",c.totalSimulations.toLocaleString()," scenarios"]}),(0,e.jsx)("p",{children:"Calculations include strength of schedule and historical performance"})]})]})]})]})]}):(0,e.jsx)(h.Card,{children:(0,e.jsx)(h.CardContent,{className:"py-8",children:(0,e.jsx)("div",{className:"text-center text-muted-foreground",children:"Please select a league to view playoff probabilities"})})})}let aM=(0,aF.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),aN=(0,aF.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var aO=a.i(53277),aP=a.i(23312);let aQ=(0,aF.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),aR=(0,aF.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var aS=a.i(63047);let aT=Object.create(null);aT.open="0",aT.close="1",aT.ping="2",aT.pong="3",aT.message="4",aT.upgrade="5",aT.noop="6";let aU=Object.create(null);Object.keys(aT).forEach(a=>{aU[aT[a]]=a});let aV={type:"error",data:"parser error"},aW=({type:a,data:b},c,d)=>d(b instanceof ArrayBuffer||ArrayBuffer.isView(b)?c?b:"b"+aX(b,!0).toString("base64"):aT[a]+(b||"")),aX=(a,b)=>Buffer.isBuffer(a)||a instanceof Uint8Array&&!b?a:a instanceof ArrayBuffer?Buffer.from(a):Buffer.from(a.buffer,a.byteOffset,a.byteLength),aY=(a,b)=>{if("string"!=typeof a)return{type:"message",data:aZ(a,b)};let c=a.charAt(0);return"b"===c?{type:"message",data:aZ(Buffer.from(a.substring(1),"base64"),b)}:aU[c]?a.length>1?{type:aU[c],data:a.substring(1)}:{type:aU[c]}:aV},aZ=(a,b)=>"arraybuffer"===b?a instanceof ArrayBuffer?a:Buffer.isBuffer(a)?a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength):a.buffer:Buffer.isBuffer(a)?a:Buffer.from(a);function a$(a){return a.reduce((a,b)=>a+b.length,0)}function a_(a,b){if(a[0].length===b)return a.shift();let c=new Uint8Array(b),d=0;for(let e=0;e<b;e++)c[e]=a[0][d++],d===a[0].length&&(a.shift(),d=0);return a.length&&d<a[0].length&&(a[0]=a[0].slice(d)),c}function a0(a){if(a){var b=a;for(var c in a0.prototype)b[c]=a0.prototype[c];return b}}a0.prototype.on=a0.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},a0.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},a0.prototype.off=a0.prototype.removeListener=a0.prototype.removeAllListeners=a0.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c,d=this._callbacks["$"+a];if(!d)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var e=0;e<d.length;e++)if((c=d[e])===b||c.fn===b){d.splice(e,1);break}return 0===d.length&&delete this._callbacks["$"+a],this},a0.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var b=Array(arguments.length-1),c=this._callbacks["$"+a],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},a0.prototype.emitReserved=a0.prototype.emit,a0.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},a0.prototype.hasListeners=function(a){return!!this.listeners(a).length};let a1=process.nextTick,a2=a.g;class a3{constructor(){this._cookies=new Map}parseCookies(a){a&&a.forEach(a=>{let b=function(a){let b=a.split("; "),c=b[0].indexOf("=");if(-1===c)return;let d=b[0].substring(0,c).trim();if(!d.length)return;let e=b[0].substring(c+1).trim();34===e.charCodeAt(0)&&(e=e.slice(1,-1));let f={name:d,value:e};for(let a=1;a<b.length;a++){let c=b[a].split("=");if(2!==c.length)continue;let d=c[0].trim(),e=c[1].trim();switch(d){case"Expires":f.expires=new Date(e);break;case"Max-Age":let g=new Date;g.setUTCSeconds(g.getUTCSeconds()+parseInt(e,10)),f.expires=g}}return f}(a);b&&this._cookies.set(b.name,b)})}get cookies(){let a=Date.now();return this._cookies.forEach((b,c)=>{var d;(null==(d=b.expires)?void 0:d.getTime())<a&&this._cookies.delete(c)}),this._cookies.entries()}addCookies(a){let b=[];for(let[a,c]of this.cookies)b.push(`${a}=${c.value}`);b.length&&(a.setDisableHeaderCheck(!0),a.setRequestHeader("cookie",b.join("; ")))}appendCookies(a){for(let[b,c]of this.cookies)a.append("cookie",`${b}=${c.value}`)}}function a4(a,...b){return b.reduce((b,c)=>(a.hasOwnProperty(c)&&(b[c]=a[c]),b),{})}let a5=a2.setTimeout,a6=a2.clearTimeout;function a7(a,b){b.useNativeTimers?(a.setTimeoutFn=a5.bind(a2),a.clearTimeoutFn=a6.bind(a2)):(a.setTimeoutFn=a2.setTimeout.bind(a2),a.clearTimeoutFn=a2.clearTimeout.bind(a2))}function a8(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}var a9=a.i(39432);let ba=(0,a9.default)("engine.io-client:transport");class bb extends Error{constructor(a,b,c){super(a),this.description=b,this.context=c,this.type="TransportError"}}class bc extends a0{constructor(a){super(),this.writable=!1,a7(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,b,c){return super.emitReserved("error",new bb(a,b,c)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(a){"open"===this.readyState?this.write(a):ba("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){let b=aY(a,this.socket.binaryType);this.onPacket(b)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,b={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(b)}_hostname(){let a=this.opts.hostname;return -1===a.indexOf(":")?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(a){let b=function(a){let b="";for(let c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b}(a);return b.length?"?"+b:""}}let bd=(0,a9.default)("engine.io-client:polling");class be extends bc{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";let b=()=>{bd("paused"),this.readyState="paused",a()};if(this._polling||!this.writable){let a=0;this._polling&&(bd("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){bd("pre-pause polling complete"),--a||b()})),this.writable||(bd("we are currently writing - waiting to pause"),a++,this.once("drain",function(){bd("pre-pause writing complete"),--a||b()}))}else b()}_poll(){bd("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){bd("polling got data %s",a);let b=a=>{if("opening"===this.readyState&&"open"===a.type&&this.onOpen(),"close"===a.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};((a,b)=>{let c=a.split("\x1e"),d=[];for(let a=0;a<c.length;a++){let e=aY(c[a],b);if(d.push(e),"error"===e.type)break}return d})(a,this.socket.binaryType).forEach(b),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this._poll():bd('ignoring poll - transport state "%s"',this.readyState))}doClose(){let a=()=>{bd("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(bd("transport open - closing"),a()):(bd("transport not open - deferring close"),this.once("open",a))}write(a){this.writable=!1,((a,b)=>{let c=a.length,d=Array(c),e=0;a.forEach((a,f)=>{aW(a,!1,a=>{d[f]=a,++e===c&&b(d.join("\x1e"))})})})(a,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let a=this.opts.secure?"https":"http",b=this.query||{};return!1!==this.opts.timestampRequests&&(b[this.opts.timestampParam]=a8()),this.supportsBinary||b.sid||(b.b64=1),this.createUri(a,b)}}let bf=!1;try{bf="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(a){}let bg=bf,bh=(0,a9.default)("engine.io-client:polling");function bi(){}class bj extends be{constructor(a){if(super(a),"undefined"!=typeof location){let b="https:"===location.protocol,c=location.port;c||(c=b?"443":"80"),this.xd="undefined"!=typeof location&&a.hostname!==location.hostname||c!==a.port}}doWrite(a,b){let c=this.request({method:"POST",data:a});c.on("success",b),c.on("error",(a,b)=>{this.onError("xhr post error",a,b)})}doPoll(){bh("xhr poll");let a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(a,b)=>{this.onError("xhr poll error",a,b)}),this.pollXhr=a}}class bk extends a0{constructor(a,b,c){super(),this.createRequest=a,a7(this,c),this._opts=c,this._method=c.method||"GET",this._uri=b,this._data=void 0!==c.data?c.data:null,this._create()}_create(){var a;let b=a4(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");b.xdomain=!!this._opts.xd;let c=this._xhr=this.createRequest(b);try{bh("xhr open %s: %s",this._method,this._uri),c.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let a in c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&c.setRequestHeader(a,this._opts.extraHeaders[a])}catch(a){}if("POST"===this._method)try{c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{c.setRequestHeader("Accept","*/*")}catch(a){}null==(a=this._opts.cookieJar)||a.addCookies(c),"withCredentials"in c&&(c.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(c.timeout=this._opts.requestTimeout),c.onreadystatechange=()=>{var a;3===c.readyState&&(null==(a=this._opts.cookieJar)||a.parseCookies(c.getResponseHeader("set-cookie"))),4===c.readyState&&(200===c.status||1223===c.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof c.status?c.status:0)},0))},bh("xhr data %s",this._data),c.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}"undefined"!=typeof document&&(this._index=bk.requestsCount++,bk.requests[this._index]=this)}_onError(a){this.emitReserved("error",a,this._xhr),this._cleanup(!0)}_cleanup(a){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=bi,a)try{this._xhr.abort()}catch(a){}"undefined"!=typeof document&&delete bk.requests[this._index],this._xhr=null}}_onLoad(){let a=this._xhr.responseText;null!==a&&(this.emitReserved("data",a),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function bl(){for(let a in bk.requests)bk.requests.hasOwnProperty(a)&&bk.requests[a].abort()}bk.requestsCount=0,bk.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",bl):"function"==typeof addEventListener&&addEventListener("onpagehide"in a2?"pagehide":"unload",bl,!1)),function(){let a=function(a){let b=a.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!b||bg))return new XMLHttpRequest}catch(a){}if(!b)try{return new a2[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(a){}}({xdomain:!1});a&&a.responseType}();let bm=aS.default||aS;a.i(57515),a.i(47541),a.i(71387);var bn=a.i(36705);a.i(67691),bn.default;let bo=(0,a9.default)("engine.io-client:websocket"),bp="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class bq extends bc{get name(){return"websocket"}doOpen(){let a=this.uri(),b=this.opts.protocols,c=bp?{}:a4(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(c.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,b,c)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let b=0;b<a.length;b++){let c=a[b],d=b===a.length-1;aW(c,this.supportsBinary,a=>{try{this.doWrite(c,a)}catch(a){bo("websocket closed before onclose event")}d&&a1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let a=this.opts.secure?"wss":"ws",b=this.query||{};return this.opts.timestampRequests&&(b[this.opts.timestampParam]=a8()),this.supportsBinary||(b.b64=1),this.createUri(a,b)}}a2.WebSocket||a2.MozWebSocket;let br=(0,a9.default)("engine.io-client:webtransport"),bs={websocket:class extends bq{createSocket(a,b,c){var d;if(null==(d=this.socket)?void 0:d._cookieJar)for(let[a,b]of(c.headers=c.headers||{},c.headers.cookie="string"==typeof c.headers.cookie?[c.headers.cookie]:c.headers.cookie||[],this.socket._cookieJar.cookies))c.headers.cookie.push(`${a}=${b.value}`);return new bn.default(a,b,c)}doWrite(a,b){let c={};a.options&&(c.compress=a.options.compress),this.opts.perMessageDeflate&&("string"==typeof b?Buffer.byteLength(b):b.length)<this.opts.perMessageDeflate.threshold&&(c.compress=!1),this.ws.send(b,c)}},webtransport:class extends bc{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{br("transport closed gracefully"),this.onClose()}).catch(a=>{br("transport closed due to %s",a),this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{let d=function(a,b){c||(c=new TextDecoder);let d=[],e=0,f=-1,g=!1;return new TransformStream({transform(h,i){for(d.push(h);;){if(0===e){if(1>a$(d))break;let a=a_(d,1);g=(128&a[0])==128,e=(f=127&a[0])<126?3:126===f?1:2}else if(1===e){if(2>a$(d))break;let a=a_(d,2);f=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),e=3}else if(2===e){if(8>a$(d))break;let a=a_(d,8),b=new DataView(a.buffer,a.byteOffset,a.length),c=b.getUint32(0);if(c>2097151){i.enqueue(aV);break}f=0x100000000*c+b.getUint32(4),e=3}else{if(a$(d)<f)break;let a=a_(d,f);i.enqueue(aY(g?a:c.decode(a),b)),e=0}if(0===f||f>a){i.enqueue(aV);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),e=a.readable.pipeThrough(d).getReader(),f=new TransformStream({transform(a,c){!function(a,c){if(a.data instanceof ArrayBuffer||ArrayBuffer.isView(a.data))return c(aX(a.data,!1));aW(a,!0,a=>{b||(b=new TextEncoder),c(b.encode(a))})}(a,b=>{let d,e=b.length;if(e<126)new DataView((d=new Uint8Array(1)).buffer).setUint8(0,e);else if(e<65536){let a=new DataView((d=new Uint8Array(3)).buffer);a.setUint8(0,126),a.setUint16(1,e)}else{let a=new DataView((d=new Uint8Array(9)).buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(e))}a.data&&"string"!=typeof a.data&&(d[0]|=128),c.enqueue(d),c.enqueue(b)})}});f.readable.pipeTo(a.writable),this._writer=f.writable.getWriter();let g=()=>{e.read().then(({done:a,value:b})=>{if(a)return void br("session is closed");br("received chunk: %o",b),this.onPacket(b),g()}).catch(a=>{br("an error occurred while reading: %s",a)})};g();let h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this._writer.write(h).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let b=0;b<a.length;b++){let c=a[b],d=b===a.length-1;this._writer.write(c).then(()=>{d&&a1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;null==(a=this._transport)||a.close()}},polling:class extends bj{request(a={}){var b;return Object.assign(a,{xd:this.xd,cookieJar:null==(b=this.socket)?void 0:b._cookieJar},this.opts),new bk(a=>new bm(a),this.uri(),a)}}},bt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bu=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function bv(a){if(a.length>8e3)throw"URI too long";let b=a,c=a.indexOf("["),d=a.indexOf("]");-1!=c&&-1!=d&&(a=a.substring(0,c)+a.substring(c,d).replace(/:/g,";")+a.substring(d,a.length));let e=bt.exec(a||""),f={},g=14;for(;g--;)f[bu[g]]=e[g]||"";return -1!=c&&-1!=d&&(f.source=b,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=function(a,b){let c=b.replace(/\/{2,9}/g,"/").split("/");return("/"==b.slice(0,1)||0===b.length)&&c.splice(0,1),"/"==b.slice(-1)&&c.splice(c.length-1,1),c}(0,f.path),f.queryKey=function(a,b){let c={};return b.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c[b]=d)}),c}(0,f.query),f}let bw=(0,a9.default)("engine.io-client:socket"),bx="function"==typeof addEventListener&&"function"==typeof removeEventListener,by=[];bx&&addEventListener("offline",()=>{bw("closing %d connection(s) because the network was lost",by.length),by.forEach(a=>a())},!1);class bz extends a0{constructor(a,b){if(super(),this.binaryType="nodebuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,a&&"object"==typeof a&&(b=a,a=null),a){let c=bv(a);b.hostname=c.host,b.secure="https"===c.protocol||"wss"===c.protocol,b.port=c.port,c.query&&(b.query=c.query)}else b.host&&(b.hostname=bv(b.host).host);a7(this,b),this.secure=null!=b.secure?b.secure:"undefined"!=typeof location&&"https:"===location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.hostname=b.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=b.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},b.transports.forEach(a=>{let b=a.prototype.name;this.transports.push(b),this._transportsByName[b]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},b),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(a){let b={},c=a.split("&");for(let a=0,d=c.length;a<d;a++){let d=c[a].split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return b}(this.opts.query)),bx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(bw("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},by.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=new a3),this._open()}createTransport(a){bw('creating transport "%s"',a);let b=Object.assign({},this.opts.query);b.EIO=4,b.transport=a,this.id&&(b.sid=this.id);let c=Object.assign({},this.opts,{query:b,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return bw("options: %j",c),new this._transportsByName[a](c)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);let a=this.opts.rememberUpgrade&&bz.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let b=this.createTransport(a);b.open(),this.setTransport(b)}setTransport(a){bw("setting transport %s",a.name),this.transport&&(bw("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){bw("socket open"),this.readyState="open",bz.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(a){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(bw('socket receive: type "%s", data "%s"',a.type,a.data),this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let b=Error("server error");b.code=a.data,this._onError(b);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data)}else bw('packet received with socket readyState "%s"',this.readyState)}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this._pingInterval=a.pingInterval,this._pingTimeout=a.pingTimeout,this._maxPayload=a.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let a=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+a,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},a),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let a=this._getWritablePackets();bw("flushing %d packets in socket",a.length),this.transport.send(a),this._prevBufferLen=a.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let b=0;b<this.writeBuffer.length;b++){let c=this.writeBuffer[b].data;if(c&&(a+="string"==typeof c?function(a){let b=0,c=0;for(let d=0,e=a.length;d<e;d++)(b=a.charCodeAt(d))<128?c+=1:b<2048?c+=2:b<55296||b>=57344?c+=3:(d++,c+=4);return c}(c):Math.ceil(1.33*(c.byteLength||c.size))),b>0&&a>this._maxPayload)return bw("only send %d out of %d packets",b,this.writeBuffer.length),this.writeBuffer.slice(0,b);a+=2}return bw("payload size is %d (max: %d)",a,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let a=Date.now()>this._pingTimeoutTime;return a&&(bw("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,a1(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),a}write(a,b,c){return this._sendPacket("message",a,b,c),this}send(a,b,c){return this._sendPacket("message",a,b,c),this}_sendPacket(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"===this.readyState||"closed"===this.readyState)return;(c=c||{}).compress=!1!==c.compress;let e={type:a,data:b,options:c};this.emitReserved("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}close(){let a=()=>{this._onClose("forced close"),bw("socket closing - telling transport to close"),this.transport.close()},b=()=>{this.off("upgrade",b),this.off("upgradeError",b),a()},c=()=>{this.once("upgrade",b),this.once("upgradeError",b)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?c():a()}):this.upgrading?c():a()),this}_onError(a){if(bw("socket error %j",a),bz.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return bw("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",a),this._onClose("transport error",a)}_onClose(a,b){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(bw('socket close with reason: "%s"',a),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),bx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let a=by.indexOf(this._offlineEventListener);-1!==a&&(bw("removing listener for the 'offline' event"),by.splice(a,1))}this.readyState="closed",this.id=null,this.emitReserved("close",a,b),this.writeBuffer=[],this._prevBufferLen=0}}}bz.protocol=4;class bA extends bz{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade){bw("starting upgrade probes");for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}}_probe(a){bw('probing transport "%s"',a);let b=this.createTransport(a),c=!1;bz.priorWebsocketSuccess=!1;let d=()=>{c||(bw('probe transport "%s" opened',a),b.send([{type:"ping",data:"probe"}]),b.once("packet",d=>{if(!c)if("pong"===d.type&&"probe"===d.data){if(bw('probe transport "%s" pong',a),this.upgrading=!0,this.emitReserved("upgrading",b),!b)return;bz.priorWebsocketSuccess="websocket"===b.name,bw('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{c||"closed"!==this.readyState&&(bw("changing transport and sending upgrade packet"),j(),this.setTransport(b),b.send([{type:"upgrade"}]),this.emitReserved("upgrade",b),b=null,this.upgrading=!1,this.flush())})}else{bw('probe transport "%s" failed',a);let c=Error("probe error");c.transport=b.name,this.emitReserved("upgradeError",c)}}))};function e(){c||(c=!0,j(),b.close(),b=null)}let f=c=>{let d=Error("probe error: "+c);d.transport=b.name,e(),bw('probe transport "%s" failed because of error: %s',a,c),this.emitReserved("upgradeError",d)};function g(){f("transport closed")}function h(){f("socket closed")}function i(a){b&&a.name!==b.name&&(bw('"%s" works - aborting "%s"',a.name,b.name),e())}let j=()=>{b.removeListener("open",d),b.removeListener("error",f),b.removeListener("close",g),this.off("close",h),this.off("upgrading",i)};b.once("open",d),b.once("error",f),b.once("close",g),this.once("close",h),this.once("upgrading",i),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==a?this.setTimeoutFn(()=>{c||b.open()},200):b.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){let b=[];for(let c=0;c<a.length;c++)~this.transports.indexOf(a[c])&&b.push(a[c]);return b}}class bB extends bA{constructor(a,b={}){let c="object"==typeof a?a:b;(!c.transports||c.transports&&"string"==typeof c.transports[0])&&(c.transports=(c.transports||["polling","websocket","webtransport"]).map(a=>bs[a]).filter(a=>!!a)),super(a,c)}}bB.protocol;var bC=a.i(14016);let bD=(0,bC.default)("socket.io-client:url");a.s(["Decoder",()=>bO,"Encoder",()=>bM,"PacketType",()=>d,"protocol",()=>bL],32882);let bE="function"==typeof ArrayBuffer,bF=Object.prototype.toString,bG="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===bF.call(Blob),bH="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===bF.call(File);function bI(a){return bE&&(a instanceof ArrayBuffer||("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer))||bG&&a instanceof Blob||bH&&a instanceof File}let bJ=(0,a.i(19031).default)("socket.io-parser"),bK=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],bL=5;!function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"}(d||(d={}));class bM{constructor(a){this.replacer=a}encode(a){return(bJ("encoding packet %j",a),(a.type===d.EVENT||a.type===d.ACK)&&function a(b,c){if(!b||"object"!=typeof b)return!1;if(Array.isArray(b)){for(let c=0,d=b.length;c<d;c++)if(a(b[c]))return!0;return!1}if(bI(b))return!0;if(b.toJSON&&"function"==typeof b.toJSON&&1==arguments.length)return a(b.toJSON(),!0);for(let c in b)if(Object.prototype.hasOwnProperty.call(b,c)&&a(b[c]))return!0;return!1}(a))?this.encodeAsBinary({type:a.type===d.EVENT?d.BINARY_EVENT:d.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let b=""+a.type;return(a.type===d.BINARY_EVENT||a.type===d.BINARY_ACK)&&(b+=a.attachments+"-"),a.nsp&&"/"!==a.nsp&&(b+=a.nsp+","),null!=a.id&&(b+=a.id),null!=a.data&&(b+=JSON.stringify(a.data,this.replacer)),bJ("encoded %j as %s",a,b),b}encodeAsBinary(a){let b=function(a){let b=[],c=a.data;return a.data=function a(b,c){if(!b)return b;if(bI(b)){let a={_placeholder:!0,num:c.length};return c.push(b),a}if(Array.isArray(b)){let d=Array(b.length);for(let e=0;e<b.length;e++)d[e]=a(b[e],c);return d}if("object"==typeof b&&!(b instanceof Date)){let d={};for(let e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d[e]=a(b[e],c));return d}return b}(c,b),a.attachments=b.length,{packet:a,buffers:b}}(a),c=this.encodeAsString(b.packet),d=b.buffers;return d.unshift(c),d}}function bN(a){return"[object Object]"===Object.prototype.toString.call(a)}class bO extends a0{constructor(a){super(),this.reviver=a}add(a){let b;if("string"==typeof a){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let c=(b=this.decodeString(a)).type===d.BINARY_EVENT;c||b.type===d.BINARY_ACK?(b.type=c?d.EVENT:d.ACK,this.reconstructor=new bP(b),0===b.attachments&&super.emitReserved("decoded",b)):super.emitReserved("decoded",b)}else if(bI(a)||a.base64)if(this.reconstructor)(b=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,super.emitReserved("decoded",b));else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a)}decodeString(a){let b=0,c={type:Number(a.charAt(0))};if(void 0===d[c.type])throw Error("unknown packet type "+c.type);if(c.type===d.BINARY_EVENT||c.type===d.BINARY_ACK){let d=b+1;for(;"-"!==a.charAt(++b)&&b!=a.length;);let e=a.substring(d,b);if(e!=Number(e)||"-"!==a.charAt(b))throw Error("Illegal attachments");c.attachments=Number(e)}if("/"===a.charAt(b+1)){let d=b+1;for(;++b&&","!==a.charAt(b)&&b!==a.length;);c.nsp=a.substring(d,b)}else c.nsp="/";let e=a.charAt(b+1);if(""!==e&&Number(e)==e){let d=b+1;for(;++b;){let c=a.charAt(b);if(null==c||Number(c)!=c){--b;break}if(b===a.length)break}c.id=Number(a.substring(d,b+1))}if(a.charAt(++b)){let d=this.tryParse(a.substr(b));if(bO.isPayloadValid(c.type,d))c.data=d;else throw Error("invalid payload")}return bJ("decoded %s as %j",a,c),c}tryParse(a){try{return JSON.parse(a,this.reviver)}catch(a){return!1}}static isPayloadValid(a,b){switch(a){case d.CONNECT:return bN(b);case d.DISCONNECT:return void 0===b;case d.CONNECT_ERROR:return"string"==typeof b||bN(b);case d.EVENT:case d.BINARY_EVENT:return Array.isArray(b)&&("number"==typeof b[0]||"string"==typeof b[0]&&-1===bK.indexOf(b[0]));case d.ACK:case d.BINARY_ACK:return Array.isArray(b)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class bP{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){var b,c;let a=(b=this.reconPack,c=this.buffers,b.data=function a(b,c){if(!b)return b;if(b&&!0===b._placeholder){if("number"==typeof b.num&&b.num>=0&&b.num<c.length)return c[b.num];throw Error("illegal attachments")}if(Array.isArray(b))for(let d=0;d<b.length;d++)b[d]=a(b[d],c);else if("object"==typeof b)for(let d in b)Object.prototype.hasOwnProperty.call(b,d)&&(b[d]=a(b[d],c));return b}(b.data,c),delete b.attachments,b);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function bQ(a,b,c){return a.on(b,c),function(){a.off(b,c)}}let bR=(0,bC.default)("socket.io-client:socket"),bS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bT extends a0{constructor(a,b,c){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=b,c&&c.auth&&(this.auth=c.auth),this._opts=Object.assign({},c),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let a=this.io;this.subs=[bQ(a,"open",this.onopen.bind(this)),bQ(a,"packet",this.onpacket.bind(this)),bQ(a,"error",this.onerror.bind(this)),bQ(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...b){var c,e,f;if(bS.hasOwnProperty(a))throw Error('"'+a.toString()+'" is a reserved event name');if(b.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(b),this;let g={type:d.EVENT,data:b};if(g.options={},g.options.compress=!1!==this.flags.compress,"function"==typeof b[b.length-1]){let a=this.ids++;bR("emitting packet with ack id %d",a);let c=b.pop();this._registerAckCallback(a,c),g.id=a}let h=null==(e=null==(c=this.io.engine)?void 0:c.transport)?void 0:e.writable,i=this.connected&&!(null==(f=this.io.engine)?void 0:f._hasPingExpired());return this.flags.volatile&&!h?bR("discard packet as the transport is not currently writable"):i?(this.notifyOutgoingListeners(g),this.packet(g)):this.sendBuffer.push(g),this.flags={},this}_registerAckCallback(a,b){var c;let d=null!=(c=this.flags.timeout)?c:this._opts.ackTimeout;if(void 0===d){this.acks[a]=b;return}let e=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let b=0;b<this.sendBuffer.length;b++)this.sendBuffer[b].id===a&&(bR("removing packet with ack id %d from the buffer",a),this.sendBuffer.splice(b,1));bR("event with ack id %d has timed out after %d ms",a,d),b.call(this,Error("operation has timed out"))},d),f=(...a)=>{this.io.clearTimeoutFn(e),b.apply(this,a)};f.withError=!0,this.acks[a]=f}emitWithAck(a,...b){return new Promise((c,d)=>{let e=(a,b)=>a?d(a):c(b);e.withError=!0,b.push(e),this.emit(a,...b)})}_addToQueue(a){let b;"function"==typeof a[a.length-1]&&(b=a.pop());let c={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((a,...d)=>{if(c===this._queue[0])return null!==a?c.tryCount>this._opts.retries&&(bR("packet [%d] is discarded after %d tries",c.id,c.tryCount),this._queue.shift(),b&&b(a)):(bR("packet [%d] was successfully sent",c.id),this._queue.shift(),b&&b(null,...d)),c.pending=!1,this._drainQueue()}),this._queue.push(c),this._drainQueue()}_drainQueue(a=!1){if(bR("draining queue"),!this.connected||0===this._queue.length)return;let b=this._queue[0];if(b.pending&&!a)return void bR("packet [%d] has already been sent and is waiting for an ack",b.id);b.pending=!0,b.tryCount++,bR("sending packet [%d] (try n°%d)",b.id,b.tryCount),this.flags=b.flags,this.emit.apply(this,b.args)}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){bR("transport is open - connecting"),"function"==typeof this.auth?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:d.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,b){bR("close (%s)",a),this.connected=!1,delete this.id,this.emitReserved("disconnect",a,b),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(b=>String(b.id)===a)){let b=this.acks[a];delete this.acks[a],b.withError&&b.call(this,Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case d.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case d.EVENT:case d.BINARY_EVENT:this.onevent(a);break;case d.ACK:case d.BINARY_ACK:this.onack(a);break;case d.DISCONNECT:this.ondisconnect();break;case d.CONNECT_ERROR:this.destroy();let b=Error(a.data.message);b.data=a.data.data,this.emitReserved("connect_error",b)}}onevent(a){let b=a.data||[];bR("emitting event %j",b),null!=a.id&&(bR("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?this.emitEvent(b):this.receiveBuffer.push(Object.freeze(b))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length)for(let b of this._anyListeners.slice())b.apply(this,a);super.emit.apply(this,a),this._pid&&a.length&&"string"==typeof a[a.length-1]&&(this._lastOffset=a[a.length-1])}ack(a){let b=this,c=!1;return function(...e){c||(c=!0,bR("sending ack %j",e),b.packet({type:d.ACK,id:a,data:e}))}}onack(a){let b=this.acks[a.id];if("function"!=typeof b)return void bR("bad ack %s",a.id);delete this.acks[a.id],bR("calling ack %s with %j",a.id,a.data),b.withError&&a.data.unshift(null),b.apply(this,a.data)}onconnect(a,b){bR("socket connected with id %s",a),this.id=a,this.recovered=b&&this._pid===b,this._pid=b,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){bR("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(bR("performing disconnect (%s)",this.nsp),this.packet({type:d.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){let b=this._anyListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){let b=this._anyOutgoingListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let b of this._anyOutgoingListeners.slice())b.apply(this,a.data)}}var bU=a.i(32882);function bV(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}bV.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=(1&Math.floor(10*b))==0?a-c:a+c}return 0|Math.min(a,this.max)},bV.prototype.reset=function(){this.attempts=0},bV.prototype.setMin=function(a){this.ms=a},bV.prototype.setMax=function(a){this.max=a},bV.prototype.setJitter=function(a){this.jitter=a};let bW=(0,bC.default)("socket.io-client:manager");class bX extends a0{constructor(a,b){var c;super(),this.nsps={},this.subs=[],a&&"object"==typeof a&&(b=a,a=void 0),(b=b||{}).path=b.path||"/socket.io",this.opts=b,a7(this,b),this.reconnection(!1!==b.reconnection),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(c=b.randomizationFactor)?c:.5),this.backoff=new bV({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this._readyState="closed",this.uri=a;let d=b.parser||bU;this.encoder=new d.Encoder,this.decoder=new d.Decoder,this._autoConnect=!1!==b.autoConnect,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return void 0===a?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var b;return void 0===a?this._reconnectionDelay:(this._reconnectionDelay=a,null==(b=this.backoff)||b.setMin(a),this)}randomizationFactor(a){var b;return void 0===a?this._randomizationFactor:(this._randomizationFactor=a,null==(b=this.backoff)||b.setJitter(a),this)}reconnectionDelayMax(a){var b;return void 0===a?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,null==(b=this.backoff)||b.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(a){if(bW("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;bW("opening %s",this.uri),this.engine=new bB(this.uri,this.opts);let b=this.engine,c=this;this._readyState="opening",this.skipReconnect=!1;let d=bQ(b,"open",function(){c.onopen(),a&&a()}),e=b=>{bW("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",b),a?a(b):this.maybeReconnectOnOpen()},f=bQ(b,"error",e);if(!1!==this._timeout){let a=this._timeout;bW("connect attempt will timeout after %d",a);let c=this.setTimeoutFn(()=>{bW("connect attempt timed out after %d",a),d(),e(Error("timeout")),b.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(d),this.subs.push(f),this}connect(a){return this.open(a)}onopen(){bW("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let a=this.engine;this.subs.push(bQ(a,"ping",this.onping.bind(this)),bQ(a,"data",this.ondata.bind(this)),bQ(a,"error",this.onerror.bind(this)),bQ(a,"close",this.onclose.bind(this)),bQ(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(a){this.onclose("parse error",a)}}ondecoded(a){a1(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){bW("error",a),this.emitReserved("error",a)}socket(a,b){let c=this.nsps[a];return c?this._autoConnect&&!c.active&&c.connect():(c=new bT(this,a,b),this.nsps[a]=c),c}_destroy(a){for(let a of Object.keys(this.nsps))if(this.nsps[a].active)return void bW("socket %s is still active, skipping close",a);this._close()}_packet(a){bW("writing packet %j",a);let b=this.encoder.encode(a);for(let c=0;c<b.length;c++)this.engine.write(b[c],a.options)}cleanup(){bW("cleanup"),this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){bW("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,b){var c;bW("closed due to %s",a),this.cleanup(),null==(c=this.engine)||c.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,b),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let a=this;if(this.backoff.attempts>=this._reconnectionAttempts)bW("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let b=this.backoff.duration();bW("will wait %dms before reconnect attempt",b),this._reconnecting=!0;let c=this.setTimeoutFn(()=>{!a.skipReconnect&&(bW("attempting reconnect"),this.emitReserved("reconnect_attempt",a.backoff.attempts),a.skipReconnect||a.open(b=>{b?(bW("reconnect attempt error"),a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",b)):(bW("reconnect success"),a.onreconnect())}))},b);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}}onreconnect(){let a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}let bY=(0,bC.default)("socket.io-client"),bZ={};function b$(a,b){let c;"object"==typeof a&&(b=a,a=void 0);let d=function(a,b="",c){let d=a;c=c||"undefined"!=typeof location&&location,null==a&&(a=c.protocol+"//"+c.host),"string"==typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?c.protocol+a:c.host+a),/^(https?|wss?):\/\//.test(a)||(bD("protocol-less url %s",a),a=void 0!==c?c.protocol+"//"+a:"https://"+a),bD("parse %s",a),d=bv(a)),!d.port&&(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";let e=-1!==d.host.indexOf(":")?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+e+":"+d.port+b,d.href=d.protocol+"://"+e+(c&&c.port===d.port?"":":"+d.port),d}(a,(b=b||{}).path||"/socket.io"),e=d.source,f=d.id,g=d.path,h=bZ[f]&&g in bZ[f].nsps;return b.forceNew||b["force new connection"]||!1===b.multiplex||h?(bY("ignoring socket cache for %s",e),c=new bX(e,b)):(bZ[f]||(bY("new io instance for %s",e),bZ[f]=new bX(e,b)),c=bZ[f]),d.query&&!b.query&&(b.query=d.queryKey),c.socket(d.path,b)}Object.assign(b$,{Manager:bX,Socket:bT,io:b$,connect:b$});class b_{socket=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;callbacks=new Map;connect(a,b=[]){return new Promise((c,d)=>{try{this.socket=b$(process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001",{auth:{userId:a,leagueIds:b},transports:["websocket","polling"],timeout:2e4,forceNew:!0}),this.setupEventHandlers(),this.socket.on("connect",()=>{console.log("Live scoring connected"),this.isConnected=!0,this.reconnectAttempts=0,c()}),this.socket.on("connect_error",a=>{console.error("Live scoring connection error:",a),d(a)})}catch(a){d(a)}})}setupEventHandlers(){this.socket&&(this.socket.on("disconnect",()=>{console.log("Live scoring disconnected"),this.isConnected=!1,this.attemptReconnect()}),this.socket.on("player_score_update",a=>{this.emit("player_score_update",a)}),this.socket.on("matchup_score_update",a=>{this.emit("matchup_score_update",a)}),this.socket.on("player_news",a=>{this.emit("player_news",a)}),this.socket.on("week_started",a=>{this.emit("week_started",a)}),this.socket.on("week_finalized",a=>{this.emit("week_finalized",a)}),this.socket.on("game_started",a=>{this.emit("game_started",a)}),this.socket.on("game_finished",a=>{this.emit("game_finished",a)}),this.socket.on("trade_completed",a=>{this.emit("trade_completed",a)}),this.socket.on("waiver_processed",a=>{this.emit("waiver_processed",a)}))}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return void console.error("Max reconnection attempts reached");this.reconnectAttempts++,setTimeout(()=>{console.log(`Attempting reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),this.socket&&this.socket.connect()},Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4))}subscribeToLeague(a){this.socket&&this.isConnected&&this.socket.emit("subscribe_league",{leagueId:a})}unsubscribeFromLeague(a){this.socket&&this.isConnected&&this.socket.emit("unsubscribe_league",{leagueId:a})}subscribeToPlayer(a){this.socket&&this.isConnected&&this.socket.emit("subscribe_player",{playerId:a})}requestLiveScores(a,b){this.socket&&this.isConnected&&this.socket.emit("get_live_scores",{leagueId:a,week:b})}on(a,b){this.callbacks.has(a)||this.callbacks.set(a,new Set),this.callbacks.get(a).add(b)}off(a,b){let c=this.callbacks.get(a);c&&c.delete(b)}emit(a,b){let c=this.callbacks.get(a);c&&c.forEach(a=>{try{a(b)}catch(a){console.error("Error in live scoring callback:",a)}})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1),this.callbacks.clear()}getConnectionStatus(){return this.isConnected}startMockUpdates(a,b){}}let b0=new b_;function b1(){let[a,b]=(0,f.useState)(!1),[c,d]=(0,f.useState)(!1),[g,k]=(0,f.useState)([]),[l,n]=(0,f.useState)(null),[o,p]=(0,f.useState)(!1),[q,r]=(0,f.useState)(0),{user:s,currentLeague:t,currentWeek:u,myRoster:v}=(0,A.default)();(0,f.useEffect)(()=>(s&&t&&w(),()=>{b0.disconnect()}),[s,t]);let w=async()=>{if(s&&t){d(!0),n(null);try{try{await b0.connect(s.user_id,[t.league_id]),b(!0),y()}catch(a){console.warn("WebSocket unavailable, starting mock updates"),b0.startMockUpdates(t.league_id,u),b(!0),y()}}catch(a){n(a.message||"Failed to connect to live scoring")}finally{d(!1)}}},y=()=>{b0.on("player_score_update",B),b0.on("matchup_score_update",C),b0.on("player_news",D),b0.on("disconnect",()=>b(!1)),b0.on("connect",()=>b(!0))},B=(0,f.useCallback)(a=>{if(o)return;let b={id:`score-${a.playerId}-${Date.now()}`,type:"score",timestamp:Date.now(),data:a,isNew:!0};k(a=>[b,...a.slice(0,49)].map((a,b)=>({...a,isNew:0===b}))),r(Date.now())},[o]),C=(0,f.useCallback)(a=>{if(o)return;let b={id:`matchup-${a.matchupId}-${Date.now()}`,type:"matchup",timestamp:Date.now(),data:a,isNew:!0};k(a=>[b,...a.slice(0,49)]),r(Date.now())},[o]),D=(0,f.useCallback)(a=>{if(o)return;let b={id:`news-${a.playerId}-${Date.now()}`,type:"news",timestamp:Date.now(),data:a,isNew:!0};k(a=>[b,...a.slice(0,49)]),r(Date.now())},[o]);return(0,e.jsxs)(h.Card,{children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[a?(0,e.jsx)(aM,{className:"h-5 w-5 text-green-600"}):(0,e.jsx)(aN,{className:"h-5 w-5 text-red-600"}),"Live Scoring",a&&(0,e.jsxs)(j.Badge,{variant:"outline",className:"ml-2",children:[(0,e.jsx)(x.Activity,{className:"h-3 w-3 mr-1 animate-pulse"}),"Live"]})]}),(0,e.jsx)(h.CardDescription,{children:"Real-time score updates and player news"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{p(!o)},disabled:!a,children:o?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(aQ,{className:"h-4 w-4 mr-1"}),"Resume"]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(aR,{className:"h-4 w-4 mr-1"}),"Pause"]})}),(0,e.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{k([]),r(0)},children:"Clear"}),!a&&(0,e.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{w()},disabled:c,children:c?(0,e.jsx)(aH.RefreshCw,{className:"h-4 w-4 animate-spin"}):"Reconnect"})]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,e.jsxs)("span",{className:"flex items-center gap-1",children:[(0,e.jsx)(av.Clock,{className:"h-4 w-4"}),"Last update: ",(()=>{if(0===q)return"Never";let a=Math.floor((Date.now()-q)/1e3);if(a<60)return`${a}s ago`;let b=Math.floor(a/60);if(b<60)return`${b}m ago`;let c=Math.floor(b/60);return`${c}h ago`})()]}),(0,e.jsxs)("span",{className:"flex items-center gap-1",children:[(0,e.jsx)(aP.Bell,{className:"h-4 w-4"}),g.length," updates"]}),o&&(0,e.jsx)(j.Badge,{variant:"outline",className:"text-orange-600",children:"Paused"})]})]}),(0,e.jsxs)(h.CardContent,{children:[l&&(0,e.jsx)(m.Alert,{variant:"destructive",className:"mb-4",children:(0,e.jsx)(m.AlertDescription,{children:l})}),!a&&!c&&(0,e.jsx)(m.Alert,{className:"mb-4",children:(0,e.jsx)(m.AlertDescription,{children:"Live scoring is disconnected. Using mock data for development."})}),c&&(0,e.jsxs)("div",{className:"text-center py-8",children:[(0,e.jsx)(aH.RefreshCw,{className:"h-8 w-8 mx-auto animate-spin text-primary mb-4"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"Connecting to live scoring..."})]}),0===g.length&&a&&!c?(0,e.jsxs)("div",{className:"text-center py-8",children:[(0,e.jsx)(x.Activity,{className:"h-8 w-8 mx-auto text-muted-foreground mb-4"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"Waiting for live updates..."}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Updates will appear here during game time"})]}):(0,e.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.map(a=>(0,e.jsxs)("div",{className:(0,z.cn)("p-3 rounded-lg border transition-all duration-500",a.isNew&&"bg-blue-50 border-blue-200 animate-pulse"),children:["score"===a.type&&(0,e.jsx)(b2,{update:a.data}),"matchup"===a.type&&(0,e.jsx)(b3,{update:a.data}),"news"===a.type&&(0,e.jsx)(b4,{update:a.data}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(a.timestamp).toLocaleTimeString()})]},a.id))})]})]})}function b2({update:a}){let b=a.points-a.previousPoints,c=b>0;return(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-medium",children:a.playerName}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.position," • ",a.team]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:"font-bold",children:a.points.toFixed(1)}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"live"===a.gameStatus?"Live":"Final"})]}),0!==b&&(0,e.jsxs)("div",{className:(0,z.cn)("flex items-center gap-1 text-sm",c?"text-green-600":"text-red-600"),children:[c?(0,e.jsx)(at.TrendingUp,{className:"h-4 w-4"}):(0,e.jsx)(aO.TrendingDown,{className:"h-4 w-4"}),Math.abs(b).toFixed(1)]})]})]})}function b3({update:a}){let b=a.teams[0],c=a.teams[1];return(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,e.jsxs)("span",{children:["Matchup ",a.matchupId]}),(0,e.jsxs)(j.Badge,{variant:"outline",children:[a.gamesInProgress," live games"]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"font-medium",children:["Team ",b.rosterId]}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[b.score.toFixed(1)," pts"]})]}),(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"vs"}),(0,e.jsx)(l.Progress,{value:b.score/(b.score+c.score)*100,className:"w-16 h-2"})]}),(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsxs)("div",{className:"font-medium",children:["Team ",c.rosterId]}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[c.score.toFixed(1)," pts"]})]})]})]})}function b4({update:a}){return(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"flex items-start justify-between",children:[(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("div",{className:"font-medium",children:a.title}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:a.description})]}),(0,e.jsxs)("div",{className:"flex flex-col gap-1 ml-3",children:[(0,e.jsxs)(j.Badge,{variant:"outline",className:(0,z.cn)("text-xs",(a=>{switch(a){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}})(a.impact)),children:[a.impact," impact"]}),(0,e.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:a.type})]})]})})}var b5=a.i(39761),b6=a.i(21374);function b7(){var a,b;let[c,d]=(0,f.useState)(null),[g,i]=(0,f.useState)([]),[m,n]=(0,f.useState)([]),[o,p]=(0,f.useState)(!1),{currentLeague:s,myRoster:u,rosters:v,leagueUsers:w,players:y,currentWeek:B,seasonMatchups:C}=(0,A.default)();(0,f.useEffect)(()=>{u&&s&&D()},[u,s,C]);let D=async()=>{if(u&&s){p(!0);try{let a=E();d(a);let b=F();i(b);let c=G();n(c)}catch(a){console.error("Error calculating analytics:",a)}finally{p(!1)}}},E=()=>{if(!u)throw Error("No roster data");let a=J(u.roster_id),b=u.settings?.fpts||0,c=(u.settings?.wins||0)+(u.settings?.losses||0)+(u.settings?.ties||0),d=c>0?b/c:0,e=v.reduce((a,b)=>a+(b.settings?.fpts||0),0)/v.length/Math.max(c,1),f=e>0?d/e*100:50,g=H(),h=Math.max(0,100-I(g)/d*100),i=Math.max(...g),j=Math.min(...g.filter(a=>a>0)),k=g.slice(-3),l=k.reduce((a,b)=>a+b,0)/k.length,m=.5+.3*Math.random(),n=Math.random()>.7?"high":Math.random()>.4?"medium":"low";return{rosterId:u.roster_id,teamName:a,efficiency:Math.round(f),consistency:Math.round(h),ceiling:i,floor:j,trendScore:Math.round(d>0?l/d*100:50),strengthOfSchedule:Math.round(100*m)/100,injuryRisk:n,tradeValue:Math.round(.8*f+.2*h)}},F=()=>u?["QB","RB","WR","TE","K","DEF"].map(a=>{let b=u.players.map(a=>y.get(a)).filter(b=>b&&b.position===a),c=b.length,d=b.reduce((a,b)=>a+(b?.age||25),0)/Math.max(c,1),e=100*Math.random();return{position:a,depth:c,averageAge:Math.round(10*d)/10,upside:Math.round(e),stability:Math.round(100*Math.random()),needsUpgrade:c<2||d>30||e<60}}):[],G=()=>{let a=[];for(let b=1;b<=B;b++){let c=C.get(b)||[],d=c.find(a=>a.roster_id===u?.roster_id);if(d){let e=c.map(a=>a.points).sort((a,b)=>b-a).indexOf(d.points)+1,f="stable";if(a.length>0){let b=a[a.length-1].rank;e<b?f="up":e>b&&(f="down")}a.push({week:b,points:d.points,rank:e,trend:f})}}return a},H=()=>{let a=[];for(let b=1;b<=B;b++){let c=(C.get(b)||[]).find(a=>a.roster_id===u?.roster_id);c&&a.push(c.points)}return a},I=a=>{if(0===a.length)return 0;let b=a.reduce((a,b)=>a+b,0)/a.length;return Math.sqrt(a.reduce((a,c)=>a+Math.pow(c-b,2),0)/a.length)},J=a=>{let b=v.find(b=>b.roster_id===a);if(!b)return`Team ${a}`;let c=b.owner_id?w.get(b.owner_id):void 0;return c?.team_name||c?.display_name||`Team ${a}`},K=a=>{switch(a){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";default:return"text-gray-600"}};return s?o||!c?(0,e.jsx)(h.Card,{children:(0,e.jsx)(h.CardContent,{className:"py-8",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)(x.Activity,{className:"h-8 w-8 mx-auto animate-spin text-primary mb-4"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"Calculating advanced analytics..."})]})})}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,e.jsx)(b5.BarChart3,{className:"h-5 w-5"}),"Efficiency"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsxs)("div",{className:(0,z.cn)("text-3xl font-bold",(a=c.efficiency)>=110?"text-green-600":a>=100?"text-blue-600":a>=90?"text-yellow-600":"text-red-600"),children:[c.efficiency,"%"]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"vs League Avg"}),(0,e.jsx)(l.Progress,{value:c.efficiency,className:"mt-2"})]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,e.jsx)(q.Target,{className:"h-5 w-5"}),"Consistency"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsxs)("div",{className:(0,z.cn)("text-3xl font-bold",(b=c.consistency)>=80?"text-green-600":b>=65?"text-yellow-600":"text-red-600"),children:[c.consistency,"%"]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Week to Week"}),(0,e.jsx)(l.Progress,{value:c.consistency,className:"mt-2"})]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,e.jsx)(t.Zap,{className:"h-5 w-5"}),"Ceiling/Floor"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("div",{className:"text-lg font-bold text-green-600",children:c.ceiling.toFixed(1)}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"/"}),(0,e.jsx)("div",{className:"text-lg font-bold text-red-600",children:c.floor.toFixed(1)})]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Best/Worst Week"})]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{className:"pb-2",children:(0,e.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,e.jsx)(at.TrendingUp,{className:"h-5 w-5"}),"Recent Trend"]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsxs)("div",{className:(0,z.cn)("text-3xl font-bold",c.trendScore>105?"text-green-600":c.trendScore>95?"text-yellow-600":"text-red-600"),children:[c.trendScore,"%"]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Last 3 Weeks"})]})]})]}),(0,e.jsxs)(k.Tabs,{defaultValue:"positional",className:"space-y-4",children:[(0,e.jsxs)(k.TabsList,{className:"grid w-full grid-cols-3",children:[(0,e.jsx)(k.TabsTrigger,{value:"positional",children:"Position Analysis"}),(0,e.jsx)(k.TabsTrigger,{value:"trends",children:"Weekly Trends"}),(0,e.jsx)(k.TabsTrigger,{value:"risk",children:"Risk Assessment"})]}),(0,e.jsx)(k.TabsContent,{value:"positional",className:"space-y-4",children:(0,e.jsxs)(h.Card,{children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsx)(h.CardTitle,{children:"Positional Strength Analysis"}),(0,e.jsx)(h.CardDescription,{children:"Depth, age, and upgrade needs by position"})]}),(0,e.jsx)(h.CardContent,{children:(0,e.jsx)("div",{className:"grid gap-4",children:g.map(a=>(0,e.jsxs)("div",{className:(0,z.cn)("p-4 rounded-lg border",a.needsUpgrade&&"bg-orange-50 border-orange-200"),children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"font-medium text-lg",children:a.position}),a.needsUpgrade&&(0,e.jsxs)(j.Badge,{variant:"destructive",className:"text-xs",children:[(0,e.jsx)(r.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Needs Upgrade"]})]}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.depth," player",1!==a.depth?"s":""]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Avg Age"}),(0,e.jsxs)("div",{className:"font-medium",children:[a.averageAge," years"]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Upside"}),(0,e.jsxs)("div",{className:"font-medium",children:[a.upside,"%"]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-muted-foreground",children:"Stability"}),(0,e.jsxs)("div",{className:"font-medium",children:[a.stability,"%"]})]})]})]},a.position))})})]})}),(0,e.jsx)(k.TabsContent,{value:"trends",className:"space-y-4",children:(0,e.jsxs)(h.Card,{children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsx)(h.CardTitle,{children:"Weekly Performance Trends"}),(0,e.jsx)(h.CardDescription,{children:"Points scored and league ranking by week"})]}),(0,e.jsx)(h.CardContent,{children:(0,e.jsx)("div",{className:"space-y-3",children:m.map(a=>{let b="up"===a.trend?at.TrendingUp:"down"===a.trend?aO.TrendingDown:x.Activity,c="up"===a.trend?"text-green-600":"down"===a.trend?"text-red-600":"text-gray-600";return(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-primary-foreground font-bold text-sm",children:a.week}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"font-medium",children:[a.points.toFixed(1)," pts"]}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:["#",a.rank," in league"]})]})]}),(0,e.jsx)(b,{className:(0,z.cn)("h-5 w-5",c)})]},a.week)})})})]})}),(0,e.jsx)(k.TabsContent,{value:"risk",className:"space-y-4",children:(0,e.jsxs)(h.Card,{children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsx)(h.CardTitle,{children:"Risk Assessment"}),(0,e.jsx)(h.CardDescription,{children:"Injury risk, schedule difficulty, and trade value"})]}),(0,e.jsx)(h.CardContent,{children:(0,e.jsx)("div",{className:"grid gap-6",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"p-4 rounded-lg border",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,e.jsx)(r.AlertTriangle,{className:(0,z.cn)("h-5 w-5",K(c.injuryRisk))}),(0,e.jsx)("span",{className:"font-medium",children:"Injury Risk"})]}),(0,e.jsx)("div",{className:(0,z.cn)("text-lg font-bold capitalize",K(c.injuryRisk)),children:c.injuryRisk}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Based on player ages and positions"})]}),(0,e.jsxs)("div",{className:"p-4 rounded-lg border",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,e.jsx)(av.Clock,{className:"h-5 w-5"}),(0,e.jsx)("span",{className:"font-medium",children:"Schedule Strength"})]}),(0,e.jsx)("div",{className:"text-lg font-bold",children:c.strengthOfSchedule.toFixed(2)}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Remaining opponents difficulty"})]}),(0,e.jsxs)("div",{className:"p-4 rounded-lg border",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,e.jsx)(b6.Star,{className:"h-5 w-5"}),(0,e.jsx)("span",{className:"font-medium",children:"Trade Value"})]}),(0,e.jsxs)("div",{className:"text-lg font-bold",children:[c.tradeValue,"%"]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Overall team attractiveness"})]})]})})})]})})]})]}):(0,e.jsx)(h.Card,{children:(0,e.jsx)(h.CardContent,{className:"py-8",children:(0,e.jsx)("div",{className:"text-center text-muted-foreground",children:"Please select a league to view analytics"})})})}let b8=(0,aF.default)("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);function b9(){let[a,b]=(0,f.useState)("players"),{currentLeague:c,rosters:d,leagueUsers:g,players:k,seasonMatchups:l,currentWeek:m,myRoster:n}=(0,A.default)(),o=(0,f.useMemo)(()=>{if(!n||0===l.size)return[];let a=[];return n.players.forEach(b=>{let c=k.get(b);if(!c)return;let d=[];for(let a=1;a<=m;a++){let c=(l.get(a)||[]).find(a=>a.roster_id===n.roster_id);c&&c.players_points[b]&&d.push(c.players_points[b])}if(0===d.length)return;let e=d.reduce((a,b)=>a+b,0)/d.length,f=d[d.length-1]||0,g=d.slice(-3),h=g.reduce((a,b)=>a+b,0)/g.length,i="steady";h>1.15*e?i="hot":h<.85*e&&(i="cold");let j=Math.max(0,100-Math.sqrt(d.reduce((a,b)=>a+Math.pow(b-e,2),0)/d.length)/e*100);a.push({playerId:b,playerName:c.full_name,position:c.position,team:c.team||"FA",avgPoints:Math.round(100*e)/100,lastWeekPoints:Math.round(100*f)/100,trend:i,consistency:Math.round(j),rosterId:n.roster_id})}),a.sort((a,b)=>b.avgPoints-a.avgPoints)},[n,l,k,m]),r=(0,f.useMemo)(()=>{let a=[];return d.forEach(b=>{let c=b.owner_id?g.get(b.owner_id):void 0,d=c?.team_name||c?.display_name||`Team ${b.roster_id}`,e=b.settings?.wins||0,f=b.settings?.losses||0,h=b.settings?.ties||0,i=b.settings?.fpts||0,j=b.settings?.fpts_against||0,k=e+f+h,l=k>0?i/k:0,m=k>0?j/k:0,n=k>0?e/k:0;a.push({rosterId:b.roster_id,teamName:d,record:`${e}-${f}${h>0?`-${h}`:""}`,pointsFor:i,pointsAgainst:j,avgPointsFor:Math.round(100*l)/100,avgPointsAgainst:Math.round(100*m)/100,powerRanking:Math.round(100*(.6*n+l/150*.4)),momentum:"stable",playoffs:n>.5||l>120})}),a.sort((a,b)=>b.powerRanking-a.powerRanking)},[d,g]);return c?(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,e.jsx)(b5.BarChart3,{className:"h-5 w-5"}),"Performance Analysis"]}),(0,e.jsx)(h.CardDescription,{children:"Track player and team performance trends"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(i.Button,{variant:"players"===a?"default":"outline",size:"sm",onClick:()=>b("players"),children:"Players"}),(0,e.jsx)(i.Button,{variant:"teams"===a?"default":"outline",size:"sm",onClick:()=>b("teams"),children:"Teams"})]})]})}),(0,e.jsx)(h.CardContent,{children:"players"===a?(0,e.jsx)("div",{className:"space-y-3",children:o.slice(0,10).map(a=>{var b;let c=(a=>{switch(a){case"hot":return v.Flame;case"cold":return w.Snowflake;default:return x.Activity}})(a.trend);return(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(c,{className:(0,z.cn)("h-4 w-4",(a=>{switch(a){case"hot":return"text-red-500";case"cold":return"text-blue-500";default:return"text-gray-500"}})(a.trend))}),(0,e.jsx)(j.Badge,{variant:"outline",className:"text-xs",children:a.position})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-medium",children:a.playerName}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:a.team})]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:"font-bold",children:a.avgPoints}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Avg PPG"})]}),(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:"font-medium",children:a.lastWeekPoints}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Last Week"})]}),(0,e.jsxs)("div",{className:"text-right min-w-[60px]",children:[(0,e.jsxs)("div",{className:(0,z.cn)("font-medium",(b=a.consistency)>=80?"text-green-600":b>=60?"text-yellow-600":"text-red-600"),children:[a.consistency,"%"]}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Consistent"})]})]})]},a.playerId)})}):(0,e.jsx)("div",{className:"space-y-3",children:r.map((a,b)=>(0,e.jsxs)("div",{className:(0,z.cn)("flex items-center justify-between p-3 rounded-lg border",a.rosterId===n?.roster_id&&"bg-primary/5 border-primary/20"),children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[b<3&&(0,e.jsx)(b8,{className:(0,z.cn)("h-4 w-4",0===b?"text-yellow-500":1===b?"text-gray-400":"text-amber-600")}),(0,e.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:["#",b+1]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"font-medium",children:a.teamName}),a.rosterId===n?.roster_id&&(0,e.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:"You"})]}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.record," • ",a.avgPointsFor," PPG"]})]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:"font-bold",children:a.powerRanking}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"Power"})]}),(0,e.jsxs)("div",{className:"flex flex-col gap-1",children:[a.playoffs&&(0,e.jsxs)(j.Badge,{variant:"default",className:"text-xs",children:[(0,e.jsx)(p.Trophy,{className:"h-3 w-3 mr-1"}),"Playoff"]}),(0,e.jsxs)(j.Badge,{variant:"up"===a.momentum?"default":"down"===a.momentum?"destructive":"secondary",className:"text-xs",children:["up"===a.momentum?(0,e.jsx)(at.TrendingUp,{className:"h-3 w-3 mr-1"}):"down"===a.momentum?(0,e.jsx)(aO.TrendingDown,{className:"h-3 w-3 mr-1"}):(0,e.jsx)(q.Target,{className:"h-3 w-3 mr-1"}),a.momentum]})]})]})]},a.rosterId))})})]}):(0,e.jsx)(h.Card,{children:(0,e.jsx)(h.CardContent,{className:"py-8",children:(0,e.jsx)("div",{className:"text-center text-muted-foreground",children:"Please select a league to view performance data"})})})}var ca=a.i(92e3);function cb(){let a=(0,g.useRouter)(),[b,c]=(0,f.useState)(!1),{user:d,leagues:q,currentLeague:s,myRoster:t,rosters:u,leagueUsers:v,currentMatchups:w,currentWeek:y,players:C,isLoading:D,error:E,getPlayer:F,selectLeague:G,fetchPlayers:H,refreshData:I}=(0,A.default)();(0,f.useEffect)(()=>{d||a.push("/login")},[d,a]),(0,f.useEffect)(()=>{d&&0===C.size&&H()},[d]);let J=async()=>{c(!0),await I(),c(!1)},K=async a=>{await G(a)},L=a=>{let b=u.find(b=>b.roster_id===a);if(!b)return`Team ${a}`;let c=b.owner_id?v.get(b.owner_id):void 0;return c?.team_name||c?.display_name||`Team ${a}`},M=[...u].sort((a,b)=>{let c=a.settings?.wins||0,d=a.settings?.losses||0,e=b.settings?.wins||0,f=b.settings?.losses||0,g=c/Math.max(c+d,1),h=e/Math.max(e+f,1);return g!==h?h-g:(b.settings?.fpts||0)-(a.settings?.fpts||0)}),N=w.find(a=>a.roster_id===t?.roster_id),O=N?w.find(a=>a.matchup_id===N.matchup_id&&a.roster_id!==N.roster_id):null;return d?(0,e.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,e.jsx)(n.ModernNav,{}),q.length>0&&(0,e.jsx)("div",{className:"container mx-auto p-4",children:(0,e.jsx)("div",{className:"max-w-md",children:(0,e.jsx)(o.MultiTeamSwitcher,{})})}),E&&(0,e.jsx)("div",{className:"container mx-auto px-4",children:(0,e.jsxs)(m.Alert,{variant:"destructive",children:[(0,e.jsx)(ca.AlertCircle,{className:"h-4 w-4"}),(0,e.jsx)(m.AlertDescription,{children:E})]})}),!s&&q.length>1&&(0,e.jsx)("div",{className:"container mx-auto p-4",children:(0,e.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,e.jsxs)(m.Alert,{children:[(0,e.jsx)(p.Trophy,{className:"h-4 w-4"}),(0,e.jsxs)(m.AlertDescription,{children:[(0,e.jsx)("strong",{children:"Multiple leagues found!"})," Please select a league from the dropdown above to view your dashboard."]})]}),(0,e.jsxs)(h.Card,{children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsx)(h.CardTitle,{children:"Your Fantasy Leagues"}),(0,e.jsx)(h.CardDescription,{children:"Choose which league you'd like to manage"})]}),(0,e.jsx)(h.CardContent,{children:(0,e.jsx)("div",{className:"grid gap-3",children:q.map(a=>(0,e.jsx)(i.Button,{variant:"outline",onClick:()=>K(a.league_id),className:"justify-start h-auto p-4",disabled:D,children:(0,e.jsxs)("div",{className:"text-left",children:[(0,e.jsx)("div",{className:"font-medium",children:a.name}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.total_rosters," teams • ",a.season," season"]})]})},a.league_id))})})]})]})}),s&&(0,e.jsxs)("main",{className:"container mx-auto p-4 space-y-6",children:[(0,e.jsx)(B,{}),N&&O&&(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)(h.CardTitle,{children:["Week ",y," Matchup"]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(j.Badge,{variant:"default",children:[(0,e.jsx)(x.Activity,{className:"h-3 w-3 mr-1"}),"Live"]}),(0,e.jsx)(i.Button,{variant:"outline",size:"sm",onClick:J,disabled:b,children:(0,e.jsx)(aH.RefreshCw,{className:(0,z.cn)("h-4 w-4",b&&"animate-spin")})})]})]})}),(0,e.jsxs)(h.CardContent,{children:[(0,e.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"font-medium mb-2",children:L(N.roster_id)}),(0,e.jsx)("div",{className:"text-3xl font-bold",children:N.points.toFixed(1)}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[t?.settings?.wins||0,"-",t?.settings?.losses||0]})]}),(0,e.jsx)("div",{className:"flex items-center justify-center",children:(0,e.jsx)(l.Progress,{value:N.points/Math.max(N.points+O.points,1)*100,className:"h-3 w-full"})}),(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"font-medium mb-2",children:L(O.roster_id)}),(0,e.jsx)("div",{className:"text-3xl font-bold",children:O.points.toFixed(1)}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[u.find(a=>a.roster_id===O.roster_id)?.settings?.wins||0,"-",u.find(a=>a.roster_id===O.roster_id)?.settings?.losses||0]})]})]}),N.points!==O.points&&(0,e.jsx)(m.Alert,{className:"mt-4",variant:N.points>O.points?"default":"destructive",children:(0,e.jsx)(m.AlertDescription,{children:N.points>O.points?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(at.TrendingUp,{className:"h-4 w-4 inline mr-2"}),"You're winning by ",(N.points-O.points).toFixed(1)," points!"]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.AlertTriangle,{className:"h-4 w-4 inline mr-2"}),"You're losing by ",(O.points-N.points).toFixed(1)," points"]})})})]})]}),(0,e.jsxs)(k.Tabs,{defaultValue:"roster",className:"space-y-4",children:[(0,e.jsxs)(k.TabsList,{className:"grid grid-cols-5 w-full",children:[(0,e.jsx)(k.TabsTrigger,{value:"roster",children:"My Roster"}),(0,e.jsx)(k.TabsTrigger,{value:"standings",children:"Standings"}),(0,e.jsx)(k.TabsTrigger,{value:"scoreboard",children:"Scoreboard"}),(0,e.jsx)(k.TabsTrigger,{value:"playoffs",children:"Playoffs"}),(0,e.jsx)(k.TabsTrigger,{value:"analytics",children:"Analytics"})]}),(0,e.jsx)(k.TabsContent,{value:"roster",children:t&&N?(0,e.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Enhanced Roster View temporarily disabled for maintenance"}):(0,e.jsx)(h.Card,{children:(0,e.jsx)(h.CardContent,{className:"py-8",children:(0,e.jsx)("div",{className:"text-center text-muted-foreground",children:"No roster data available"})})})}),(0,e.jsx)(k.TabsContent,{value:"standings",children:(0,e.jsxs)(h.Card,{children:[(0,e.jsxs)(h.CardHeader,{children:[(0,e.jsx)(h.CardTitle,{children:"League Standings"}),(0,e.jsx)(h.CardDescription,{children:s.name})]}),(0,e.jsx)(h.CardContent,{children:(0,e.jsx)("div",{className:"space-y-2",children:M.map((a,b)=>(0,e.jsxs)("div",{className:(0,z.cn)("flex items-center justify-between p-3 rounded-lg border transition-all",a.roster_id===t?.roster_id&&"bg-primary/5 border-primary/20"),children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"text-lg font-bold text-muted-foreground",children:b+1}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"font-medium",children:[L(a.roster_id),a.roster_id===t?.roster_id&&(0,e.jsx)(j.Badge,{className:"ml-2",variant:"secondary",children:"You"})]}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.settings?.wins||0,"-",a.settings?.losses||0,(a.settings?.ties||0)>0&&`-${a.settings.ties}`]})]})]}),(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:"font-bold",children:(a.settings?.fpts||0).toFixed(1)}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:"PF"})]})]},a.roster_id))})})]})}),(0,e.jsx)(k.TabsContent,{value:"scoreboard",children:(0,e.jsx)("div",{className:"space-y-4",children:(0,e.jsxs)(h.Card,{children:[(0,e.jsx)(h.CardHeader,{children:(0,e.jsxs)(h.CardTitle,{children:["Week ",y," Scoreboard"]})}),(0,e.jsx)(h.CardContent,{children:(0,e.jsx)("div",{className:"grid grid-cols-1 gap-3",children:Array.from(new Set(w.map(a=>a.matchup_id))).map(a=>{let b=w.filter(b=>b.matchup_id===a);if(2!==b.length)return null;let c=b.some(a=>a.roster_id===t?.roster_id);return(0,e.jsx)("div",{className:(0,z.cn)("border rounded-lg p-4",c&&"ring-2 ring-primary"),children:(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-medium",children:L(b[0].roster_id)}),(0,e.jsx)("div",{className:"text-2xl font-bold",children:b[0].points.toFixed(1)})]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"VS"}),(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:"font-medium",children:L(b[1].roster_id)}),(0,e.jsx)("div",{className:"text-2xl font-bold",children:b[1].points.toFixed(1)})]})]})},a)})})})]})})}),(0,e.jsx)(k.TabsContent,{value:"playoffs",children:(0,e.jsx)(aL,{})}),(0,e.jsxs)(k.TabsContent,{value:"analytics",className:"space-y-6",children:[(0,e.jsx)(b9,{}),(0,e.jsx)(b7,{})]})]}),(0,e.jsx)(aE,{}),(0,e.jsx)(b1,{}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,e.jsx)(aA,{week:y}),(0,e.jsx)(az,{})]})]})]}):null}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7697918c._.js.map